{"version":3,"sources":["webpack:///./src/views/Detail.vue?4c1b","webpack:///./src/components/Review.vue?5dd3","webpack:///./node_modules/@fullcalendar/core/main.esm.js","webpack:///./node_modules/fast-deep-equal/index.js","webpack:///./src/components/Stars.vue?ee1b","webpack:///./src/components/Stars.vue","webpack:///./src/components/Stars.vue?9694","webpack:///./src/components/Stars.vue?0174","webpack:///./src/components/DescriptionList.vue?5baf","webpack:///./src/components/DescriptionList.vue","webpack:///./src/components/DescriptionList.vue?9562","webpack:///./src/components/DescriptionList.vue?e721","webpack:///./src/components/Modal.vue?08eb","webpack:///./src/components/Stars.vue?2f0c","webpack:///./src/views/Detail.vue?d162","webpack:///./src/components/Calendar.vue?170e","webpack:///./node_modules/@fullcalendar/daygrid/main.esm.js","webpack:///./node_modules/@fullcalendar/timegrid/main.esm.js","webpack:///./src/components/Modal.vue?5ad6","webpack:///./src/components/Errors.vue?2ebc","webpack:///./src/components/Errors.vue","webpack:///./src/components/Errors.vue?db72","webpack:///./src/components/Errors.vue?be3b","webpack:///./src/components/Modal.vue","webpack:///./src/components/Modal.vue?579f","webpack:///./src/components/Modal.vue?92f8","webpack:///./src/components/Calendar.vue","webpack:///./src/components/Calendar.vue?0f50","webpack:///./src/components/Calendar.vue?8639","webpack:///./src/components/Review.vue?2a56","webpack:///./src/components/Review.vue","webpack:///./src/components/Review.vue?ee35","webpack:///./src/components/Review.vue?db97","webpack:///./src/views/Detail.vue","webpack:///./src/views/Detail.vue?d994","webpack:///./src/views/Detail.vue?f8a1","webpack:///./src/components/DescriptionList.vue?53c1","webpack:///./node_modules/@fullcalendar/vue/main.esm.js","webpack:///./src/components/Calendar.vue?5942","webpack:///./src/components/Errors.vue?416f"],"names":["elementPropHash","className","colSpan","rowSpan","containerTagHash","createElement","tagName","attrs","content","el","document","attrName","applyStyle","setAttribute","innerHTML","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","Array","prototype","slice","call","htmlToNodeList","childNodes","substr","normalizeContent","i","length","appendChild","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","parentNode","els","Node","removeElement","removeChild","matchesMethod","Element","matches","matchesSelector","msMatchesSelector","closestMethod","closest","selector","this","documentElement","contains","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","querySelectorAll","j","push","findChildren","parents","children","childNode","PIXEL_PROP_RE","props","propName","applyStyleProp","name","val","style","test","intersectRects","rect1","rect2","res","left","Math","max","right","min","top","bottom","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","computeIsRtlScrollbarOnLeft","outerEl","position","border","padding","overflow","direction","body","innerEl","getBoundingClientRect","sanitizeScrollbarWidth","width","round","computeEdges","getPadding","computedStyle","window","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","clientWidth","scrollbarBottom","offsetHeight","clientHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeInnerRect","goWithinPadding","outerRect","computeRect","edges","rect","pageXOffset","pageYOffset","computeViewportRect","computeHeightAndMargins","height","computeVMargins","computed","marginTop","marginBottom","getClippingParents","overflowY","overflowX","computeClippingRect","map","concat","reduce","rect0","listenBySelector","eventType","handler","realHandler","ev","matchedChild","target","addEventListener","removeEventListener","listenToHoverBySelector","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","DAY_IDS","addWeeks","m","n","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","valueOf","diffHours","diffMinutes","diffSeconds","diffDayAndTime","m0day","startOfDay","m1day","years","months","days","milliseconds","diffWholeWeeks","d","diffWholeDays","timeAsMs","getUTCFullYear","getUTCMonth","getUTCDate","startOfHour","getUTCHours","startOfMinute","getUTCMinutes","startOfSecond","getUTCSeconds","weekOfYear","marker","dow","doy","y","w","weekOfGivenYear","nextW","year","firstWeekStart","firstWeekOffset","dayStart","floor","fwd","fwdlw","getUTCDay","dateToLocalArray","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","Date","getUTCMilliseconds","UTC","apply","isValidDate","isNaN","INTERNAL_UNITS","PARSE_RE","createDuration","input","unit","_a","parseString","normalizeObject","s","exec","sign","obj","month","day","getWeeksFromInput","hours","hour","minutes","minute","seconds","second","millisecond","ms","weeks","week","durationsEqual","d0","d1","addDurations","subtractDurations","multiplyDuration","asRoughYears","dur","asRoughDays","asRoughMonths","asRoughMs","wholeDivideDurations","numerator","denominator","localRes","isInt","greatestDurationDenominator","dontReturnWeeks","value","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","distributeHeight","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","forEach","minOffset","naturalHeight","naturalOffset","newHeight","matchCellWidths","maxInnerWidth","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","parseFieldSpecs","token","specs","tokens","split","isArray","charAt","field","substring","order","func","compareByFieldSpecs","obj0","obj1","fieldSpecs","cmp","compareByFieldSpec","fieldSpec","flexibleCompare","b","String","localeCompare","capitaliseFirstLetter","str","toUpperCase","padStart","len","applyAll","functions","thisObj","args","ret","firstDefined","_i","arguments","undefined","debounce","wait","timeout","context","timestamp","result","later","last","setTimeout","refineProps","rawProps","processors","defaults","leftoverProps","refined","key","processor","Function","Number","Boolean","computeAlignedDayRange","timedRange","dayCnt","start","end","computeVisibleDayRange","nextDayThreshold","startDay","endDay","endTimeMS","isMultiDayRange","range","visibleRange","diffDates","date0","date1","dateEnv","largeUnit","diffWholeYears","diffWholeMonths","extendStatics","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","parseRecurring","eventInput","allDayDefault","recurringTypes","leftovers","localLeftovers","parsed","parse","allDay","allDayGuess","duration","typeData","typeId","expandRecurringRanges","eventDef","framingRange","typeDef","recurringDef","markers","expand","subtract","mergeProps","propObjs","complexProps","complexObjs","dest","unshift","filterHash","hash","filtered","mapHash","newHash","arrayToHash","a_1","item","hashValuesToArray","isPropsEqual","parseEvents","rawEvents","sourceId","calendar","allowOpenRange","eventStore","createEmptyEventStore","rawEvents_1","rawEvent","tuple","parseEvent","eventTupleToStore","defs","def","defId","instance","instances","instanceId","expandRecurring","defaultAllDayEventDuration","defaultTimedEventDuration","starts","pluginSystem","hooks","starts_1","createEventInstance","add","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","isEventDefsGrouped","def0","def1","groupId","transformRawEvents","eventSource","calEachTransform","opt","sourceEachTransform","eventDataTransform","transformEachRawEvent","refinedEvents","rawEvents_2","refinedEvent","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","dateRange","invertedRanges","sort","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","constrainMarkerToRange","isArraysEqual","a0","a1","memoize","workerFunc","memoizeOutput","equalityFunc","cachedRes","newRes","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","meridiem","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","weekday","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","format","formatRange","diffSeverity","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialDateProps","computePartialFormattingOptions","partialFormattingFunc","partial0","partial1","insertion","findCommonInsertion","before","after","getLargestUnit","standardDatePropCnt","keys","formatTimeZoneOffset","timeZoneOffset","formatWeekNumber","computeWeekNumber","weekLabel","locale","buildNativeFormattingFunc","sanitizeSettings","timeZone","zeroFormat","normalFormat","Intl","DateTimeFormat","codes","zeroProps","postProcess","replace","injectTzoStr","toLocaleLowerCase","tzoStr","replaced","num","display","parts","simpleNumberFormat","options","isRtl","reverse","join","ca","getMarkerYear","getMarkerMonth","getMarkerDay","biggestUnit","partialOptions","name_2","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","CmdFormatter","cmdStr","cmdFormatter","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","buildIsoString","stripZeroTime","toISOString","formatIsoTimeString","doIso","abs","mins","startInfo","expandZonedMarker","endInfo","localeCodes","dateInfo","markerToArray","array","EventSourceApi","internalEventSource","remove","dispatch","type","refetch","sourceIds","defineProperty","get","publicId","enumerable","configurable","meta","url","EventApi","_calendar","_def","_instance","setProp","_b","DATE_PROPS","NON_DATE_PROPS","mutate","standardProps","UNSCOPED_EVENT_UI_PROPS","ui","backgroundColor","borderColor","startEditable","durationEditable","setExtendedProp","extendedProps","setStart","startInput","instanceRange","startDelta","granularity","maintainDuration","datesDelta","setEnd","endInput","endDelta","hasEnd","setDates","moveStart","deltaInput","delta","moveEnd","moveDates","setAllDay","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","mutation","fromApi","state","eventSources","toDate","title","rendering","constraints","overlap","allows","textColor","classNames","sliceEventStore","eventUiBases","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","isStart","isEnd","invertedRanges_1","invertedRange","invertedRanges_2","bg","fg","hasBgRendering","filterSegsViaEls","segs","isMirror","view","hasPublicHandlers","filter","seg","custom","publiclyTrigger","event","eventRange","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","triggerRenderedSegs","isMirrors","segs_2","publiclyTriggerAfterSizing","loadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_3","trigger","segs_4","computeEventDraggable","eventUi","transformers","isDraggableTransformers","transformers_1","transformer","computeEventStartResizable","eventResizableFromStart","computeEventEndResizable","applyMutationToEventStore","eventConfigBase","eventConfigs","applyMutationToEventDef","eventDefMutationAppliers","applyMutationToEventInstance","eventConfig","appliers","copy","appliers_1","applier","eventInstance","forceAllDay","clearEnd","getDefaultEventEnd","reduceEventStore","action","dateProfile","receiveRawEvents","fetchId","fetchRange","addEvent","activeRange","rezoneDates","oldDateEnv","applyMutationToRelated","excludeInstances","excludeEventsBySourceId","latestFetchId","subset","expandRange","newDateEnv","canComputeOffset","relevant","removals","isInteractionValid","interaction","isNewPropsValid","eventDrag","isDateSelectionValid","dateSelection","newProps","businessHours","eventSelection","eventResize","isPropsValid","dateSpanMeta","filterConfig","isInteractionPropsValid","isDateSelectionPropsValid","subjectEventStore","mutatedEvents","subjectDefs","subjectInstances","subjectConfigs","isEvent","selectionConfig","otherEventStore","affectedEvents","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","otherOverlap","calendarEventStore","subjectAllow","subjectDateSpan","origDef","origInstance","eventApi","buildDateSpanApi","relevantEventStore","relevantDefs","relevantInstances","selection","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","businessHoursUnexpanded","constraints_1","constraint","anyRangesContainRange","constraintToRanges","eventStoreToRanges","outerRanges","outerRanges_1","normalizeConstraint","htmlEscape","cssToStr","cssProps","statements","attrsToStr","parseClassName","raw","editable","allow","color","processUnscopedUiProps","processScopedUiProps","prefix","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","id","uid","computeIsAllDayDefault","leftovers0","recurringRes","parseEventDef","leftovers1","singleRes","parseSingle","pluckNonDateProps","eventDefParsers","eventDefParser","newLeftovers","freeze","startMeta","endMeta","pluckDateProps","startMarker","endMarker","createMarkerMeta","isTimeUnspecified","preLeftovers","source","DEF_DEFAULTS","startTime","endTime","daysOfWeek","parseBusinessHours","refineInputs","rawDefs","rawDef","memoizeRendering","renderFunc","unrenderFunc","dependencies","thisContext","prevArgs","dependents","unrender","dependents_1","dependent","dependencies_1","dependency","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","_this","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","info","buildEventUiForKey","keyInfo","buildEventUi","dateSpan","dateSpans","getKeysForDateSpan","keys_1","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","origSeg","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","allOptions","gotoOptions","innerHtml","forceOff","finalOptions","formatIso","omitTime","navLinks","JSON","stringify","getAllDayHtml","allDayHtml","allDayText","getDayClasses","noThemeHighlight","todayStart","todayEnd","theme","classes","monthMode","currentRange","getNow","getClass","unpromisify","success","failure","isResolved","wrappedSuccess","wrappedFailure","then","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","EmitterMixin","_super","on","addToHash","_handlers","one","_oneHandlers","off","removeFromHash","triggerWith","hasHandlers","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","getMaxScrollTop","getScrollHeight","getClientHeight","getMaxScrollLeft","getScrollWidth","getClientWidth","canScrollVertically","canScrollHorizontally","canScrollUp","getScrollTop","canScrollDown","canScrollLeft","getScrollLeft","canScrollRight","ElementScrollController","scrollTop","scrollLeft","setScrollTop","setScrollLeft","scrollWidth","scrollHeight","ScrollComponent","WindowScrollController","scroll","applyOverflow","clear","setHeight","destroy","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","ComponentContext","dir","eventOrderSpecs","eventOrder","extend","Component","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","oldContext","firstContext","recycleProps","anyChanges","comboProps","beforeUpdate","render","afterUpdate","oldProps","DateComponent","buildPositionCaches","queryHit","positionLeft","positionTop","elWidth","elHeight","validRange","isValidSegDownEl","isPopover","isInPopover","isValidDateDownEl","segEl","fgSegSelector","classList","bgSegSelector","uid$1","createPlugin","deps","reducers","eventDragMutationMassagers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","namedTimeZonedImpl","defaultView","elementDraggingImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","combineHooks","hooks0","hooks1","eventSourceDef","ignoreRange","parseMeta","events","fetch","arg","ArrayEventSourcePlugin","eventSourceDef$1","bind","startStr","endStr","FuncEventSourcePlugin","requestJson","method","params","successCallback","failureCallback","injectQueryStringParams","encodeParams","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","eventSourceDef$2","extraParams","startParam","endParam","timeZoneParam","requestParams","buildRequestParams","errorMessage","message","JsonFeedEventSourcePlugin","customRequestParams","recurring","startRecur","endRecur","anyValid","clippedFramingRange","expandRanges","SimpleRecurrencePlugin","dowHash","dayMarker","instanceStarts","instanceStart","DefaultOptionChangeHandlers","deepEqual","handleEventSources","plugins","handlePlugins","inputs","unfoundSources","newInputs","inputs_1","inputFound","_raw","splice","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","addPluginInputs","globalDefaults","defaultRangeSeparator","titleRangeSeparator","forceEventDuration","columnHeader","aspectRatio","header","center","weekends","weekNumbers","weekNumberCalculation","scrollTime","minTime","maxTime","showNonCurrentDates","lazyFetching","locales","timeGridEventMinHeight","themeSystem","dragRevertDuration","dragScroll","allDayMaintainDuration","unselectAuto","dropAccept","eventLimit","eventLimitClick","dayPopoverFormat","handleWindowResize","windowResizeDelay","longPressDelay","eventDragMinDistance","rtlDefaults","buttonIcons","prev","next","prevYear","nextYear","complexOptions","mergeOptions","optionObjs","INTERNAL_PLUGINS","refinePluginDefs","pluginInputs","pluginInputs_1","pluginInput","globalName","default","console","warn","RAW_EN_LOCALE","code","buttonText","today","list","eventLimitText","noEventsMessage","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","queryLocale","parseLocale","codeArg","queryRawLocale","simpleId","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","updates","isDynamic","overrideHash","removals_1","localeDefaults","dirDefaults","calendarSystemClassMap","registerCalendarSystem","theClass","createCalendarSystem","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","settings","isNamedTimeZone","namedTimeZoneImpl","weekDow","weekDoy","firstDay","weekNumberFunc","createNowMarker","timestampToMarker","getYear","addYears","addMonths","greatestWholeUnit","countDurationsBetween","startOf","startOfYear","startOfMonth","startOfWeek","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","addSources","sources","removeSource","fetchDirtySources","fetchSourcesByIds","excludeStaticSources","receiveResponse","uid$3","eventSourceHash","sources_1","sourceHash","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccessRes","sourceSuccessRes","calSuccess","error","callFailure","DateProfileGenerator","viewSpec","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","dateIncrement","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","renderRange","isValid","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","dayCount","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","class","usesMinMaxTime","dateIncrementInput","dateIncrementDuration","alignment","dateAlignment","computeRes","isHiddenDay","skipHiddenDays","customAlignment","runningCount","fallback","otherArgs","hiddenDays","isHiddenDayHash","Error","inc","isExclusive","isDateProfilesEqual","p0","p1","viewType","reduceViewType","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","eventSourceLoadingLevel","computeLoadingLevel","reducerFunc","currentViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","newDate","currentSelection","currentInstanceId","eventInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","span","parseOpenDateSpan","buildDatePointApi","dateStr","fabricateEventRange","compileViewDefs","defaultConfigs","overrideConfigs","ensureViewDef","viewDef","buildViewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","viewSubclass","configs","superProto","getPrototypeOf","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","viewDefs","buildViewSpec","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextKey","buttonTextOverride","buttonTextDefault","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupEl","groupChildren","isOnlyButtons","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","text","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","bool","disabled","CalendarComponent","elClassNames","renderSkeleton","_renderSkeleton","_unrenderSkeleton","renderToolbars","_renderToolbars","_unrenderToolbars","buildComponentContext","buildViewPropTransformers","computeTitle","freezeHeight","renderView","updateSize","thawHeight","footer","updateElClassNames","contentEl","modifyViewContainer","savedScroll","queryScroll","removeElClassNames","headerLayout","footerLayout","dateProfileGenerator","now","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","viewProps","transform","isResize","isHeightAuto","computeHeightVars","viewHeight","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","parentEl","viewOptions","titleFormat","computeTitleFormat","theClasses","Interaction","component","parseInteractionSettings","useEventCenter","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","querySelector","href","jsEvent","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","button","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","listView","close","Calendar","buildComponentContext$1","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginDefs","pluginDefs_1","pluginDef","requestRerender","renderableEventStore","bindHandlers","executeRender","unbindHandlers","removeNavLinkListener","anchorEl","getAttribute","customAction","viewOpt","zoomTo","windowResizeProxy","windowResize","buildInitialState","rawSources","singleRawSource","rawSources_1","rawSource","batchRendering","getInitialDate","oldState","shift","newState","delayedRerender","tryRerender","renderComponent","eventUiSingleBase","eventUiBySource","releaseAfterSizingTriggers","setOption","mutateOptions","getOption","viewOpts","changeHandlers","normalUpdates","specialUpdates","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_3","pluginHooks","rerenderDelay","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_4","isValidViewType","dateOrRange","unselect","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","registerInteractiveComponent","settingsInput","DEFAULT_INTERACTIONS","interactionClasses","interactions","interactionClass","unregisterInteractiveComponent","listener","select","dateOrObj","endDate","selectionInput","triggerDateSelect","pev","triggerDateUnselect","origEvent","triggerDateClick","dayEl","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","scrollToDuration","themeClass","View","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","initialize","isAuto","updateBaseSize","renderDates","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","startNowIndicator","update","delay","nowIndicator","initialNowDate","getNowIndicatorUnit","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearTimeout","clearInterval","isForced","queuedScroll","applyQueuedScroll","applyScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","renderSegs","mirrorInfo","rangeUpdated","renderSegEls","attachSegs","_segs","detachSegs","displayEventTime","displayEventEnd","eventTimeFormat","computeEventTimeFormat","computeDisplayEventTime","computeDisplayEventEnd","renderSegHtml","getSegClasses","isDraggable","isResizable","isDragging","isResizing","getTimeText","displayEnd","_getTimeText","getSkinCss","sortEventSegs","objs","buildSegCompareObj","c","_seg","computeSizes","force","computeSegSizes","assignSizes","assignSegSizes","hideByHash","visibility","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","toLowerCase","NamedTimeZoneImpl","ElementDragging","emitter","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","computeFallbackHeaderFormat","datesRepDistinctDays","renderDateCell","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","columnHeaderHtml","columnHeaderText","DayHeader","dates","renderIntroHtml","columnHeaderFormat","dates_1","thead","DaySeries","indices","dayIndex","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","row","col","buildCell","seriesSeg","index","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","eventRanges","eventRanges_1","sliceEventRange","isComponentAllDay","keyList","hasProp","module","exports","equal","arrA","arrB","dateA","dateB","getTime","regexpA","RegExp","regexpB","toString","_vm","_h","$createElement","_self","staticClass","staticRenderFns","Stars","_v","_s","station","area","price","DescriptionList","_m","calendarPlugins","eventList","eventClick","ref","modalClassName","resetShowModal","DayGridDateProfileGenerator","endOfWeek","fixedWeekCount","Popover","isHidden","margin","documentMousedown","hide","show","autoHide","elDims","origin","offsetParent","clippingRect","SimpleDayGridEventRenderer","timeText","titleHtml","isResizableFromStart","isResizableFromEnd","skinCss","timeHtml","DayGridEventRenderer","dayGrid","rowStructs","renderSegRows","rowEls","rowNode","tbodyEl","removeSegPopover","rowStruct","pop","segRows","groupSegRows","renderSegRow","rowSegs","levelSegs","tr","td","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","emptyCellsUntil","endCol","leftCol","rightCol","introHtml","renderProps","levels","isDaySegCollision","level","compareDaySegCols","otherSegs","otherSeg","DayGridMirrorRenderer","skeletonTopEl","skeletonTop","skeletonEl","EMPTY_CELL_HTML","DayGridFillRenderer","renderFillRow","trEl","startCol","getElementsByTagName","DayTile","eventRenderer","renderFrame","_renderFrame","renderFgEvents","fgSegs","eventDragInstances","eventResizeInstances","segContainerEl","layer","DayTileEventRenderer","dayTile","DayBgRow","renderHtml","cell","renderCellHtml","htmlAttrs","DAY_NUM_FORMAT","WEEK_NUM_FORMAT","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","renderDayRowHtml","cellEls","rowPositions","colPositions","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","weekCalcFirstDow","isDayNumberVisible","buildColPositions","buildRowPositions","positionToHit","relativeRect","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowBottom","trEls","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","moreNodes","getCellSegs","renderMoreLink","node","moreEls","limitedEls","limitedEl","hiddenSegs","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","showSegPopover","topEl","dayDate","dayEnd","dayRange","newSegs","startLevel","WEEK_NUM_FORMAT$1","AbstractDayGridView","processOptions","_processOptions","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","renderDayGridBgIntroHtml","renderDayGridIntroHtml","weekNumbersWithinDays","renderSkeletonHtml","scroller","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","scrollerHeight","headRowEl","computeScrollerHeight","setGridHeight","SimpleDayGrid","slicer","DayGridSlicer","dayTable","rawHit","DayGridView","buildDayTable","simpleDayGrid","main","dayGridDay","dayGridWeek","dayGridMonth","TimeGridEventRenderer","timeGrid","fullTimeFormat","segsByCol","groupSegsByCol","attachSegsByCol","fgContainerEls","computeSegVerticals","computeSegHorizontals","assignSegVerticals","assignSegCss","fullTimeText","startTimeText","unzonedStart","unzonedEnd","level0","buildSlotSegLevels","computeForwardSlotSegs","computeSlotSegPressures","computeSegForwardBack","seriesBackwardPressure","seriesBackwardCoord","forwardSegs","forwardCoord","sortForwardSegs","backwardCoord","buildTimeGridSegCompareObj","generateSegCss","shouldOverlap","slotEventOverlap","generateSegVerticalCss","zIndex","forwardPressure","computeSlotSegCollisions","k","forwardSeg","results","isSlotSegCollision","seg1","seg2","TimeGridMirrorRenderer","mirrorContainerEls","sourceSegProps","TimeGridFillRenderer","bgContainerEls","businessContainerEls","highlightContainerEls","AGENDA_STOCK_SUB_DURATIONS","TimeGrid","isSlatSizesDirty","isColSizesDirty","renderSlats","_renderSlats","renderColumns","_renderColumns","_unrenderColumns","_renderDateSelection","_unrenderDateSelection","snapsPerSlot","slotDuration","snapDuration","slotLabelFormat","labelFormat","slotLabelInterval","labelInterval","computeLabelInterval","slotsPerLabel","buildSlatPositions","rootBgContainerEl","slatContainerEl","bottomRuleEl","renderSlatRowHtml","slatEls","slatPositions","slotDate","isLabeled","axisHtml","slotTime","slotIterator","colEls","renderContentSkeleton","unrenderContentSkeleton","contentSkeletonEl","colContainerEls","computeDateTop","nodes","lineEl","arrowEl","nowIndicatorEls","getTotalSlatHeight","when","startOfDayDate","computeTimeTop","slatIndex","slatRemainder","slatCoverage","eventMinHeight","colIndex","slatTop","slatHeight","partial","localSnapIndex","snapIndex","time","selectMirror","isSelecting","AllDaySplitter","timed","TIMEGRID_ALL_DAY_EVENT_LIMIT","WEEK_HEADER_FORMAT","AbstractTimeGridView","splitter","weekText","axisStyleAttr","renderTimeGridBgIntroHtml","renderTimeGridIntroHtml","timeGridWrapEl","timeGridEl","allDaySlot","dividerEl","axisWidth","noScrollRowEls","SimpleTimeGrid","buildDayRanges","dayRanges","TimeGridSlicer","segRange","TimeGridView","simpleTimeGrid","timeGridDay","timeGridWeek","closeModal","stopPropagation","$event","preventDefault","errors","_l","job","addJob","isAnimating","isSuccess","register","_e","Errors","jobTypes","jobs","modal","$refs","done","Modal","components","FormItem","CheckBox","Button","showModal","FullCalendar","image","stars","half","review","Review","Detail","_typeof","Symbol","iterator","deepCopy","output","PROP_DEFS","bootstrapFontAwesome","contentHeight","listDayFormat","listDayAltFormat","defaultDate","navLinkDayClick","navLinkWeekClick","selectable","unselectCancel","selectConstraint","selectOverlap","selectAllow","eventStartEditable","eventDurationEditable","eventConstraint","eventOverlap","eventAllow","eventClassName","eventClassNames","eventBackgroundColor","eventBorderColor","eventTextColor","eventColor","eventLongPressDelay","droppable","eventResourceEditable","eventSourceFailure","eventSourceSuccess","progressiveEventRendering","selectLongPressDelay","selectMinDistance","schedulerLicenseKey","resources","resourceLabelText","resourceOrder","filterResourcesWithEvents","resourceText","resourceGroupField","resourceGroupText","resourceAreaWidth","resourceColumns","resourcesInitiallyExpanded","slotWidth","datesAboveResources","googleCalendarApiKey","refetchResourcesOnNavigate","datesRender","datesDestroy","dayRender","eventRender","eventDestroy","viewSkeletonRender","viewSkeletonDestroy","resourceRender","PROP_IS_DEEP","EMISSION_NAMES","EMISSION_USE_PROP","FullCalendarComponent","data","renderId","deepCopies","mounted","warnDeprecatedListeners","$listeners","$options","$el","buildCalendarOptions","renderDirty","beforeDestroy","watch","buildPropWatcher","methods","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","emissionName","_len","_key","$emit","_iterator","propVal","recordDirtyOption","optionName","newVal","dirtyOptions","getApi","propDef","deep","oldVal","listenerHash","GlobalVue","installed","install","Vue","global","use"],"mappings":"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","file":"js/detail.b4bd0a2c.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=714898c6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=714898c6&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Review.vue?vue&type=style&index=0&id=8811e9a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Review.vue?vue&type=style&index=0&id=8811e9a6&lang=scss&scoped=true&\"","/*!\nFullCalendar Core Package v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\n// Creating\n// ----------------------------------------------------------------------------------------------------------------\nvar elementPropHash = {\n    className: true,\n    colSpan: true,\n    rowSpan: true\n};\nvar containerTagHash = {\n    '<tr': 'tbody',\n    '<td': 'tr'\n};\nfunction createElement(tagName, attrs, content) {\n    var el = document.createElement(tagName);\n    if (attrs) {\n        for (var attrName in attrs) {\n            if (attrName === 'style') {\n                applyStyle(el, attrs[attrName]);\n            }\n            else if (elementPropHash[attrName]) {\n                el[attrName] = attrs[attrName];\n            }\n            else {\n                el.setAttribute(attrName, attrs[attrName]);\n            }\n        }\n    }\n    if (typeof content === 'string') {\n        el.innerHTML = content; // shortcut. no need to process HTML in any way\n    }\n    else if (content != null) {\n        appendToElement(el, content);\n    }\n    return el;\n}\nfunction htmlToElement(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.firstChild;\n}\nfunction htmlToElements(html) {\n    return Array.prototype.slice.call(htmlToNodeList(html));\n}\nfunction htmlToNodeList(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.childNodes;\n}\n// assumes html already trimmed and tag names are lowercase\nfunction computeContainerTag(html) {\n    return containerTagHash[html.substr(0, 3) // faster than using regex\n    ] || 'div';\n}\nfunction appendToElement(el, content) {\n    var childNodes = normalizeContent(content);\n    for (var i = 0; i < childNodes.length; i++) {\n        el.appendChild(childNodes[i]);\n    }\n}\nfunction prependToElement(parent, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n    for (var i = 0; i < newEls.length; i++) {\n        parent.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction insertAfterElement(refEl, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = refEl.nextSibling || null;\n    for (var i = 0; i < newEls.length; i++) {\n        refEl.parentNode.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction normalizeContent(content) {\n    var els;\n    if (typeof content === 'string') {\n        els = htmlToElements(content);\n    }\n    else if (content instanceof Node) {\n        els = [content];\n    }\n    else { // Node[] or NodeList\n        els = Array.prototype.slice.call(content);\n    }\n    return els;\n}\nfunction removeElement(el) {\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n}\n// Querying\n// ----------------------------------------------------------------------------------------------------------------\n// from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\nvar matchesMethod = Element.prototype.matches ||\n    Element.prototype.matchesSelector ||\n    Element.prototype.msMatchesSelector;\nvar closestMethod = Element.prototype.closest || function (selector) {\n    // polyfill\n    var el = this;\n    if (!document.documentElement.contains(el)) {\n        return null;\n    }\n    do {\n        if (elementMatches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n};\nfunction elementClosest(el, selector) {\n    return closestMethod.call(el, selector);\n}\nfunction elementMatches(el, selector) {\n    return matchesMethod.call(el, selector);\n}\n// accepts multiple subject els\n// returns a real array. good for methods like forEach\nfunction findElements(container, selector) {\n    var containers = container instanceof HTMLElement ? [container] : container;\n    var allMatches = [];\n    for (var i = 0; i < containers.length; i++) {\n        var matches = containers[i].querySelectorAll(selector);\n        for (var j = 0; j < matches.length; j++) {\n            allMatches.push(matches[j]);\n        }\n    }\n    return allMatches;\n}\n// accepts multiple subject els\n// only queries direct child elements\nfunction findChildren(parent, selector) {\n    var parents = parent instanceof HTMLElement ? [parent] : parent;\n    var allMatches = [];\n    for (var i = 0; i < parents.length; i++) {\n        var childNodes = parents[i].children; // only ever elements\n        for (var j = 0; j < childNodes.length; j++) {\n            var childNode = childNodes[j];\n            if (!selector || elementMatches(childNode, selector)) {\n                allMatches.push(childNode);\n            }\n        }\n    }\n    return allMatches;\n}\n// Attributes\n// ----------------------------------------------------------------------------------------------------------------\nfunction forceClassName(el, className, bool) {\n    if (bool) {\n        el.classList.add(className);\n    }\n    else {\n        el.classList.remove(className);\n    }\n}\n// Style\n// ----------------------------------------------------------------------------------------------------------------\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\nfunction applyStyle(el, props) {\n    for (var propName in props) {\n        applyStyleProp(el, propName, props[propName]);\n    }\n}\nfunction applyStyleProp(el, name, val) {\n    if (val == null) {\n        el.style[name] = '';\n    }\n    else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n        el.style[name] = val + 'px';\n    }\n    else {\n        el.style[name] = val;\n    }\n}\n\nfunction pointInsideRect(point, rect) {\n    return point.left >= rect.left &&\n        point.left < rect.right &&\n        point.top >= rect.top &&\n        point.top < rect.bottom;\n}\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n    var res = {\n        left: Math.max(rect1.left, rect2.left),\n        right: Math.min(rect1.right, rect2.right),\n        top: Math.max(rect1.top, rect2.top),\n        bottom: Math.min(rect1.bottom, rect2.bottom)\n    };\n    if (res.left < res.right && res.top < res.bottom) {\n        return res;\n    }\n    return false;\n}\nfunction translateRect(rect, deltaX, deltaY) {\n    return {\n        left: rect.left + deltaX,\n        right: rect.right + deltaX,\n        top: rect.top + deltaY,\n        bottom: rect.bottom + deltaY\n    };\n}\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n    return {\n        left: Math.min(Math.max(point.left, rect.left), rect.right),\n        top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n    };\n}\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n    return {\n        left: (rect.left + rect.right) / 2,\n        top: (rect.top + rect.bottom) / 2\n    };\n}\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n    return {\n        left: point1.left - point2.left,\n        top: point1.top - point2.top\n    };\n}\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\nvar isRtlScrollbarOnLeft = null;\nfunction getIsRtlScrollbarOnLeft() {\n    if (isRtlScrollbarOnLeft === null) {\n        isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n    }\n    return isRtlScrollbarOnLeft;\n}\nfunction computeIsRtlScrollbarOnLeft() {\n    var outerEl = createElement('div', {\n        style: {\n            position: 'absolute',\n            top: -1000,\n            left: 0,\n            border: 0,\n            padding: 0,\n            overflow: 'scroll',\n            direction: 'rtl'\n        }\n    }, '<div></div>');\n    document.body.appendChild(outerEl);\n    var innerEl = outerEl.firstChild;\n    var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n    removeElement(outerEl);\n    return res;\n}\n// The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\nfunction sanitizeScrollbarWidth(width) {\n    width = Math.max(0, width); // no negatives\n    width = Math.round(width);\n    return width;\n}\n\nfunction computeEdges(el, getPadding) {\n    if (getPadding === void 0) { getPadding = false; }\n    var computedStyle = window.getComputedStyle(el);\n    var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n    var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n    var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n    var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n    // must use offset(Width|Height) because compatible with client(Width|Height)\n    var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n    var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n    var res = {\n        borderLeft: borderLeft,\n        borderRight: borderRight,\n        borderTop: borderTop,\n        borderBottom: borderBottom,\n        scrollbarBottom: scrollbarBottom,\n        scrollbarLeft: 0,\n        scrollbarRight: 0\n    };\n    if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n        res.scrollbarLeft = scrollbarLeftRight;\n    }\n    else {\n        res.scrollbarRight = scrollbarLeftRight;\n    }\n    if (getPadding) {\n        res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n        res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n        res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n        res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n    }\n    return res;\n}\nfunction computeInnerRect(el, goWithinPadding) {\n    if (goWithinPadding === void 0) { goWithinPadding = false; }\n    var outerRect = computeRect(el);\n    var edges = computeEdges(el, goWithinPadding);\n    var res = {\n        left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n        right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n        top: outerRect.top + edges.borderTop,\n        bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n    };\n    if (goWithinPadding) {\n        res.left += edges.paddingLeft;\n        res.right -= edges.paddingRight;\n        res.top += edges.paddingTop;\n        res.bottom -= edges.paddingBottom;\n    }\n    return res;\n}\nfunction computeRect(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        right: rect.right + window.pageXOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n}\nfunction computeViewportRect() {\n    return {\n        left: window.pageXOffset,\n        right: window.pageXOffset + document.documentElement.clientWidth,\n        top: window.pageYOffset,\n        bottom: window.pageYOffset + document.documentElement.clientHeight\n    };\n}\nfunction computeHeightAndMargins(el) {\n    return el.getBoundingClientRect().height + computeVMargins(el);\n}\nfunction computeVMargins(el) {\n    var computed = window.getComputedStyle(el);\n    return parseInt(computed.marginTop, 10) +\n        parseInt(computed.marginBottom, 10);\n}\n// does not return window\nfunction getClippingParents(el) {\n    var parents = [];\n    while (el instanceof HTMLElement) { // will stop when gets to document or null\n        var computedStyle = window.getComputedStyle(el);\n        if (computedStyle.position === 'fixed') {\n            break;\n        }\n        if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n            parents.push(el);\n        }\n        el = el.parentNode;\n    }\n    return parents;\n}\nfunction computeClippingRect(el) {\n    return getClippingParents(el)\n        .map(function (el) {\n        return computeInnerRect(el);\n    })\n        .concat(computeViewportRect())\n        .reduce(function (rect0, rect1) {\n        return intersectRects(rect0, rect1) || rect1; // should always intersect\n    });\n}\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n    ev.preventDefault();\n}\n// Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\nfunction listenBySelector(container, eventType, selector, handler) {\n    function realHandler(ev) {\n        var matchedChild = elementClosest(ev.target, selector);\n        if (matchedChild) {\n            handler.call(matchedChild, ev, matchedChild);\n        }\n    }\n    container.addEventListener(eventType, realHandler);\n    return function () {\n        container.removeEventListener(eventType, realHandler);\n    };\n}\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n    var currentMatchedChild;\n    return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n        if (matchedChild !== currentMatchedChild) {\n            currentMatchedChild = matchedChild;\n            onMouseEnter(ev, matchedChild);\n            var realOnMouseLeave_1 = function (ev) {\n                currentMatchedChild = null;\n                onMouseLeave(ev, matchedChild);\n                matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n            };\n            // listen to the next mouseleave, and then unattach\n            matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n        }\n    });\n}\n// Animation\n// ----------------------------------------------------------------------------------------------------------------\nvar transitionEventNames = [\n    'webkitTransitionEnd',\n    'otransitionend',\n    'oTransitionEnd',\n    'msTransitionEnd',\n    'transitionend'\n];\n// triggered only when the next single subsequent transition finishes\nfunction whenTransitionDone(el, callback) {\n    var realCallback = function (ev) {\n        callback(ev);\n        transitionEventNames.forEach(function (eventName) {\n            el.removeEventListener(eventName, realCallback);\n        });\n    };\n    transitionEventNames.forEach(function (eventName) {\n        el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n    });\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n// Adding\nfunction addWeeks(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n * 7;\n    return arrayToUtcDate(a);\n}\nfunction addDays(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n;\n    return arrayToUtcDate(a);\n}\nfunction addMs(m, n) {\n    var a = dateToUtcArray(m);\n    a[6] += n;\n    return arrayToUtcDate(a);\n}\n// Diffing (all return floats)\nfunction diffWeeks(m0, m1) {\n    return diffDays(m0, m1) / 7;\n}\nfunction diffDays(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\nfunction diffHours(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\nfunction diffMinutes(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\nfunction diffSeconds(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / 1000;\n}\nfunction diffDayAndTime(m0, m1) {\n    var m0day = startOfDay(m0);\n    var m1day = startOfDay(m1);\n    return {\n        years: 0,\n        months: 0,\n        days: Math.round(diffDays(m0day, m1day)),\n        milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf())\n    };\n}\n// Diffing Whole Units\nfunction diffWholeWeeks(m0, m1) {\n    var d = diffWholeDays(m0, m1);\n    if (d !== null && d % 7 === 0) {\n        return d / 7;\n    }\n    return null;\n}\nfunction diffWholeDays(m0, m1) {\n    if (timeAsMs(m0) === timeAsMs(m1)) {\n        return Math.round(diffDays(m0, m1));\n    }\n    return null;\n}\n// Start-Of\nfunction startOfDay(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate()\n    ]);\n}\nfunction startOfHour(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours()\n    ]);\n}\nfunction startOfMinute(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes()\n    ]);\n}\nfunction startOfSecond(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n        m.getUTCSeconds()\n    ]);\n}\n// Week Computation\nfunction weekOfYear(marker, dow, doy) {\n    var y = marker.getUTCFullYear();\n    var w = weekOfGivenYear(marker, y, dow, doy);\n    if (w < 1) {\n        return weekOfGivenYear(marker, y - 1, dow, doy);\n    }\n    var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n    if (nextW >= 1) {\n        return Math.min(w, nextW);\n    }\n    return w;\n}\nfunction weekOfGivenYear(marker, year, dow, doy) {\n    var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n    var dayStart = startOfDay(marker);\n    var days = Math.round(diffDays(firstWeekStart, dayStart));\n    return Math.floor(days / 7) + 1; // zero-indexed\n}\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n    var fwd = 7 + dow - doy;\n    // first-week day local weekday -- which local weekday is fwd\n    var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n    return -fwdlw + fwd - 1;\n}\n// Array Conversion\nfunction dateToLocalArray(date) {\n    return [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    ];\n}\nfunction arrayToLocalDate(a) {\n    return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n    a[3] || 0, a[4] || 0, a[5] || 0);\n}\nfunction dateToUtcArray(date) {\n    return [\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds(),\n        date.getUTCMilliseconds()\n    ];\n}\nfunction arrayToUtcDate(a) {\n    // according to web standards (and Safari), a month index is required.\n    // massage if only given a year.\n    if (a.length === 1) {\n        a = a.concat([0]);\n    }\n    return new Date(Date.UTC.apply(Date, a));\n}\n// Other Utils\nfunction isValidDate(m) {\n    return !isNaN(m.valueOf());\n}\nfunction timeAsMs(m) {\n    return m.getUTCHours() * 1000 * 60 * 60 +\n        m.getUTCMinutes() * 1000 * 60 +\n        m.getUTCSeconds() * 1000 +\n        m.getUTCMilliseconds();\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n// Parsing and Creation\nfunction createDuration(input, unit) {\n    var _a;\n    if (typeof input === 'string') {\n        return parseString(input);\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return normalizeObject(input);\n    }\n    else if (typeof input === 'number') {\n        return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n    }\n    else {\n        return null;\n    }\n}\nfunction parseString(s) {\n    var m = PARSE_RE.exec(s);\n    if (m) {\n        var sign = m[1] ? -1 : 1;\n        return {\n            years: 0,\n            months: 0,\n            days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n            milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                (m[6] ? parseInt(m[6], 10) : 0) // ms\n            )\n        };\n    }\n    return null;\n}\nfunction normalizeObject(obj) {\n    return {\n        years: obj.years || obj.year || 0,\n        months: obj.months || obj.month || 0,\n        days: (obj.days || obj.day || 0) +\n            getWeeksFromInput(obj) * 7,\n        milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n            (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n            (obj.seconds || obj.second || 0) * 1000 + // seconds\n            (obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n    };\n}\nfunction getWeeksFromInput(obj) {\n    return obj.weeks || obj.week || 0;\n}\n// Equality\nfunction durationsEqual(d0, d1) {\n    return d0.years === d1.years &&\n        d0.months === d1.months &&\n        d0.days === d1.days &&\n        d0.milliseconds === d1.milliseconds;\n}\nfunction isSingleDay(dur) {\n    return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n}\n// Simple Math\nfunction addDurations(d0, d1) {\n    return {\n        years: d0.years + d1.years,\n        months: d0.months + d1.months,\n        days: d0.days + d1.days,\n        milliseconds: d0.milliseconds + d1.milliseconds\n    };\n}\nfunction subtractDurations(d1, d0) {\n    return {\n        years: d1.years - d0.years,\n        months: d1.months - d0.months,\n        days: d1.days - d0.days,\n        milliseconds: d1.milliseconds - d0.milliseconds\n    };\n}\nfunction multiplyDuration(d, n) {\n    return {\n        years: d.years * n,\n        months: d.months * n,\n        days: d.days * n,\n        milliseconds: d.milliseconds * n\n    };\n}\n// Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\nfunction asRoughYears(dur) {\n    return asRoughDays(dur) / 365;\n}\nfunction asRoughMonths(dur) {\n    return asRoughDays(dur) / 30;\n}\nfunction asRoughDays(dur) {\n    return asRoughMs(dur) / 864e5;\n}\nfunction asRoughMinutes(dur) {\n    return asRoughMs(dur) / (1000 * 60);\n}\nfunction asRoughSeconds(dur) {\n    return asRoughMs(dur) / 1000;\n}\nfunction asRoughMs(dur) {\n    return dur.years * (365 * 864e5) +\n        dur.months * (30 * 864e5) +\n        dur.days * 864e5 +\n        dur.milliseconds;\n}\n// Advanced Math\nfunction wholeDivideDurations(numerator, denominator) {\n    var res = null;\n    for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n        var unit = INTERNAL_UNITS[i];\n        if (denominator[unit]) {\n            var localRes = numerator[unit] / denominator[unit];\n            if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                return null;\n            }\n            res = localRes;\n        }\n        else if (numerator[unit]) {\n            // needs to divide by something but can't!\n            return null;\n        }\n    }\n    return res;\n}\nfunction greatestDurationDenominator(dur, dontReturnWeeks) {\n    var ms = dur.milliseconds;\n    if (ms) {\n        if (ms % 1000 !== 0) {\n            return { unit: 'millisecond', value: ms };\n        }\n        if (ms % (1000 * 60) !== 0) {\n            return { unit: 'second', value: ms / 1000 };\n        }\n        if (ms % (1000 * 60 * 60) !== 0) {\n            return { unit: 'minute', value: ms / (1000 * 60) };\n        }\n        if (ms) {\n            return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n        }\n    }\n    if (dur.days) {\n        if (!dontReturnWeeks && dur.days % 7 === 0) {\n            return { unit: 'week', value: dur.days / 7 };\n        }\n        return { unit: 'day', value: dur.days };\n    }\n    if (dur.months) {\n        return { unit: 'month', value: dur.months };\n    }\n    if (dur.years) {\n        return { unit: 'year', value: dur.years };\n    }\n    return { unit: 'millisecond', value: 0 };\n}\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEl, scrollbarWidths) {\n    if (scrollbarWidths.left) {\n        applyStyle(rowEl, {\n            borderLeftWidth: 1,\n            marginLeft: scrollbarWidths.left - 1\n        });\n    }\n    if (scrollbarWidths.right) {\n        applyStyle(rowEl, {\n            borderRightWidth: 1,\n            marginRight: scrollbarWidths.right - 1\n        });\n    }\n}\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEl) {\n    applyStyle(rowEl, {\n        marginLeft: '',\n        marginRight: '',\n        borderLeftWidth: '',\n        borderRightWidth: ''\n    });\n}\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n    document.body.classList.add('fc-not-allowed');\n}\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n    document.body.classList.remove('fc-not-allowed');\n}\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n    // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n    // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n    var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n    var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n    var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n    var flexOffsets = []; // amount of vertical space it takes up\n    var flexHeights = []; // actual css height\n    var usedHeight = 0;\n    undistributeHeight(els); // give all elements their natural height\n    // find elements that are below the recommended height (expandable).\n    // important to query for heights in a single first pass (to avoid reflow oscillation).\n    els.forEach(function (el, i) {\n        var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n        var naturalHeight = el.getBoundingClientRect().height;\n        var naturalOffset = naturalHeight + computeVMargins(el);\n        if (naturalOffset < minOffset) {\n            flexEls.push(el);\n            flexOffsets.push(naturalOffset);\n            flexHeights.push(naturalHeight);\n        }\n        else {\n            // this element stretches past recommended height (non-expandable). mark the space as occupied.\n            usedHeight += naturalOffset;\n        }\n    });\n    // readjust the recommended height to only consider the height available to non-maxed-out rows.\n    if (shouldRedistribute) {\n        availableHeight -= usedHeight;\n        minOffset1 = Math.floor(availableHeight / flexEls.length);\n        minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n    }\n    // assign heights to all expandable elements\n    flexEls.forEach(function (el, i) {\n        var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n        var naturalOffset = flexOffsets[i];\n        var naturalHeight = flexHeights[i];\n        var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n        if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n            el.style.height = newHeight + 'px';\n        }\n    });\n}\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n    els.forEach(function (el) {\n        el.style.height = '';\n    });\n}\n// Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n    var maxInnerWidth = 0;\n    els.forEach(function (el) {\n        var innerEl = el.firstChild; // hopefully an element\n        if (innerEl instanceof HTMLElement) {\n            var innerWidth_1 = innerEl.getBoundingClientRect().width;\n            if (innerWidth_1 > maxInnerWidth) {\n                maxInnerWidth = innerWidth_1;\n            }\n        }\n    });\n    maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n    els.forEach(function (el) {\n        el.style.width = maxInnerWidth + 'px';\n    });\n    return maxInnerWidth;\n}\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n    // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n    var reflowStyleProps = {\n        position: 'relative',\n        left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n    };\n    applyStyle(outerEl, reflowStyleProps);\n    applyStyle(innerEl, reflowStyleProps);\n    var diff = // grab the dimensions\n     outerEl.getBoundingClientRect().height -\n        innerEl.getBoundingClientRect().height;\n    // undo hack\n    var resetStyleProps = { position: '', left: '' };\n    applyStyle(outerEl, resetStyleProps);\n    applyStyle(innerEl, resetStyleProps);\n    return diff;\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventSelection(el) {\n    el.classList.add('fc-unselectable');\n    el.addEventListener('selectstart', preventDefault);\n}\nfunction allowSelection(el) {\n    el.classList.remove('fc-unselectable');\n    el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventContextMenu(el) {\n    el.addEventListener('contextmenu', preventDefault);\n}\nfunction allowContextMenu(el) {\n    el.removeEventListener('contextmenu', preventDefault);\n}\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\nfunction parseFieldSpecs(input) {\n    var specs = [];\n    var tokens = [];\n    var i;\n    var token;\n    if (typeof input === 'string') {\n        tokens = input.split(/\\s*,\\s*/);\n    }\n    else if (typeof input === 'function') {\n        tokens = [input];\n    }\n    else if (Array.isArray(input)) {\n        tokens = input;\n    }\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        if (typeof token === 'string') {\n            specs.push(token.charAt(0) === '-' ?\n                { field: token.substring(1), order: -1 } :\n                { field: token, order: 1 });\n        }\n        else if (typeof token === 'function') {\n            specs.push({ func: token });\n        }\n    }\n    return specs;\n}\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n    var i;\n    var cmp;\n    for (i = 0; i < fieldSpecs.length; i++) {\n        cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n        if (cmp) {\n            return cmp;\n        }\n    }\n    return 0;\n}\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n    if (fieldSpec.func) {\n        return fieldSpec.func(obj0, obj1);\n    }\n    return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n        * (fieldSpec.order || 1);\n}\nfunction flexibleCompare(a, b) {\n    if (!a && !b) {\n        return 0;\n    }\n    if (b == null) {\n        return -1;\n    }\n    if (a == null) {\n        return 1;\n    }\n    if (typeof a === 'string' || typeof b === 'string') {\n        return String(a).localeCompare(String(b));\n    }\n    return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction capitaliseFirstLetter(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction padStart(val, len) {\n    var s = String(val);\n    return '000'.substr(0, len - s.length) + s;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction compareNumbers(a, b) {\n    return a - b;\n}\nfunction isInt(n) {\n    return n % 1 === 0;\n}\n/* Weird Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction applyAll(functions, thisObj, args) {\n    if (typeof functions === 'function') { // supplied a single function\n        functions = [functions];\n    }\n    if (functions) {\n        var i = void 0;\n        var ret = void 0;\n        for (i = 0; i < functions.length; i++) {\n            ret = functions[i].apply(thisObj, args) || ret;\n        }\n        return ret;\n    }\n}\nfunction firstDefined() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i++) {\n        if (args[i] !== undefined) {\n            return args[i];\n        }\n    }\n}\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait) {\n    var timeout;\n    var args;\n    var context;\n    var timestamp;\n    var result;\n    var later = function () {\n        var last = new Date().valueOf() - timestamp;\n        if (last < wait) {\n            timeout = setTimeout(later, wait - last);\n        }\n        else {\n            timeout = null;\n            result = func.apply(context, args);\n            context = args = null;\n        }\n    };\n    return function () {\n        context = this;\n        args = arguments;\n        timestamp = new Date().valueOf();\n        if (!timeout) {\n            timeout = setTimeout(later, wait);\n        }\n        return result;\n    };\n}\n// Number and Boolean are only types that defaults or not computed for\n// TODO: write more comments\nfunction refineProps(rawProps, processors, defaults, leftoverProps) {\n    if (defaults === void 0) { defaults = {}; }\n    var refined = {};\n    for (var key in processors) {\n        var processor = processors[key];\n        if (rawProps[key] !== undefined) {\n            // found\n            if (processor === Function) {\n                refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n            }\n            else if (processor) { // a refining function?\n                refined[key] = processor(rawProps[key]);\n            }\n            else {\n                refined[key] = rawProps[key];\n            }\n        }\n        else if (defaults[key] !== undefined) {\n            // there's an explicit default\n            refined[key] = defaults[key];\n        }\n        else {\n            // must compute a default\n            if (processor === String) {\n                refined[key] = ''; // empty string is default for String\n            }\n            else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n                refined[key] = null; // assign null for other non-custom processor funcs\n            }\n            else {\n                refined[key] = processor(null); // run the custom processor func\n            }\n        }\n    }\n    if (leftoverProps) {\n        for (var key in rawProps) {\n            if (processors[key] === undefined) {\n                leftoverProps[key] = rawProps[key];\n            }\n        }\n    }\n    return refined;\n}\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\nfunction computeAlignedDayRange(timedRange) {\n    var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n    var start = startOfDay(timedRange.start);\n    var end = addDays(start, dayCnt);\n    return { start: start, end: end };\n}\n// given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n    if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n    var startDay = null;\n    var endDay = null;\n    if (timedRange.end) {\n        endDay = startOfDay(timedRange.end);\n        var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n        // If the end time is actually inclusively part of the next day and is equal to or\n        // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n        // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n        if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n            endDay = addDays(endDay, 1);\n        }\n    }\n    if (timedRange.start) {\n        startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n        // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n        if (endDay && endDay <= startDay) {\n            endDay = addDays(startDay, 1);\n        }\n    }\n    return { start: startDay, end: endDay };\n}\n// spans from one day into another?\nfunction isMultiDayRange(range) {\n    var visibleRange = computeVisibleDayRange(range);\n    return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n    if (largeUnit === 'year') {\n        return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n    }\n    else if (largeUnit === 'month') {\n        return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n    }\n    else {\n        return diffDayAndTime(date0, date1); // returns a duration\n    }\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n    for (var i = 0; i < recurringTypes.length; i++) {\n        var localLeftovers = {};\n        var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n        if (parsed) {\n            var allDay = localLeftovers.allDay;\n            delete localLeftovers.allDay; // remove from leftovers\n            if (allDay == null) {\n                allDay = allDayDefault;\n                if (allDay == null) {\n                    allDay = parsed.allDayGuess;\n                    if (allDay == null) {\n                        allDay = false;\n                    }\n                }\n            }\n            __assign(leftovers, localLeftovers);\n            return {\n                allDay: allDay,\n                duration: parsed.duration,\n                typeData: parsed.typeData,\n                typeId: i\n            };\n        }\n    }\n    return null;\n}\n/*\nEvent MUST have a recurringDef\n*/\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n    var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n    var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n        start: dateEnv.subtract(framingRange.start, duration),\n        end: framingRange.end\n    }, dateEnv);\n    // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n    if (eventDef.allDay) {\n        markers = markers.map(startOfDay);\n    }\n    return markers;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n    var dest = {};\n    var i;\n    var name;\n    var complexObjs;\n    var j;\n    var val;\n    var props;\n    if (complexProps) {\n        for (i = 0; i < complexProps.length; i++) {\n            name = complexProps[i];\n            complexObjs = [];\n            // collect the trailing object values, stopping when a non-object is discovered\n            for (j = propObjs.length - 1; j >= 0; j--) {\n                val = propObjs[j][name];\n                if (typeof val === 'object' && val) { // non-null object\n                    complexObjs.unshift(val);\n                }\n                else if (val !== undefined) {\n                    dest[name] = val; // if there were no objects, this value will be used\n                    break;\n                }\n            }\n            // if the trailing values were objects, use the merged value\n            if (complexObjs.length) {\n                dest[name] = mergeProps(complexObjs);\n            }\n        }\n    }\n    // copy values into the destination, going from last to first\n    for (i = propObjs.length - 1; i >= 0; i--) {\n        props = propObjs[i];\n        for (name in props) {\n            if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n                dest[name] = props[name];\n            }\n        }\n    }\n    return dest;\n}\nfunction filterHash(hash, func) {\n    var filtered = {};\n    for (var key in hash) {\n        if (func(hash[key], key)) {\n            filtered[key] = hash[key];\n        }\n    }\n    return filtered;\n}\nfunction mapHash(hash, func) {\n    var newHash = {};\n    for (var key in hash) {\n        newHash[key] = func(hash[key], key);\n    }\n    return newHash;\n}\nfunction arrayToHash(a) {\n    var hash = {};\n    for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n        var item = a_1[_i];\n        hash[item] = true;\n    }\n    return hash;\n}\nfunction hashValuesToArray(obj) {\n    var a = [];\n    for (var key in obj) {\n        a.push(obj[key]);\n    }\n    return a;\n}\nfunction isPropsEqual(obj0, obj1) {\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                return false;\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n    var eventStore = createEmptyEventStore();\n    for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n        var rawEvent = rawEvents_1[_i];\n        var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n        if (tuple) {\n            eventTupleToStore(tuple, eventStore);\n        }\n    }\n    return eventStore;\n}\nfunction eventTupleToStore(tuple, eventStore) {\n    if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n    eventStore.defs[tuple.def.defId] = tuple.def;\n    if (tuple.instance) {\n        eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n    }\n    return eventStore;\n}\nfunction expandRecurring(eventStore, framingRange, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var defs = eventStore.defs, instances = eventStore.instances;\n    // remove existing recurring instances\n    instances = filterHash(instances, function (instance) {\n        return !defs[instance.defId].recurringDef;\n    });\n    for (var defId in defs) {\n        var def = defs[defId];\n        if (def.recurringDef) {\n            var duration = def.recurringDef.duration;\n            if (!duration) {\n                duration = def.allDay ?\n                    calendar.defaultAllDayEventDuration :\n                    calendar.defaultTimedEventDuration;\n            }\n            var starts = expandRecurringRanges(def, duration, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n            for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                var start = starts_1[_i];\n                var instance = createEventInstance(defId, {\n                    start: start,\n                    end: dateEnv.add(start, duration)\n                });\n                instances[instance.instanceId] = instance;\n            }\n        }\n    }\n    return { defs: defs, instances: instances };\n}\n// retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\nfunction getRelevantEvents(eventStore, instanceId) {\n    var instance = eventStore.instances[instanceId];\n    if (instance) {\n        var def_1 = eventStore.defs[instance.defId];\n        // get events/instances with same group\n        var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n            return isEventDefsGrouped(def_1, lookDef);\n        });\n        // add the original\n        // TODO: wish we could use eventTupleToStore or something like it\n        newStore.defs[def_1.defId] = def_1;\n        newStore.instances[instance.instanceId] = instance;\n        return newStore;\n    }\n    return createEmptyEventStore();\n}\nfunction isEventDefsGrouped(def0, def1) {\n    return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\nfunction transformRawEvents(rawEvents, eventSource, calendar) {\n    var calEachTransform = calendar.opt('eventDataTransform');\n    var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n    if (sourceEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n    }\n    if (calEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n    }\n    return rawEvents;\n}\nfunction transformEachRawEvent(rawEvents, func) {\n    var refinedEvents;\n    if (!func) {\n        refinedEvents = rawEvents;\n    }\n    else {\n        refinedEvents = [];\n        for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n            var rawEvent = rawEvents_2[_i];\n            var refinedEvent = func(rawEvent);\n            if (refinedEvent) {\n                refinedEvents.push(refinedEvent);\n            }\n            else if (refinedEvent == null) {\n                refinedEvents.push(rawEvent);\n            } // if a different falsy value, do nothing\n        }\n    }\n    return refinedEvents;\n}\nfunction createEmptyEventStore() {\n    return { defs: {}, instances: {} };\n}\nfunction mergeEventStores(store0, store1) {\n    return {\n        defs: __assign({}, store0.defs, store1.defs),\n        instances: __assign({}, store0.instances, store1.instances)\n    };\n}\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n    var defs = filterHash(eventStore.defs, filterFunc);\n    var instances = filterHash(eventStore.instances, function (instance) {\n        return defs[instance.defId]; // still exists?\n    });\n    return { defs: defs, instances: instances };\n}\n\nfunction parseRange(input, dateEnv) {\n    var start = null;\n    var end = null;\n    if (input.start) {\n        start = dateEnv.createMarker(input.start);\n    }\n    if (input.end) {\n        end = dateEnv.createMarker(input.end);\n    }\n    if (!start && !end) {\n        return null;\n    }\n    if (start && end && end < start) {\n        return null;\n    }\n    return { start: start, end: end };\n}\n// SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\nfunction invertRanges(ranges, constraintRange) {\n    var invertedRanges = [];\n    var start = constraintRange.start; // the end of the previous range. the start of the new range\n    var i;\n    var dateRange;\n    // ranges need to be in order. required for our date-walking algorithm\n    ranges.sort(compareRanges);\n    for (i = 0; i < ranges.length; i++) {\n        dateRange = ranges[i];\n        // add the span of time before the event (if there is any)\n        if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: dateRange.start });\n        }\n        if (dateRange.end > start) {\n            start = dateRange.end;\n        }\n    }\n    // add the span of time after the last event (if there is any)\n    if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n        invertedRanges.push({ start: start, end: constraintRange.end });\n    }\n    return invertedRanges;\n}\nfunction compareRanges(range0, range1) {\n    return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\nfunction intersectRanges(range0, range1) {\n    var start = range0.start;\n    var end = range0.end;\n    var newRange = null;\n    if (range1.start !== null) {\n        if (start === null) {\n            start = range1.start;\n        }\n        else {\n            start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n        }\n    }\n    if (range1.end != null) {\n        if (end === null) {\n            end = range1.end;\n        }\n        else {\n            end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n        }\n    }\n    if (start === null || end === null || start < end) {\n        newRange = { start: start, end: end };\n    }\n    return newRange;\n}\nfunction rangesEqual(range0, range1) {\n    return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n        (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\nfunction rangesIntersect(range0, range1) {\n    return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n        (range0.start === null || range1.end === null || range0.start < range1.end);\n}\nfunction rangeContainsRange(outerRange, innerRange) {\n    return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n        (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n}\nfunction rangeContainsMarker(range, date) {\n    return (range.start === null || date >= range.start) &&\n        (range.end === null || date < range.end);\n}\n// If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\nfunction constrainMarkerToRange(date, range) {\n    if (range.start != null && date < range.start) {\n        return range.start;\n    }\n    if (range.end != null && date >= range.end) {\n        return new Date(range.end.valueOf() - 1);\n    }\n    return date;\n}\n\nfunction removeExact(array, exactVal) {\n    var removeCnt = 0;\n    var i = 0;\n    while (i < array.length) {\n        if (array[i] === exactVal) {\n            array.splice(i, 1);\n            removeCnt++;\n        }\n        else {\n            i++;\n        }\n    }\n    return removeCnt;\n}\nfunction isArraysEqual(a0, a1) {\n    var len = a0.length;\n    var i;\n    if (len !== a1.length) { // not array? or not same length?\n        return false;\n    }\n    for (i = 0; i < len; i++) {\n        if (a0[i] !== a1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoize(workerFunc) {\n    var args;\n    var res;\n    return function () {\n        if (!args || !isArraysEqual(args, arguments)) {\n            args = arguments;\n            res = workerFunc.apply(this, arguments);\n        }\n        return res;\n    };\n}\n/*\nalways executes the workerFunc, but if the result is equal to the previous result,\nreturn the previous result instead.\n*/\nfunction memoizeOutput(workerFunc, equalityFunc) {\n    var cachedRes = null;\n    return function () {\n        var newRes = workerFunc.apply(this, arguments);\n        if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n            cachedRes = newRes;\n        }\n        return cachedRes;\n    };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n    week: 3,\n    separator: 0,\n    omitZeroMinute: 0,\n    meridiem: 0,\n    omitCommas: 0\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n    timeZoneName: 7,\n    era: 6,\n    year: 5,\n    month: 4,\n    day: 2,\n    weekday: 2,\n    hour: 1,\n    minute: 1,\n    second: 1\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\nvar COMMA_RE = /,/g; // we need re for globalness\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\nvar UTC_RE = /UTC|GMT/;\nvar NativeFormatter = /** @class */ (function () {\n    function NativeFormatter(formatSettings) {\n        var standardDateProps = {};\n        var extendedSettings = {};\n        var severity = 0;\n        for (var name_1 in formatSettings) {\n            if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                extendedSettings[name_1] = formatSettings[name_1];\n                severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n            }\n            else {\n                standardDateProps[name_1] = formatSettings[name_1];\n                if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n                    severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                }\n            }\n        }\n        this.standardDateProps = standardDateProps;\n        this.extendedSettings = extendedSettings;\n        this.severity = severity;\n        this.buildFormattingFunc = memoize(buildFormattingFunc);\n    }\n    NativeFormatter.prototype.format = function (date, context) {\n        return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n    };\n    NativeFormatter.prototype.formatRange = function (start, end, context) {\n        var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n        var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n        if (!diffSeverity) {\n            return this.format(start, context);\n        }\n        var biggestUnitForPartial = diffSeverity;\n        if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n            (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n            (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n            (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n            biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n        }\n        var full0 = this.format(start, context);\n        var full1 = this.format(end, context);\n        if (full0 === full1) {\n            return full0;\n        }\n        var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n        var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n        var partial0 = partialFormattingFunc(start);\n        var partial1 = partialFormattingFunc(end);\n        var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n        var separator = extendedSettings.separator || '';\n        if (insertion) {\n            return insertion.before + partial0 + separator + partial1 + insertion.after;\n        }\n        return full0 + separator + full1;\n    };\n    NativeFormatter.prototype.getLargestUnit = function () {\n        switch (this.severity) {\n            case 7:\n            case 6:\n            case 5:\n                return 'year';\n            case 4:\n                return 'month';\n            case 3:\n                return 'week';\n            default:\n                return 'day';\n        }\n    };\n    return NativeFormatter;\n}());\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n    var standardDatePropCnt = Object.keys(standardDateProps).length;\n    if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n        return function (date) {\n            return formatTimeZoneOffset(date.timeZoneOffset);\n        };\n    }\n    if (standardDatePropCnt === 0 && extendedSettings.week) {\n        return function (date) {\n            return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n        };\n    }\n    return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n    standardDateProps = __assign({}, standardDateProps); // copy\n    extendedSettings = __assign({}, extendedSettings); // copy\n    sanitizeSettings(standardDateProps, extendedSettings);\n    standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n    var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n    var zeroFormat; // needed?\n    if (extendedSettings.omitZeroMinute) {\n        var zeroProps = __assign({}, standardDateProps);\n        delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n        zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n    }\n    return function (date) {\n        var marker = date.marker;\n        var format;\n        if (zeroFormat && !marker.getUTCMinutes()) {\n            format = zeroFormat;\n        }\n        else {\n            format = normalFormat;\n        }\n        var s = format.format(marker);\n        return postProcess(s, date, standardDateProps, extendedSettings, context);\n    };\n}\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n    // deal with a browser inconsistency where formatting the timezone\n    // requires that the hour/minute be present.\n    if (standardDateProps.timeZoneName) {\n        if (!standardDateProps.hour) {\n            standardDateProps.hour = '2-digit';\n        }\n        if (!standardDateProps.minute) {\n            standardDateProps.minute = '2-digit';\n        }\n    }\n    // only support short timezone names\n    if (standardDateProps.timeZoneName === 'long') {\n        standardDateProps.timeZoneName = 'short';\n    }\n    // if requesting to display seconds, MUST display minutes\n    if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n        delete extendedSettings.omitZeroMinute;\n    }\n}\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n    s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n    if (standardDateProps.timeZoneName === 'short') {\n        s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n            'UTC' : // important to normalize for IE, which does \"GMT\"\n            formatTimeZoneOffset(date.timeZoneOffset));\n    }\n    if (extendedSettings.omitCommas) {\n        s = s.replace(COMMA_RE, '').trim();\n    }\n    if (extendedSettings.omitZeroMinute) {\n        s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n    }\n    // ^ do anything that might create adjacent spaces before this point,\n    // because MERIDIEM_RE likes to eat up loading spaces\n    if (extendedSettings.meridiem === false) {\n        s = s.replace(MERIDIEM_RE, '').trim();\n    }\n    else if (extendedSettings.meridiem === 'narrow') { // a/p\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase();\n        });\n    }\n    else if (extendedSettings.meridiem === 'short') { // am/pm\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase() + 'm';\n        });\n    }\n    else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n        s = s.replace(MERIDIEM_RE, function (m0) {\n            return m0.toLocaleLowerCase();\n        });\n    }\n    s = s.replace(MULTI_SPACE_RE, ' ');\n    s = s.trim();\n    return s;\n}\nfunction injectTzoStr(s, tzoStr) {\n    var replaced = false;\n    s = s.replace(UTC_RE, function () {\n        replaced = true;\n        return tzoStr;\n    });\n    // IE11 doesn't include UTC/GMT in the original string, so append to end\n    if (!replaced) {\n        s += ' ' + tzoStr;\n    }\n    return s;\n}\nfunction formatWeekNumber(num, weekLabel, locale, display) {\n    var parts = [];\n    if (display === 'narrow') {\n        parts.push(weekLabel);\n    }\n    else if (display === 'short') {\n        parts.push(weekLabel, ' ');\n    }\n    // otherwise, considered 'numeric'\n    parts.push(locale.simpleNumberFormat.format(num));\n    if (locale.options.isRtl) { // TODO: use control characters instead?\n        parts.reverse();\n    }\n    return parts.join('');\n}\n// Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n    if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n        return 5;\n    }\n    if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n        return 4;\n    }\n    if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n        return 2;\n    }\n    if (timeAsMs(d0) !== timeAsMs(d1)) {\n        return 1;\n    }\n    return 0;\n}\nfunction computePartialFormattingOptions(options, biggestUnit) {\n    var partialOptions = {};\n    for (var name_2 in options) {\n        if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n            STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n            partialOptions[name_2] = options[name_2];\n        }\n    }\n    return partialOptions;\n}\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n    var i0 = 0;\n    while (i0 < full0.length) {\n        var found0 = full0.indexOf(partial0, i0);\n        if (found0 === -1) {\n            break;\n        }\n        var before0 = full0.substr(0, found0);\n        i0 = found0 + partial0.length;\n        var after0 = full0.substr(i0);\n        var i1 = 0;\n        while (i1 < full1.length) {\n            var found1 = full1.indexOf(partial1, i1);\n            if (found1 === -1) {\n                break;\n            }\n            var before1 = full1.substr(0, found1);\n            i1 = found1 + partial1.length;\n            var after1 = full1.substr(i1);\n            if (before0 === before1 && after0 === after1) {\n                return {\n                    before: before0,\n                    after: after0\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\nvar CmdFormatter = /** @class */ (function () {\n    function CmdFormatter(cmdStr, separator) {\n        this.cmdStr = cmdStr;\n        this.separator = separator;\n    }\n    CmdFormatter.prototype.format = function (date, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n    };\n    CmdFormatter.prototype.formatRange = function (start, end, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n    };\n    return CmdFormatter;\n}());\n\nvar FuncFormatter = /** @class */ (function () {\n    function FuncFormatter(func) {\n        this.func = func;\n    }\n    FuncFormatter.prototype.format = function (date, context) {\n        return this.func(createVerboseFormattingArg(date, null, context));\n    };\n    FuncFormatter.prototype.formatRange = function (start, end, context) {\n        return this.func(createVerboseFormattingArg(start, end, context));\n    };\n    return FuncFormatter;\n}());\n\n// Formatter Object Creation\nfunction createFormatter(input, defaultSeparator) {\n    if (typeof input === 'object' && input) { // non-null object\n        if (typeof defaultSeparator === 'string') {\n            input = __assign({ separator: defaultSeparator }, input);\n        }\n        return new NativeFormatter(input);\n    }\n    else if (typeof input === 'string') {\n        return new CmdFormatter(input, defaultSeparator);\n    }\n    else if (typeof input === 'function') {\n        return new FuncFormatter(input);\n    }\n}\n// String Utils\n// timeZoneOffset is in minutes\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n    if (stripZeroTime === void 0) { stripZeroTime = false; }\n    var s = marker.toISOString();\n    s = s.replace('.000', '');\n    if (stripZeroTime) {\n        s = s.replace('T00:00:00Z', '');\n    }\n    if (s.length > 10) { // time part wasn't stripped, can add timezone info\n        if (timeZoneOffset == null) {\n            s = s.replace('Z', '');\n        }\n        else if (timeZoneOffset !== 0) {\n            s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n        }\n        // otherwise, its UTC-0 and we want to keep the Z\n    }\n    return s;\n}\nfunction formatIsoTimeString(marker) {\n    return padStart(marker.getUTCHours(), 2) + ':' +\n        padStart(marker.getUTCMinutes(), 2) + ':' +\n        padStart(marker.getUTCSeconds(), 2);\n}\nfunction formatTimeZoneOffset(minutes, doIso) {\n    if (doIso === void 0) { doIso = false; }\n    var sign = minutes < 0 ? '-' : '+';\n    var abs = Math.abs(minutes);\n    var hours = Math.floor(abs / 60);\n    var mins = Math.round(abs % 60);\n    if (doIso) {\n        return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n    }\n    else {\n        return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n    }\n}\n// Arg Utils\nfunction createVerboseFormattingArg(start, end, context, separator) {\n    var startInfo = expandZonedMarker(start, context.calendarSystem);\n    var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n    return {\n        date: startInfo,\n        start: startInfo,\n        end: endInfo,\n        timeZone: context.timeZone,\n        localeCodes: context.locale.codes,\n        separator: separator\n    };\n}\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n    var a = calendarSystem.markerToArray(dateInfo.marker);\n    return {\n        marker: dateInfo.marker,\n        timeZoneOffset: dateInfo.timeZoneOffset,\n        array: a,\n        year: a[0],\n        month: a[1],\n        day: a[2],\n        hour: a[3],\n        minute: a[4],\n        second: a[5],\n        millisecond: a[6]\n    };\n}\n\nvar EventSourceApi = /** @class */ (function () {\n    function EventSourceApi(calendar, internalEventSource) {\n        this.calendar = calendar;\n        this.internalEventSource = internalEventSource;\n    }\n    EventSourceApi.prototype.remove = function () {\n        this.calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: this.internalEventSource.sourceId\n        });\n    };\n    EventSourceApi.prototype.refetch = function () {\n        this.calendar.dispatch({\n            type: 'FETCH_EVENT_SOURCES',\n            sourceIds: [this.internalEventSource.sourceId]\n        });\n    };\n    Object.defineProperty(EventSourceApi.prototype, \"id\", {\n        get: function () {\n            return this.internalEventSource.publicId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"url\", {\n        // only relevant to json-feed event sources\n        get: function () {\n            return this.internalEventSource.meta.url;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventSourceApi;\n}());\n\nvar EventApi = /** @class */ (function () {\n    function EventApi(calendar, def, instance) {\n        this._calendar = calendar;\n        this._def = def;\n        this._instance = instance || null;\n    }\n    /*\n    TODO: make event struct more responsible for this\n    */\n    EventApi.prototype.setProp = function (name, val) {\n        var _a, _b;\n        if (name in DATE_PROPS) ;\n        else if (name in NON_DATE_PROPS) {\n            if (typeof NON_DATE_PROPS[name] === 'function') {\n                val = NON_DATE_PROPS[name](val);\n            }\n            this.mutate({\n                standardProps: (_a = {}, _a[name] = val, _a)\n            });\n        }\n        else if (name in UNSCOPED_EVENT_UI_PROPS) {\n            var ui = void 0;\n            if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n                val = UNSCOPED_EVENT_UI_PROPS[name](val);\n            }\n            if (name === 'color') {\n                ui = { backgroundColor: val, borderColor: val };\n            }\n            else if (name === 'editable') {\n                ui = { startEditable: val, durationEditable: val };\n            }\n            else {\n                ui = (_b = {}, _b[name] = val, _b);\n            }\n            this.mutate({\n                standardProps: { ui: ui }\n            });\n        }\n    };\n    EventApi.prototype.setExtendedProp = function (name, val) {\n        var _a;\n        this.mutate({\n            extendedProps: (_a = {}, _a[name] = val, _a)\n        });\n    };\n    EventApi.prototype.setStart = function (startInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var start = dateEnv.createMarker(startInput);\n        if (start && this._instance) { // TODO: warning if parsed bad\n            var instanceRange = this._instance.range;\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n            if (options.maintainDuration) {\n                this.mutate({ datesDelta: startDelta });\n            }\n            else {\n                this.mutate({ startDelta: startDelta });\n            }\n        }\n    };\n    EventApi.prototype.setEnd = function (endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var end;\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) {\n                return; // TODO: warning if parsed bad\n            }\n        }\n        if (this._instance) {\n            if (end) {\n                var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                this.mutate({ endDelta: endDelta });\n            }\n            else {\n                this.mutate({ standardProps: { hasEnd: false } });\n            }\n        }\n    };\n    EventApi.prototype.setDates = function (startInput, endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var standardProps = { allDay: options.allDay };\n        var start = dateEnv.createMarker(startInput);\n        var end;\n        if (!start) {\n            return; // TODO: warning if parsed bad\n        }\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) { // TODO: warning if parsed bad\n                return;\n            }\n        }\n        if (this._instance) {\n            var instanceRange = this._instance.range;\n            // when computing the diff for an event being converted to all-day,\n            // compute diff off of the all-day values the way event-mutation does.\n            if (options.allDay === true) {\n                instanceRange = computeAlignedDayRange(instanceRange);\n            }\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n            if (end) {\n                var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                if (durationsEqual(startDelta, endDelta)) {\n                    this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n                }\n                else {\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n            }\n            else { // means \"clear the end\"\n                standardProps.hasEnd = false;\n                this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n            }\n        }\n    };\n    EventApi.prototype.moveStart = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ startDelta: delta });\n        }\n    };\n    EventApi.prototype.moveEnd = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ endDelta: delta });\n        }\n    };\n    EventApi.prototype.moveDates = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ datesDelta: delta });\n        }\n    };\n    EventApi.prototype.setAllDay = function (allDay, options) {\n        if (options === void 0) { options = {}; }\n        var standardProps = { allDay: allDay };\n        var maintainDuration = options.maintainDuration;\n        if (maintainDuration == null) {\n            maintainDuration = this._calendar.opt('allDayMaintainDuration');\n        }\n        if (this._def.allDay !== allDay) {\n            standardProps.hasEnd = maintainDuration;\n        }\n        this.mutate({ standardProps: standardProps });\n    };\n    EventApi.prototype.formatRange = function (formatInput) {\n        var dateEnv = this._calendar.dateEnv;\n        var instance = this._instance;\n        var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n        if (this._def.hasEnd) {\n            return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                forcedStartTzo: instance.forcedStartTzo,\n                forcedEndTzo: instance.forcedEndTzo\n            });\n        }\n        else {\n            return dateEnv.format(instance.range.start, formatter, {\n                forcedTzo: instance.forcedStartTzo\n            });\n        }\n    };\n    EventApi.prototype.mutate = function (mutation) {\n        var def = this._def;\n        var instance = this._instance;\n        if (instance) {\n            this._calendar.dispatch({\n                type: 'MUTATE_EVENTS',\n                instanceId: instance.instanceId,\n                mutation: mutation,\n                fromApi: true\n            });\n            var eventStore = this._calendar.state.eventStore;\n            this._def = eventStore.defs[def.defId];\n            this._instance = eventStore.instances[instance.instanceId];\n        }\n    };\n    EventApi.prototype.remove = function () {\n        this._calendar.dispatch({\n            type: 'REMOVE_EVENT_DEF',\n            defId: this._def.defId\n        });\n    };\n    Object.defineProperty(EventApi.prototype, \"source\", {\n        get: function () {\n            var sourceId = this._def.sourceId;\n            if (sourceId) {\n                return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"start\", {\n        get: function () {\n            return this._instance ?\n                this._calendar.dateEnv.toDate(this._instance.range.start) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"end\", {\n        get: function () {\n            return (this._instance && this._def.hasEnd) ?\n                this._calendar.dateEnv.toDate(this._instance.range.end) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"id\", {\n        // computable props that all access the def\n        // TODO: find a TypeScript-compatible way to do this at scale\n        get: function () { return this._def.publicId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"groupId\", {\n        get: function () { return this._def.groupId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allDay\", {\n        get: function () { return this._def.allDay; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"title\", {\n        get: function () { return this._def.title; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"url\", {\n        get: function () { return this._def.url; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"rendering\", {\n        get: function () { return this._def.rendering; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startEditable\", {\n        get: function () { return this._def.ui.startEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n        get: function () { return this._def.ui.durationEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"constraint\", {\n        get: function () { return this._def.ui.constraints[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"overlap\", {\n        get: function () { return this._def.ui.overlap; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allow\", {\n        get: function () { return this._def.ui.allows[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n        get: function () { return this._def.ui.backgroundColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"borderColor\", {\n        get: function () { return this._def.ui.borderColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"textColor\", {\n        get: function () { return this._def.ui.textColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"classNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._def.ui.classNames; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n        get: function () { return this._def.extendedProps; },\n        enumerable: true,\n        configurable: true\n    });\n    return EventApi;\n}());\n\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n    var inverseBgByGroupId = {};\n    var inverseBgByDefId = {};\n    var defByGroupId = {};\n    var bgRanges = [];\n    var fgRanges = [];\n    var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        if (def.rendering === 'inverse-background') {\n            if (def.groupId) {\n                inverseBgByGroupId[def.groupId] = [];\n                if (!defByGroupId[def.groupId]) {\n                    defByGroupId[def.groupId] = def;\n                }\n            }\n            else {\n                inverseBgByDefId[defId] = [];\n            }\n        }\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = eventStore.defs[instance.defId];\n        var ui = eventUis[def.defId];\n        var origRange = instance.range;\n        var normalRange = (!def.allDay && nextDayThreshold) ?\n            computeVisibleDayRange(origRange, nextDayThreshold) :\n            origRange;\n        var slicedRange = intersectRanges(normalRange, framingRange);\n        if (slicedRange) {\n            if (def.rendering === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId].push(slicedRange);\n                }\n                else {\n                    inverseBgByDefId[instance.defId].push(slicedRange);\n                }\n            }\n            else {\n                (def.rendering === 'background' ? bgRanges : fgRanges).push({\n                    def: def,\n                    ui: ui,\n                    instance: instance,\n                    range: slicedRange,\n                    isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                    isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n                });\n            }\n        }\n    }\n    for (var groupId in inverseBgByGroupId) { // BY GROUP\n        var ranges = inverseBgByGroupId[groupId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n            var invertedRange = invertedRanges_1[_i];\n            var def = defByGroupId[groupId];\n            var ui = eventUis[def.defId];\n            bgRanges.push({\n                def: def,\n                ui: ui,\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    for (var defId in inverseBgByDefId) {\n        var ranges = inverseBgByDefId[defId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n            var invertedRange = invertedRanges_2[_a];\n            bgRanges.push({\n                def: eventStore.defs[defId],\n                ui: eventUis[defId],\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    return { bg: bgRanges, fg: fgRanges };\n}\nfunction hasBgRendering(def) {\n    return def.rendering === 'background' || def.rendering === 'inverse-background';\n}\nfunction filterSegsViaEls(context, segs, isMirror) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventRender')) {\n        segs = segs.filter(function (seg) {\n            var custom = calendar.publiclyTrigger('eventRender', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirror,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    // TODO: include seg.range once all components consistently generate it\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n            if (custom === false) { // means don't render at all\n                return false;\n            }\n            else if (custom && custom !== true) {\n                seg.el = custom;\n            }\n            return true;\n        });\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        setElSeg(seg.el, seg);\n    }\n    return segs;\n}\nfunction setElSeg(el, seg) {\n    el.fcSeg = seg;\n}\nfunction getElSeg(el) {\n    return el.fcSeg || null;\n}\n// event ui computation\nfunction compileEventUis(eventDefs, eventUiBases) {\n    return mapHash(eventDefs, function (eventDef) {\n        return compileEventUi(eventDef, eventUiBases);\n    });\n}\nfunction compileEventUi(eventDef, eventUiBases) {\n    var uis = [];\n    if (eventUiBases['']) {\n        uis.push(eventUiBases['']);\n    }\n    if (eventUiBases[eventDef.defId]) {\n        uis.push(eventUiBases[eventDef.defId]);\n    }\n    uis.push(eventDef.ui);\n    return combineEventUis(uis);\n}\n// triggers\nfunction triggerRenderedSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventPositioned')) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            calendar.publiclyTriggerAfterSizing('eventPositioned', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n    if (!calendar.state.loadingLevel) { // avoid initial empty state while pending\n        calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n    }\n}\nfunction triggerWillRemoveSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n        var seg = segs_3[_i];\n        calendar.trigger('eventElRemove', seg.el);\n    }\n    if (calendar.hasPublicHandlers('eventDestroy')) {\n        for (var _a = 0, segs_4 = segs; _a < segs_4.length; _a++) {\n            var seg = segs_4[_a];\n            calendar.publiclyTrigger('eventDestroy', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n}\n// is-interactable\nfunction computeEventDraggable(context, eventDef, eventUi) {\n    var calendar = context.calendar, view = context.view;\n    var transformers = calendar.pluginSystem.hooks.isDraggableTransformers;\n    var val = eventUi.startEditable;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        val = transformer(val, eventDef, eventUi, view);\n    }\n    return val;\n}\nfunction computeEventStartResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable && context.options.eventResizableFromStart;\n}\nfunction computeEventEndResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable;\n}\n\n// applies the mutation to ALL defs/instances within the event store\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n    var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n    var dest = createEmptyEventStore();\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = dest.defs[instance.defId]; // important to grab the newly modified def\n        dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n    }\n    return dest;\n}\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n    var standardProps = mutation.standardProps || {};\n    // if hasEnd has not been specified, guess a good value based on deltas.\n    // if duration will change, there's no way the default duration will persist,\n    // and thus, we need to mark the event as having a real end\n    if (standardProps.hasEnd == null &&\n        eventConfig.durationEditable &&\n        (mutation.startDelta || mutation.endDelta)) {\n        standardProps.hasEnd = true; // TODO: is this mutation okay?\n    }\n    var copy = __assign({}, eventDef, standardProps, { ui: __assign({}, eventDef.ui, standardProps.ui) });\n    if (mutation.extendedProps) {\n        copy.extendedProps = __assign({}, copy.extendedProps, mutation.extendedProps);\n    }\n    for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n        var applier = appliers_1[_i];\n        applier(copy, mutation, calendar);\n    }\n    if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n        copy.hasEnd = true;\n    }\n    return copy;\n}\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n    var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n    var copy = __assign({}, eventInstance);\n    if (forceAllDay) {\n        copy.range = computeAlignedDayRange(copy.range);\n    }\n    if (mutation.datesDelta && eventConfig.startEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.datesDelta),\n            end: dateEnv.add(copy.range.end, mutation.datesDelta)\n        };\n    }\n    if (mutation.startDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.startDelta),\n            end: copy.range.end\n        };\n    }\n    if (mutation.endDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: copy.range.start,\n            end: dateEnv.add(copy.range.end, mutation.endDelta)\n        };\n    }\n    if (clearEnd) {\n        copy.range = {\n            start: copy.range.start,\n            end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n        };\n    }\n    // in case event was all-day but the supplied deltas were not\n    // better util for this?\n    if (eventDef.allDay) {\n        copy.range = {\n            start: startOfDay(copy.range.start),\n            end: startOfDay(copy.range.end)\n        };\n    }\n    // handle invalid durations\n    if (copy.range.end < copy.range.start) {\n        copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n    }\n    return copy;\n}\n\nfunction reduceEventStore (eventStore, action, eventSources, dateProfile, calendar) {\n    switch (action.type) {\n        case 'RECEIVE_EVENTS': // raw\n            return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n        case 'ADD_EVENTS': // already parsed, but not expanded\n            return addEvent(eventStore, action.eventStore, // new ones\n            dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'MERGE_EVENTS': // already parsed and expanded\n            return mergeEventStores(eventStore, action.eventStore);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventStore;\n            }\n        case 'CHANGE_TIMEZONE':\n            return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n        case 'MUTATE_EVENTS':\n            return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n        case 'REMOVE_EVENT_INSTANCES':\n            return excludeInstances(eventStore, action.instances);\n        case 'REMOVE_EVENT_DEF':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return eventDef.defId !== action.defId;\n            });\n        case 'REMOVE_EVENT_SOURCE':\n            return excludeEventsBySourceId(eventStore, action.sourceId);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return !eventDef.sourceId; // only keep events with no source id\n            });\n        case 'REMOVE_ALL_EVENTS':\n            return createEmptyEventStore();\n        case 'RESET_EVENTS':\n            return {\n                defs: eventStore.defs,\n                instances: eventStore.instances\n            };\n        default:\n            return eventStore;\n    }\n}\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n    ) {\n        var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n        if (fetchRange) {\n            subset = expandRecurring(subset, fetchRange, calendar);\n        }\n        return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n    return eventStore;\n}\nfunction addEvent(eventStore, subset, expandRange, calendar) {\n    if (expandRange) {\n        subset = expandRecurring(subset, expandRange, calendar);\n    }\n    return mergeEventStores(eventStore, subset);\n}\nfunction rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n    var defs = eventStore.defs;\n    var instances = mapHash(eventStore.instances, function (instance) {\n        var def = defs[instance.defId];\n        if (def.allDay || def.recurringDef) {\n            return instance; // isn't dependent on timezone\n        }\n        else {\n            return __assign({}, instance, { range: {\n                    start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                    end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n                }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n        }\n    });\n    return { defs: defs, instances: instances };\n}\nfunction applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n    var relevant = getRelevantEvents(eventStore, instanceId);\n    var eventConfigBase = fromApi ?\n        { '': {\n                startEditable: true,\n                durationEditable: true,\n                constraints: [],\n                overlap: null,\n                allows: [],\n                backgroundColor: '',\n                borderColor: '',\n                textColor: '',\n                classNames: []\n            } } :\n        calendar.eventUiBases;\n    relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n    return mergeEventStores(eventStore, relevant);\n}\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n    return filterEventStoreDefs(eventStore, function (eventDef) {\n        return eventDef.sourceId !== sourceId;\n    });\n}\n// QUESTION: why not just return instances? do a general object-property-exclusion util\nfunction excludeInstances(eventStore, removals) {\n    return {\n        defs: eventStore.defs,\n        instances: filterHash(eventStore.instances, function (instance) {\n            return !removals[instance.instanceId];\n        })\n    };\n}\n\n// high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionValid(interaction, calendar) {\n    return isNewPropsValid({ eventDrag: interaction }, calendar); // HACK: the eventDrag props is used for ALL interactions\n}\nfunction isDateSelectionValid(dateSelection, calendar) {\n    return isNewPropsValid({ dateSelection: dateSelection }, calendar);\n}\nfunction isNewPropsValid(newProps, calendar) {\n    var view = calendar.view;\n    var props = __assign({ businessHours: view ? view.props.businessHours : createEmptyEventStore(), dateSelection: '', eventStore: calendar.state.eventStore, eventUiBases: calendar.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n    return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n}\nfunction isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n    if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    return true;\n}\n// Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n    var subjectEventStore = interaction.mutatedEvents;\n    var subjectDefs = subjectEventStore.defs;\n    var subjectInstances = subjectEventStore.instances;\n    var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n        state.eventUiBases :\n        { '': calendar.selectionConfig } // if not a real event, validate as a selection\n    );\n    if (filterConfig) {\n        subjectConfigs = mapHash(subjectConfigs, filterConfig);\n    }\n    var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n    var otherDefs = otherEventStore.defs;\n    var otherInstances = otherEventStore.instances;\n    var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n    for (var subjectInstanceId in subjectInstances) {\n        var subjectInstance = subjectInstances[subjectInstanceId];\n        var subjectRange = subjectInstance.range;\n        var subjectConfig = subjectConfigs[subjectInstance.defId];\n        var subjectDef = subjectDefs[subjectInstance.defId];\n        // constraint\n        if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n            return false;\n        }\n        // overlap\n        var overlapFunc = calendar.opt('eventOverlap');\n        if (typeof overlapFunc !== 'function') {\n            overlapFunc = null;\n        }\n        for (var otherInstanceId in otherInstances) {\n            var otherInstance = otherInstances[otherInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(subjectRange, otherInstance.range)) {\n                var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                if (otherOverlap === false && interaction.isEvent) {\n                    return false;\n                }\n                if (subjectConfig.overlap === false) {\n                    return false;\n                }\n                if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n                new EventApi(calendar, subjectDef, subjectInstance) // moving event\n                )) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        var calendarEventStore = calendar.state.eventStore; // need global-to-calendar, not local to component (splittable)state\n        for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n            var subjectAllow = _a[_i];\n            var subjectDateSpan = __assign({}, dateSpanMeta, { range: subjectInstance.range, allDay: subjectDef.allDay });\n            var origDef = calendarEventStore.defs[subjectDef.defId];\n            var origInstance = calendarEventStore.instances[subjectInstanceId];\n            var eventApi = void 0;\n            if (origDef) { // was previously in the calendar\n                eventApi = new EventApi(calendar, origDef, origInstance);\n            }\n            else { // was an external event\n                eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n            }\n            if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n// Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var relevantEventStore = state.eventStore;\n    var relevantDefs = relevantEventStore.defs;\n    var relevantInstances = relevantEventStore.instances;\n    var selection = state.dateSelection;\n    var selectionRange = selection.range;\n    var selectionConfig = calendar.selectionConfig;\n    if (filterConfig) {\n        selectionConfig = filterConfig(selectionConfig);\n    }\n    // constraint\n    if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n        return false;\n    }\n    // overlap\n    var overlapFunc = calendar.opt('selectOverlap');\n    if (typeof overlapFunc !== 'function') {\n        overlapFunc = null;\n    }\n    for (var relevantInstanceId in relevantInstances) {\n        var relevantInstance = relevantInstances[relevantInstanceId];\n        // intersect! evaluate\n        if (rangesIntersect(selectionRange, relevantInstance.range)) {\n            if (selectionConfig.overlap === false) {\n                return false;\n            }\n            if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n                return false;\n            }\n        }\n    }\n    // allow (a function)\n    for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n        var selectionAllow = _a[_i];\n        var fullDateSpan = __assign({}, dateSpanMeta, selection);\n        if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n            return false;\n        }\n    }\n    return true;\n}\n// Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n    for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n        var constraint = constraints_1[_i];\n        if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncalendar // for expanding businesshours\n) {\n    if (constraint === 'businessHours') {\n        return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n    }\n    else if (typeof constraint === 'string') { // an group ID\n        return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n            return eventDef.groupId === constraint;\n        }));\n    }\n    else if (typeof constraint === 'object' && constraint) { // non-null object\n        return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n    }\n    return []; // if it's false\n}\n// TODO: move to event-store file?\nfunction eventStoreToRanges(eventStore) {\n    var instances = eventStore.instances;\n    var ranges = [];\n    for (var instanceId in instances) {\n        ranges.push(instances[instanceId].range);\n    }\n    return ranges;\n}\n// TODO: move to geom file?\nfunction anyRangesContainRange(outerRanges, innerRange) {\n    for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n        var outerRange = outerRanges_1[_i];\n        if (rangeContainsRange(outerRange, innerRange)) {\n            return true;\n        }\n    }\n    return false;\n}\n// Parsing\n// ------------------------------------------------------------------------------------------------------------------------\nfunction normalizeConstraint(input, calendar) {\n    if (Array.isArray(input)) {\n        return parseEvents(input, '', calendar, true); // allowOpenRange=true\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return parseEvents([input], '', calendar, true); // allowOpenRange=true\n    }\n    else if (input != null) {\n        return String(input);\n    }\n    else {\n        return null;\n    }\n}\n\nfunction htmlEscape(s) {\n    return (s + '').replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/'/g, '&#039;')\n        .replace(/\"/g, '&quot;')\n        .replace(/\\n/g, '<br />');\n}\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n    var statements = [];\n    for (var name_1 in cssProps) {\n        var val = cssProps[name_1];\n        if (val != null && val !== '') {\n            statements.push(name_1 + ':' + val);\n        }\n    }\n    return statements.join(';');\n}\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n    var parts = [];\n    for (var name_2 in attrs) {\n        var val = attrs[name_2];\n        if (val != null) {\n            parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n        }\n    }\n    return parts.join(' ');\n}\nfunction parseClassName(raw) {\n    if (Array.isArray(raw)) {\n        return raw;\n    }\n    else if (typeof raw === 'string') {\n        return raw.split(/\\s+/);\n    }\n    else {\n        return [];\n    }\n}\n\nvar UNSCOPED_EVENT_UI_PROPS = {\n    editable: Boolean,\n    startEditable: Boolean,\n    durationEditable: Boolean,\n    constraint: null,\n    overlap: null,\n    allow: null,\n    className: parseClassName,\n    classNames: parseClassName,\n    color: String,\n    backgroundColor: String,\n    borderColor: String,\n    textColor: String\n};\nfunction processUnscopedUiProps(rawProps, calendar, leftovers) {\n    var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n    var constraint = normalizeConstraint(props.constraint, calendar);\n    return {\n        startEditable: props.startEditable != null ? props.startEditable : props.editable,\n        durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n        constraints: constraint != null ? [constraint] : [],\n        overlap: props.overlap,\n        allows: props.allow != null ? [props.allow] : [],\n        backgroundColor: props.backgroundColor || props.color,\n        borderColor: props.borderColor || props.color,\n        textColor: props.textColor,\n        classNames: props.classNames.concat(props.className)\n    };\n}\nfunction processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n    var rawUnscoped = {};\n    var wasFound = {};\n    for (var key in UNSCOPED_EVENT_UI_PROPS) {\n        var scopedKey = prefix + capitaliseFirstLetter(key);\n        rawUnscoped[key] = rawScoped[scopedKey];\n        wasFound[scopedKey] = true;\n    }\n    if (prefix === 'event') {\n        rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n    }\n    if (leftovers) {\n        for (var key in rawScoped) {\n            if (!wasFound[key]) {\n                leftovers[key] = rawScoped[key];\n            }\n        }\n    }\n    return processUnscopedUiProps(rawUnscoped, calendar);\n}\nvar EMPTY_EVENT_UI = {\n    startEditable: null,\n    durationEditable: null,\n    constraints: [],\n    overlap: null,\n    allows: [],\n    backgroundColor: '',\n    borderColor: '',\n    textColor: '',\n    classNames: []\n};\n// prevent against problems with <2 args!\nfunction combineEventUis(uis) {\n    return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\nfunction combineTwoEventUis(item0, item1) {\n    return {\n        startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n        durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n        constraints: item0.constraints.concat(item1.constraints),\n        overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n        allows: item0.allows.concat(item1.allows),\n        backgroundColor: item1.backgroundColor || item0.backgroundColor,\n        borderColor: item1.borderColor || item0.borderColor,\n        textColor: item1.textColor || item0.textColor,\n        classNames: item0.classNames.concat(item1.classNames)\n    };\n}\n\nvar NON_DATE_PROPS = {\n    id: String,\n    groupId: String,\n    title: String,\n    url: String,\n    rendering: String,\n    extendedProps: null\n};\nvar DATE_PROPS = {\n    start: null,\n    date: null,\n    end: null,\n    allDay: null\n};\nvar uid = 0;\nfunction parseEvent(raw, sourceId, calendar, allowOpenRange) {\n    var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n    var leftovers0 = {};\n    var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n    allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n    );\n    if (recurringRes) {\n        var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n        def.recurringDef = {\n            typeId: recurringRes.typeId,\n            typeData: recurringRes.typeData,\n            duration: recurringRes.duration\n        };\n        return { def: def, instance: null };\n    }\n    else {\n        var leftovers1 = {};\n        var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n        if (singleRes) {\n            var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n            var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n            return { def: def, instance: instance };\n        }\n    }\n    return null;\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\nThe EventNonDateInput has been normalized (id => publicId, etc).\n*/\nfunction parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n    var leftovers = {};\n    var def = pluckNonDateProps(raw, calendar, leftovers);\n    def.defId = String(uid++);\n    def.sourceId = sourceId;\n    def.allDay = allDay;\n    def.hasEnd = hasEnd;\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n        var eventDefParser = _a[_i];\n        var newLeftovers = {};\n        eventDefParser(def, leftovers, newLeftovers);\n        leftovers = newLeftovers;\n    }\n    def.extendedProps = __assign(leftovers, def.extendedProps || {});\n    // help out EventApi from having user modify props\n    Object.freeze(def.ui.classNames);\n    Object.freeze(def.extendedProps);\n    return def;\n}\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n    return {\n        instanceId: String(uid++),\n        defId: defId,\n        range: range,\n        forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n        forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n    };\n}\nfunction parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n    var props = pluckDateProps(raw, leftovers);\n    var allDay = props.allDay;\n    var startMeta;\n    var startMarker = null;\n    var hasEnd = false;\n    var endMeta;\n    var endMarker = null;\n    startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n    if (startMeta) {\n        startMarker = startMeta.marker;\n    }\n    else if (!allowOpenRange) {\n        return null;\n    }\n    if (props.end != null) {\n        endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n    }\n    if (allDay == null) {\n        if (allDayDefault != null) {\n            allDay = allDayDefault;\n        }\n        else {\n            // fall back to the date props LAST\n            allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n    }\n    if (allDay && startMarker) {\n        startMarker = startOfDay(startMarker);\n    }\n    if (endMeta) {\n        endMarker = endMeta.marker;\n        if (allDay) {\n            endMarker = startOfDay(endMarker);\n        }\n        if (startMarker && endMarker <= startMarker) {\n            endMarker = null;\n        }\n    }\n    if (endMarker) {\n        hasEnd = true;\n    }\n    else if (!allowOpenRange) {\n        hasEnd = calendar.opt('forceEventDuration') || false;\n        endMarker = calendar.dateEnv.add(startMarker, allDay ?\n            calendar.defaultAllDayEventDuration :\n            calendar.defaultTimedEventDuration);\n    }\n    return {\n        allDay: allDay,\n        hasEnd: hasEnd,\n        range: { start: startMarker, end: endMarker },\n        forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n        forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n    };\n}\nfunction pluckDateProps(raw, leftovers) {\n    var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n    props.start = (props.start !== null) ? props.start : props.date;\n    delete props.date;\n    return props;\n}\nfunction pluckNonDateProps(raw, calendar, leftovers) {\n    var preLeftovers = {};\n    var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n    var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n    props.publicId = props.id;\n    delete props.id;\n    props.ui = ui;\n    return props;\n}\nfunction computeIsAllDayDefault(sourceId, calendar) {\n    var res = null;\n    if (sourceId) {\n        var source = calendar.state.eventSources[sourceId];\n        res = source.allDayDefault;\n    }\n    if (res == null) {\n        res = calendar.opt('allDayDefault');\n    }\n    return res;\n}\n\nvar DEF_DEFAULTS = {\n    startTime: '09:00',\n    endTime: '17:00',\n    daysOfWeek: [1, 2, 3, 4, 5],\n    rendering: 'inverse-background',\n    classNames: 'fc-nonbusiness',\n    groupId: '_businessHours' // so multiple defs get grouped\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\nfunction parseBusinessHours(input, calendar) {\n    return parseEvents(refineInputs(input), '', calendar);\n}\nfunction refineInputs(input) {\n    var rawDefs;\n    if (input === true) {\n        rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n    }\n    else if (Array.isArray(input)) {\n        // if specifying an array, every sub-definition NEEDS a day-of-week\n        rawDefs = input.filter(function (rawDef) {\n            return rawDef.daysOfWeek;\n        });\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        rawDefs = [input];\n    }\n    else { // is probably false\n        rawDefs = [];\n    }\n    rawDefs = rawDefs.map(function (rawDef) {\n        return __assign({}, DEF_DEFAULTS, rawDef);\n    });\n    return rawDefs;\n}\n\nfunction memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n    if (dependencies === void 0) { dependencies = []; }\n    var dependents = [];\n    var thisContext;\n    var prevArgs;\n    function unrender() {\n        if (prevArgs) {\n            for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n                var dependent = dependents_1[_i];\n                dependent.unrender();\n            }\n            if (unrenderFunc) {\n                unrenderFunc.apply(thisContext, prevArgs);\n            }\n            prevArgs = null;\n        }\n    }\n    function res() {\n        if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n            unrender();\n            thisContext = this;\n            prevArgs = arguments;\n            renderFunc.apply(this, arguments);\n        }\n    }\n    res.dependents = dependents;\n    res.unrender = unrender;\n    for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n        var dependency = dependencies_1[_i];\n        dependency.dependents.push(res);\n    }\n    return res;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\nvar Splitter = /** @class */ (function () {\n    function Splitter() {\n        this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n        this.splitDateSelection = memoize(this._splitDateSpan);\n        this.splitEventStore = memoize(this._splitEventStore);\n        this.splitIndividualUi = memoize(this._splitIndividualUi);\n        this.splitEventDrag = memoize(this._splitInteraction);\n        this.splitEventResize = memoize(this._splitInteraction);\n        this.eventUiBuilders = {}; // TODO: typescript protection\n    }\n    Splitter.prototype.splitProps = function (props) {\n        var _this = this;\n        var keyInfos = this.getKeyInfo(props);\n        var defKeys = this.getKeysForEventDefs(props.eventStore);\n        var dateSelections = this.splitDateSelection(props.dateSelection);\n        var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n        var eventStores = this.splitEventStore(props.eventStore, defKeys);\n        var eventDrags = this.splitEventDrag(props.eventDrag);\n        var eventResizes = this.splitEventResize(props.eventResize);\n        var splitProps = {};\n        this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n            return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n        });\n        for (var key in keyInfos) {\n            var keyInfo = keyInfos[key];\n            var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n            var buildEventUi = this.eventUiBuilders[key];\n            splitProps[key] = {\n                businessHours: keyInfo.businessHours || props.businessHours,\n                dateSelection: dateSelections[key] || null,\n                eventStore: eventStore,\n                eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                eventDrag: eventDrags[key] || null,\n                eventResize: eventResizes[key] || null\n            };\n        }\n        return splitProps;\n    };\n    Splitter.prototype._splitDateSpan = function (dateSpan) {\n        var dateSpans = {};\n        if (dateSpan) {\n            var keys = this.getKeysForDateSpan(dateSpan);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                dateSpans[key] = dateSpan;\n            }\n        }\n        return dateSpans;\n    };\n    Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n        var _this = this;\n        return mapHash(eventStore.defs, function (eventDef) {\n            return _this.getKeysForEventDef(eventDef);\n        });\n    };\n    Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n        var defs = eventStore.defs, instances = eventStore.instances;\n        var splitStores = {};\n        for (var defId in defs) {\n            for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (!splitStores[key]) {\n                    splitStores[key] = createEmptyEventStore();\n                }\n                splitStores[key].defs[defId] = defs[defId];\n            }\n        }\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                var key = _c[_b];\n                if (splitStores[key]) { // must have already been created\n                    splitStores[key].instances[instanceId] = instance;\n                }\n            }\n        }\n        return splitStores;\n    };\n    Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n        var splitHashes = {};\n        for (var defId in eventUiBases) {\n            if (defId) { // not the '' key\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitHashes[key]) {\n                        splitHashes[key] = {};\n                    }\n                    splitHashes[key][defId] = eventUiBases[defId];\n                }\n            }\n        }\n        return splitHashes;\n    };\n    Splitter.prototype._splitInteraction = function (interaction) {\n        var splitStates = {};\n        if (interaction) {\n            var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n            );\n            // can't rely on defKeys because event data is mutated\n            var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n            var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n            var populate = function (key) {\n                if (!splitStates[key]) {\n                    splitStates[key] = {\n                        affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                        mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                        isEvent: interaction.isEvent,\n                        origSeg: interaction.origSeg\n                    };\n                }\n            };\n            for (var key in affectedStores_1) {\n                populate(key);\n            }\n            for (var key in mutatedStores_1) {\n                populate(key);\n            }\n        }\n        return splitStates;\n    };\n    return Splitter;\n}());\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n    var baseParts = [];\n    if (allUi) {\n        baseParts.push(allUi);\n    }\n    if (eventUiForKey) {\n        baseParts.push(eventUiForKey);\n    }\n    var stuff = {\n        '': combineEventUis(baseParts)\n    };\n    if (individualUi) {\n        __assign(stuff, individualUi);\n    }\n    return stuff;\n}\n\n// Generates HTML for an anchor to another view into the calendar.\n// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n// `gotoOptions` can either be a DateMarker, or an object with the form:\n// { date, type, forceOff }\n// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\nfunction buildGotoAnchorHtml(allOptions, dateEnv, gotoOptions, attrs, innerHtml) {\n    var date;\n    var type;\n    var forceOff;\n    var finalOptions;\n    if (gotoOptions instanceof Date) {\n        date = gotoOptions; // a single date-like input\n    }\n    else {\n        date = gotoOptions.date;\n        type = gotoOptions.type;\n        forceOff = gotoOptions.forceOff;\n    }\n    finalOptions = {\n        date: dateEnv.formatIso(date, { omitTime: true }),\n        type: type || 'day'\n    };\n    if (typeof attrs === 'string') {\n        innerHtml = attrs;\n        attrs = null;\n    }\n    attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n    innerHtml = innerHtml || '';\n    if (!forceOff && allOptions.navLinks) {\n        return '<a' + attrs +\n            ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n            innerHtml +\n            '</a>';\n    }\n    else {\n        return '<span' + attrs + '>' +\n            innerHtml +\n            '</span>';\n    }\n}\nfunction getAllDayHtml(allOptions) {\n    return allOptions.allDayHtml || htmlEscape(allOptions.allDayText);\n}\n// Computes HTML classNames for a single-day element\nfunction getDayClasses(date, dateProfile, context, noThemeHighlight) {\n    var calendar = context.calendar, options = context.options, theme = context.theme, dateEnv = context.dateEnv;\n    var classes = [];\n    var todayStart;\n    var todayEnd;\n    if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n        classes.push('fc-disabled-day');\n    }\n    else {\n        classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n        if (options.monthMode &&\n            dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n            classes.push('fc-other-month');\n        }\n        todayStart = startOfDay(calendar.getNow());\n        todayEnd = addDays(todayStart, 1);\n        if (date < todayStart) {\n            classes.push('fc-past');\n        }\n        else if (date >= todayEnd) {\n            classes.push('fc-future');\n        }\n        else {\n            classes.push('fc-today');\n            if (noThemeHighlight !== true) {\n                classes.push(theme.getClass('today'));\n            }\n        }\n    }\n    return classes;\n}\n\n// given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\nfunction unpromisify(func, success, failure) {\n    // guard against success/failure callbacks being called more than once\n    // and guard against a promise AND callback being used together.\n    var isResolved = false;\n    var wrappedSuccess = function () {\n        if (!isResolved) {\n            isResolved = true;\n            success.apply(this, arguments);\n        }\n    };\n    var wrappedFailure = function () {\n        if (!isResolved) {\n            isResolved = true;\n            if (failure) {\n                failure.apply(this, arguments);\n            }\n        }\n    };\n    var res = func(wrappedSuccess, wrappedFailure);\n    if (res && typeof res.then === 'function') {\n        res.then(wrappedSuccess, wrappedFailure);\n    }\n}\n\nvar Mixin = /** @class */ (function () {\n    function Mixin() {\n    }\n    // mix into a CLASS\n    Mixin.mixInto = function (destClass) {\n        this.mixIntoObj(destClass.prototype);\n    };\n    // mix into ANY object\n    Mixin.mixIntoObj = function (destObj) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            if (!destObj[name]) { // if destination doesn't already define it\n                destObj[name] = _this.prototype[name];\n            }\n        });\n    };\n    /*\n    will override existing methods\n    TODO: remove! not used anymore\n    */\n    Mixin.mixOver = function (destClass) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            destClass.prototype[name] = _this.prototype[name];\n        });\n    };\n    return Mixin;\n}());\n\n/*\nUSAGE:\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\nin class:\n  on: EmitterInterface['on']\n  one: EmitterInterface['one']\n  off: EmitterInterface['off']\n  trigger: EmitterInterface['trigger']\n  triggerWith: EmitterInterface['triggerWith']\n  hasHandlers: EmitterInterface['hasHandlers']\nafter class:\n  EmitterMixin.mixInto(TheClass)\n*/\nvar EmitterMixin = /** @class */ (function (_super) {\n    __extends(EmitterMixin, _super);\n    function EmitterMixin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmitterMixin.prototype.on = function (type, handler) {\n        addToHash(this._handlers || (this._handlers = {}), type, handler);\n        return this; // for chaining\n    };\n    // todo: add comments\n    EmitterMixin.prototype.one = function (type, handler) {\n        addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.off = function (type, handler) {\n        if (this._handlers) {\n            removeFromHash(this._handlers, type, handler);\n        }\n        if (this._oneHandlers) {\n            removeFromHash(this._oneHandlers, type, handler);\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.triggerWith(type, this, args);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.triggerWith = function (type, context, args) {\n        if (this._handlers) {\n            applyAll(this._handlers[type], context, args);\n        }\n        if (this._oneHandlers) {\n            applyAll(this._oneHandlers[type], context, args);\n            delete this._oneHandlers[type]; // will never fire again\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.hasHandlers = function (type) {\n        return (this._handlers && this._handlers[type] && this._handlers[type].length) ||\n            (this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length);\n    };\n    return EmitterMixin;\n}(Mixin));\nfunction addToHash(hash, type, handler) {\n    (hash[type] || (hash[type] = []))\n        .push(handler);\n}\nfunction removeFromHash(hash, type, handler) {\n    if (handler) {\n        if (hash[type]) {\n            hash[type] = hash[type].filter(function (func) {\n                return func !== handler;\n            });\n        }\n    }\n    else {\n        delete hash[type]; // remove all handler funcs for this type\n    }\n}\n\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\nvar PositionCache = /** @class */ (function () {\n    function PositionCache(originEl, els, isHorizontal, isVertical) {\n        this.originEl = originEl;\n        this.els = els;\n        this.isHorizontal = isHorizontal;\n        this.isVertical = isVertical;\n    }\n    // Queries the els for coordinates and stores them.\n    // Call this method before using and of the get* methods below.\n    PositionCache.prototype.build = function () {\n        var originEl = this.originEl;\n        var originClientRect = this.originClientRect =\n            originEl.getBoundingClientRect(); // relative to viewport top-left\n        if (this.isHorizontal) {\n            this.buildElHorizontals(originClientRect.left);\n        }\n        if (this.isVertical) {\n            this.buildElVerticals(originClientRect.top);\n        }\n    };\n    // Populates the left/right internal coordinate arrays\n    PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n        var lefts = [];\n        var rights = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            lefts.push(rect.left - originClientLeft);\n            rights.push(rect.right - originClientLeft);\n        }\n        this.lefts = lefts;\n        this.rights = rights;\n    };\n    // Populates the top/bottom internal coordinate arrays\n    PositionCache.prototype.buildElVerticals = function (originClientTop) {\n        var tops = [];\n        var bottoms = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            tops.push(rect.top - originClientTop);\n            bottoms.push(rect.bottom - originClientTop);\n        }\n        this.tops = tops;\n        this.bottoms = bottoms;\n    };\n    // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.leftToIndex = function (leftPosition) {\n        var lefts = this.lefts;\n        var rights = this.rights;\n        var len = lefts.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                return i;\n            }\n        }\n    };\n    // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.topToIndex = function (topPosition) {\n        var tops = this.tops;\n        var bottoms = this.bottoms;\n        var len = tops.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                return i;\n            }\n        }\n    };\n    // Gets the width of the element at the given index\n    PositionCache.prototype.getWidth = function (leftIndex) {\n        return this.rights[leftIndex] - this.lefts[leftIndex];\n    };\n    // Gets the height of the element at the given index\n    PositionCache.prototype.getHeight = function (topIndex) {\n        return this.bottoms[topIndex] - this.tops[topIndex];\n    };\n    return PositionCache;\n}());\n\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\nvar ScrollController = /** @class */ (function () {\n    function ScrollController() {\n    }\n    ScrollController.prototype.getMaxScrollTop = function () {\n        return this.getScrollHeight() - this.getClientHeight();\n    };\n    ScrollController.prototype.getMaxScrollLeft = function () {\n        return this.getScrollWidth() - this.getClientWidth();\n    };\n    ScrollController.prototype.canScrollVertically = function () {\n        return this.getMaxScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollHorizontally = function () {\n        return this.getMaxScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollUp = function () {\n        return this.getScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollDown = function () {\n        return this.getScrollTop() < this.getMaxScrollTop();\n    };\n    ScrollController.prototype.canScrollLeft = function () {\n        return this.getScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollRight = function () {\n        return this.getScrollLeft() < this.getMaxScrollLeft();\n    };\n    return ScrollController;\n}());\nvar ElementScrollController = /** @class */ (function (_super) {\n    __extends(ElementScrollController, _super);\n    function ElementScrollController(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    ElementScrollController.prototype.getScrollTop = function () {\n        return this.el.scrollTop;\n    };\n    ElementScrollController.prototype.getScrollLeft = function () {\n        return this.el.scrollLeft;\n    };\n    ElementScrollController.prototype.setScrollTop = function (top) {\n        this.el.scrollTop = top;\n    };\n    ElementScrollController.prototype.setScrollLeft = function (left) {\n        this.el.scrollLeft = left;\n    };\n    ElementScrollController.prototype.getScrollWidth = function () {\n        return this.el.scrollWidth;\n    };\n    ElementScrollController.prototype.getScrollHeight = function () {\n        return this.el.scrollHeight;\n    };\n    ElementScrollController.prototype.getClientHeight = function () {\n        return this.el.clientHeight;\n    };\n    ElementScrollController.prototype.getClientWidth = function () {\n        return this.el.clientWidth;\n    };\n    return ElementScrollController;\n}(ScrollController));\nvar WindowScrollController = /** @class */ (function (_super) {\n    __extends(WindowScrollController, _super);\n    function WindowScrollController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WindowScrollController.prototype.getScrollTop = function () {\n        return window.pageYOffset;\n    };\n    WindowScrollController.prototype.getScrollLeft = function () {\n        return window.pageXOffset;\n    };\n    WindowScrollController.prototype.setScrollTop = function (n) {\n        window.scroll(window.pageXOffset, n);\n    };\n    WindowScrollController.prototype.setScrollLeft = function (n) {\n        window.scroll(n, window.pageYOffset);\n    };\n    WindowScrollController.prototype.getScrollWidth = function () {\n        return document.documentElement.scrollWidth;\n    };\n    WindowScrollController.prototype.getScrollHeight = function () {\n        return document.documentElement.scrollHeight;\n    };\n    WindowScrollController.prototype.getClientHeight = function () {\n        return document.documentElement.clientHeight;\n    };\n    WindowScrollController.prototype.getClientWidth = function () {\n        return document.documentElement.clientWidth;\n    };\n    return WindowScrollController;\n}(ScrollController));\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar ScrollComponent = /** @class */ (function (_super) {\n    __extends(ScrollComponent, _super);\n    function ScrollComponent(overflowX, overflowY) {\n        var _this = _super.call(this, createElement('div', {\n            className: 'fc-scroller'\n        })) || this;\n        _this.overflowX = overflowX;\n        _this.overflowY = overflowY;\n        _this.applyOverflow();\n        return _this;\n    }\n    // sets to natural height, unlocks overflow\n    ScrollComponent.prototype.clear = function () {\n        this.setHeight('auto');\n        this.applyOverflow();\n    };\n    ScrollComponent.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    // Overflow\n    // -----------------------------------------------------------------------------------------------------------------\n    ScrollComponent.prototype.applyOverflow = function () {\n        applyStyle(this.el, {\n            overflowX: this.overflowX,\n            overflowY: this.overflowY\n        });\n    };\n    // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n    // Useful for preserving scrollbar widths regardless of future resizes.\n    // Can pass in scrollbarWidths for optimization.\n    ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n        var overflowX = this.overflowX;\n        var overflowY = this.overflowY;\n        scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n        if (overflowX === 'auto') {\n            overflowX = (scrollbarWidths.bottom || // horizontal scrollbars?\n                this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        if (overflowY === 'auto') {\n            overflowY = (scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n                this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        applyStyle(this.el, { overflowX: overflowX, overflowY: overflowY });\n    };\n    ScrollComponent.prototype.setHeight = function (height) {\n        applyStyleProp(this.el, 'height', height);\n    };\n    ScrollComponent.prototype.getScrollbarWidths = function () {\n        var edges = computeEdges(this.el);\n        return {\n            left: edges.scrollbarLeft,\n            right: edges.scrollbarRight,\n            bottom: edges.scrollbarBottom\n        };\n    };\n    return ScrollComponent;\n}(ElementScrollController));\n\nvar Theme = /** @class */ (function () {\n    function Theme(calendarOptions) {\n        this.calendarOptions = calendarOptions;\n        this.processIconOverride();\n    }\n    Theme.prototype.processIconOverride = function () {\n        if (this.iconOverrideOption) {\n            this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n        }\n    };\n    Theme.prototype.setIconOverride = function (iconOverrideHash) {\n        var iconClassesCopy;\n        var buttonName;\n        if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n            iconClassesCopy = __assign({}, this.iconClasses);\n            for (buttonName in iconOverrideHash) {\n                iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n            }\n            this.iconClasses = iconClassesCopy;\n        }\n        else if (iconOverrideHash === false) {\n            this.iconClasses = {};\n        }\n    };\n    Theme.prototype.applyIconOverridePrefix = function (className) {\n        var prefix = this.iconOverridePrefix;\n        if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n            className = prefix + className;\n        }\n        return className;\n    };\n    Theme.prototype.getClass = function (key) {\n        return this.classes[key] || '';\n    };\n    Theme.prototype.getIconClass = function (buttonName) {\n        var className = this.iconClasses[buttonName];\n        if (className) {\n            return this.baseIconClass + ' ' + className;\n        }\n        return '';\n    };\n    Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n        var className;\n        if (this.iconOverrideCustomButtonOption) {\n            className = customButtonProps[this.iconOverrideCustomButtonOption];\n            if (className) {\n                return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n            }\n        }\n        return '';\n    };\n    return Theme;\n}());\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\n\nvar guid = 0;\nvar ComponentContext = /** @class */ (function () {\n    function ComponentContext(calendar, theme, dateEnv, options, view) {\n        this.calendar = calendar;\n        this.theme = theme;\n        this.dateEnv = dateEnv;\n        this.options = options;\n        this.view = view;\n        this.isRtl = options.dir === 'rtl';\n        this.eventOrderSpecs = parseFieldSpecs(options.eventOrder);\n        this.nextDayThreshold = createDuration(options.nextDayThreshold);\n    }\n    ComponentContext.prototype.extend = function (options, view) {\n        return new ComponentContext(this.calendar, this.theme, this.dateEnv, options || this.options, view || this.view);\n    };\n    return ComponentContext;\n}());\nvar Component = /** @class */ (function () {\n    function Component() {\n        this.uid = String(guid++);\n    }\n    Component.addEqualityFuncs = function (newFuncs) {\n        this.prototype.equalityFuncs = __assign({}, this.prototype.equalityFuncs, newFuncs);\n    };\n    Component.prototype.receiveProps = function (props, context) {\n        var oldContext = this.context;\n        this.context = context;\n        if (!oldContext) {\n            this.firstContext(context);\n        }\n        var _a = recycleProps(this.props || {}, props, this.equalityFuncs), anyChanges = _a.anyChanges, comboProps = _a.comboProps;\n        this.props = comboProps;\n        if (anyChanges) {\n            if (oldContext) {\n                this.beforeUpdate();\n            }\n            this.render(comboProps, context);\n            if (oldContext) {\n                this.afterUpdate();\n            }\n        }\n    };\n    Component.prototype.render = function (props, context) {\n    };\n    Component.prototype.firstContext = function (context) {\n    };\n    Component.prototype.beforeUpdate = function () {\n    };\n    Component.prototype.afterUpdate = function () {\n    };\n    // after destroy is called, this component won't ever be used again\n    Component.prototype.destroy = function () {\n    };\n    return Component;\n}());\nComponent.prototype.equalityFuncs = {};\n/*\nReuses old values when equal. If anything is unequal, returns newProps as-is.\nGreat for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n*/\nfunction recycleProps(oldProps, newProps, equalityFuncs) {\n    var comboProps = {}; // some old, some new\n    var anyChanges = false;\n    for (var key in newProps) {\n        if (key in oldProps && (oldProps[key] === newProps[key] ||\n            (equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key])))) {\n            // equal to old? use old prop\n            comboProps[key] = oldProps[key];\n        }\n        else {\n            comboProps[key] = newProps[key];\n            anyChanges = true;\n        }\n    }\n    for (var key in oldProps) {\n        if (!(key in newProps)) {\n            anyChanges = true;\n            break;\n        }\n    }\n    return { anyChanges: anyChanges, comboProps: comboProps };\n}\n\n/*\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\nvar DateComponent = /** @class */ (function (_super) {\n    __extends(DateComponent, _super);\n    function DateComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    DateComponent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        removeElement(this.el);\n    };\n    // Hit System\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.buildPositionCaches = function () {\n    };\n    DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        return null; // this should be abstract\n    };\n    // Validation\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isInteractionValid = function (interaction) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        var instances = interaction.mutatedEvents.instances;\n        if (dateProfile) { // HACK for DayTile\n            for (var instanceId in instances) {\n                if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n                    return false;\n                }\n            }\n        }\n        return isInteractionValid(interaction, calendar);\n    };\n    DateComponent.prototype.isDateSelectionValid = function (selection) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        if (dateProfile && // HACK for DayTile\n            !rangeContainsRange(dateProfile.validRange, selection.range)) {\n            return false;\n        }\n        return isDateSelectionValid(selection, calendar);\n    };\n    // Pointer Interaction Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isValidSegDownEl = function (el) {\n        return !this.props.eventDrag && // HACK\n            !this.props.eventResize && // HACK\n            !elementClosest(el, '.fc-mirror') &&\n            (this.isPopover() || !this.isInPopover(el));\n        // ^above line ensures we don't detect a seg interaction within a nested component.\n        // it's a HACK because it only supports a popover as the nested component.\n    };\n    DateComponent.prototype.isValidDateDownEl = function (el) {\n        var segEl = elementClosest(el, this.fgSegSelector);\n        return (!segEl || segEl.classList.contains('fc-mirror')) &&\n            !elementClosest(el, '.fc-more') && // a \"more..\" link\n            !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n            !this.isInPopover(el);\n    };\n    DateComponent.prototype.isPopover = function () {\n        return this.el.classList.contains('fc-popover');\n    };\n    DateComponent.prototype.isInPopover = function (el) {\n        return Boolean(elementClosest(el, '.fc-popover'));\n    };\n    return DateComponent;\n}(Component));\nDateComponent.prototype.fgSegSelector = '.fc-event-container > *';\nDateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\n\nvar uid$1 = 0;\nfunction createPlugin(input) {\n    return {\n        id: String(uid$1++),\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        eventDefParsers: input.eventDefParsers || [],\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n        viewContainerModifiers: input.viewContainerModifiers || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        defaultView: input.defaultView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {}\n    };\n}\nvar PluginSystem = /** @class */ (function () {\n    function PluginSystem() {\n        this.hooks = {\n            reducers: [],\n            eventDefParsers: [],\n            isDraggableTransformers: [],\n            eventDragMutationMassagers: [],\n            eventDefMutationAppliers: [],\n            dateSelectionTransformers: [],\n            datePointTransforms: [],\n            dateSpanTransforms: [],\n            views: {},\n            viewPropsTransformers: [],\n            isPropsValid: null,\n            externalDefTransforms: [],\n            eventResizeJoinTransforms: [],\n            viewContainerModifiers: [],\n            eventDropTransformers: [],\n            componentInteractions: [],\n            calendarInteractions: [],\n            themeClasses: {},\n            eventSourceDefs: [],\n            cmdFormatter: null,\n            recurringTypes: [],\n            namedTimeZonedImpl: null,\n            defaultView: '',\n            elementDraggingImpl: null,\n            optionChangeHandlers: {}\n        };\n        this.addedHash = {};\n    }\n    PluginSystem.prototype.add = function (plugin) {\n        if (!this.addedHash[plugin.id]) {\n            this.addedHash[plugin.id] = true;\n            for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n                var dep = _a[_i];\n                this.add(dep);\n            }\n            this.hooks = combineHooks(this.hooks, plugin);\n        }\n    };\n    return PluginSystem;\n}());\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: __assign({}, hooks0.views, hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n        viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: __assign({}, hooks0.themeClasses, hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        defaultView: hooks0.defaultView || hooks1.defaultView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: __assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n    };\n}\n\nvar eventSourceDef = {\n    ignoreRange: true,\n    parseMeta: function (raw) {\n        if (Array.isArray(raw)) { // short form\n            return raw;\n        }\n        else if (Array.isArray(raw.events)) {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success) {\n        success({\n            rawEvents: arg.eventSource.meta\n        });\n    }\n};\nvar ArrayEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef]\n});\n\nvar eventSourceDef$1 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'function') { // short form\n            return raw;\n        }\n        else if (typeof raw.events === 'function') {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.calendar.dateEnv;\n        var func = arg.eventSource.meta;\n        unpromisify(func.bind(null, {\n            start: dateEnv.toDate(arg.range.start),\n            end: dateEnv.toDate(arg.range.end),\n            startStr: dateEnv.formatIso(arg.range.start),\n            endStr: dateEnv.formatIso(arg.range.end),\n            timeZone: dateEnv.timeZone\n        }), function (rawEvents) {\n            success({ rawEvents: rawEvents }); // needs an object response\n        }, failure // send errorObj directly to failure callback\n        );\n    }\n};\nvar FuncEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$1]\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n    method = method.toUpperCase();\n    var body = null;\n    if (method === 'GET') {\n        url = injectQueryStringParams(url, params);\n    }\n    else {\n        body = encodeParams(params);\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    if (method !== 'GET') {\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            try {\n                var res = JSON.parse(xhr.responseText);\n                successCallback(res, xhr);\n            }\n            catch (err) {\n                failureCallback('Failure parsing JSON', xhr);\n            }\n        }\n        else {\n            failureCallback('Request failed', xhr);\n        }\n    };\n    xhr.onerror = function () {\n        failureCallback('Request failed', xhr);\n    };\n    xhr.send(body);\n}\nfunction injectQueryStringParams(url, params) {\n    return url +\n        (url.indexOf('?') === -1 ? '?' : '&') +\n        encodeParams(params);\n}\nfunction encodeParams(params) {\n    var parts = [];\n    for (var key in params) {\n        parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n    }\n    return parts.join('&');\n}\n\nvar eventSourceDef$2 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'string') { // short form\n            raw = { url: raw };\n        }\n        else if (!raw || typeof raw !== 'object' || !raw.url) {\n            return null;\n        }\n        return {\n            url: raw.url,\n            method: (raw.method || 'GET').toUpperCase(),\n            extraParams: raw.extraParams,\n            startParam: raw.startParam,\n            endParam: raw.endParam,\n            timeZoneParam: raw.timeZoneParam\n        };\n    },\n    fetch: function (arg, success, failure) {\n        var meta = arg.eventSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n        requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n            success({ rawEvents: rawEvents, xhr: xhr });\n        }, function (errorMessage, xhr) {\n            failure({ message: errorMessage, xhr: xhr });\n        });\n    }\n};\nvar JsonFeedEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$2]\n});\nfunction buildRequestParams(meta, range, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = calendar.opt('startParam');\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = calendar.opt('endParam');\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = calendar.opt('timeZoneParam');\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nvar recurring = {\n    parse: function (rawEvent, leftoverProps, dateEnv) {\n        var createMarker = dateEnv.createMarker.bind(dateEnv);\n        var processors = {\n            daysOfWeek: null,\n            startTime: createDuration,\n            endTime: createDuration,\n            startRecur: createMarker,\n            endRecur: createMarker\n        };\n        var props = refineProps(rawEvent, processors, {}, leftoverProps);\n        var anyValid = false;\n        for (var propName in props) {\n            if (props[propName] != null) {\n                anyValid = true;\n                break;\n            }\n        }\n        if (anyValid) {\n            var duration = null;\n            if ('duration' in leftoverProps) {\n                duration = createDuration(leftoverProps.duration);\n                delete leftoverProps.duration;\n            }\n            if (!duration && props.startTime && props.endTime) {\n                duration = subtractDurations(props.endTime, props.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!props.startTime && !props.endTime),\n                duration: duration,\n                typeData: props // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand: function (typeData, framingRange, dateEnv) {\n        var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        else {\n            return [];\n        }\n    }\n};\nvar SimpleRecurrencePlugin = createPlugin({\n    recurringTypes: [recurring]\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    var dayMarker = startOfDay(framingRange.start);\n    var endMarker = framingRange.end;\n    var instanceStarts = [];\n    while (dayMarker < endMarker) {\n        var instanceStart \n        // if everyday, or this particular day-of-week\n        = void 0;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nvar DefaultOptionChangeHandlers = createPlugin({\n    optionChangeHandlers: {\n        events: function (events, calendar, deepEqual) {\n            handleEventSources([events], calendar, deepEqual);\n        },\n        eventSources: handleEventSources,\n        plugins: handlePlugins\n    }\n});\nfunction handleEventSources(inputs, calendar, deepEqual) {\n    var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n    var newInputs = [];\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        var inputFound = false;\n        for (var i = 0; i < unfoundSources.length; i++) {\n            if (deepEqual(unfoundSources[i]._raw, input)) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n        var unfoundSource = unfoundSources_1[_a];\n        calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId\n        });\n    }\n    for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n        var newInput = newInputs_1[_b];\n        calendar.addEventSource(newInput);\n    }\n}\n// shortcoming: won't remove plugins\nfunction handlePlugins(inputs, calendar) {\n    calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n}\n\nvar config = {}; // TODO: make these options\nvar globalDefaults = {\n    defaultRangeSeparator: ' - ',\n    titleRangeSeparator: ' \\u2013 ',\n    defaultTimedEventDuration: '01:00:00',\n    defaultAllDayEventDuration: { day: 1 },\n    forceEventDuration: false,\n    nextDayThreshold: '00:00:00',\n    // display\n    columnHeader: true,\n    defaultView: '',\n    aspectRatio: 1.35,\n    header: {\n        left: 'title',\n        center: '',\n        right: 'today prev,next'\n    },\n    weekends: true,\n    weekNumbers: false,\n    weekNumberCalculation: 'local',\n    editable: false,\n    // nowIndicator: false,\n    scrollTime: '06:00:00',\n    minTime: '00:00:00',\n    maxTime: '24:00:00',\n    showNonCurrentDates: true,\n    // event ajax\n    lazyFetching: true,\n    startParam: 'start',\n    endParam: 'end',\n    timeZoneParam: 'timeZone',\n    timeZone: 'local',\n    // allDayDefault: undefined,\n    // locale\n    locales: [],\n    locale: '',\n    // dir: will get this from the default locale\n    // buttonIcons: null,\n    // allows setting a min-height to the event segment to prevent short events overlapping each other\n    timeGridEventMinHeight: 0,\n    themeSystem: 'standard',\n    // eventResizableFromStart: false,\n    dragRevertDuration: 500,\n    dragScroll: true,\n    allDayMaintainDuration: false,\n    // selectable: false,\n    unselectAuto: true,\n    // selectMinDistance: 0,\n    dropAccept: '*',\n    eventOrder: 'start,-duration,allDay,title',\n    // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n    // rerenderDelay: null,\n    eventLimit: false,\n    eventLimitClick: 'popover',\n    dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n    handleWindowResize: true,\n    windowResizeDelay: 100,\n    longPressDelay: 1000,\n    eventDragMinDistance: 5 // only applies to mouse\n};\nvar rtlDefaults = {\n    header: {\n        left: 'next,prev today',\n        center: '',\n        right: 'title'\n    },\n    buttonIcons: {\n        // TODO: make RTL support the responibility of the theme\n        prev: 'fc-icon-chevron-right',\n        next: 'fc-icon-chevron-left',\n        prevYear: 'fc-icon-chevrons-right',\n        nextYear: 'fc-icon-chevrons-left'\n    }\n};\nvar complexOptions = [\n    'header',\n    'footer',\n    'buttonText',\n    'buttonIcons'\n];\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n    return mergeProps(optionObjs, complexOptions);\n}\n// TODO: move this stuff to a \"plugin\"-related file...\nvar INTERNAL_PLUGINS = [\n    ArrayEventSourcePlugin,\n    FuncEventSourcePlugin,\n    JsonFeedEventSourcePlugin,\n    SimpleRecurrencePlugin,\n    DefaultOptionChangeHandlers\n];\nfunction refinePluginDefs(pluginInputs) {\n    var plugins = [];\n    for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n        var pluginInput = pluginInputs_1[_i];\n        if (typeof pluginInput === 'string') {\n            var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n            if (!window[globalName]) {\n                console.warn('Plugin file not loaded for ' + pluginInput);\n            }\n            else {\n                plugins.push(window[globalName].default); // is an ES6 module\n            }\n        }\n        else {\n            plugins.push(pluginInput);\n        }\n    }\n    return INTERNAL_PLUGINS.concat(plugins);\n}\n\nvar RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4 // 4 days need to be within the year to be considered the first week\n    },\n    dir: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list'\n    },\n    weekLabel: 'W',\n    allDayText: 'all-day',\n    eventLimitText: 'more',\n    noEventsMessage: 'No events to display'\n};\nfunction parseRawLocales(explicitRawLocales) {\n    var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n    var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n    var allRawLocales = globalArray.concat(// globalArray is low prio\n    hashValuesToArray(globalObject), // medium prio\n    explicitRawLocales // highest prio\n    );\n    var rawLocaleMap = {\n        en: RAW_EN_LOCALE // necessary?\n    };\n    for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n        var rawLocale = allRawLocales_1[_i];\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode: defaultCode\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    else {\n        return queryLocale(inputSingular, available);\n    }\n}\nfunction queryLocale(codeArg, available) {\n    var codes = [].concat(codeArg || []); // will convert to array\n    var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (var i = 0; i < codes.length; i++) {\n        var parts = codes[i].toLocaleLowerCase().split('-');\n        for (var j = parts.length; j > 0; j--) {\n            var simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    var week = merged.week;\n    delete merged.week;\n    return {\n        codeArg: codeArg,\n        codes: codes,\n        week: week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged\n    };\n}\n\nvar OptionsManager = /** @class */ (function () {\n    function OptionsManager(overrides) {\n        this.overrides = __assign({}, overrides); // make a copy\n        this.dynamicOverrides = {};\n        this.compute();\n    }\n    OptionsManager.prototype.mutate = function (updates, removals, isDynamic) {\n        if (!Object.keys(updates).length && !removals.length) {\n            return;\n        }\n        var overrideHash = isDynamic ? this.dynamicOverrides : this.overrides;\n        __assign(overrideHash, updates);\n        for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n            var propName = removals_1[_i];\n            delete overrideHash[propName];\n        }\n        this.compute();\n    };\n    // Computes the flattened options hash for the calendar and assigns to `this.options`.\n    // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n    OptionsManager.prototype.compute = function () {\n        // TODO: not a very efficient system\n        var locales = firstDefined(// explicit locale option given?\n        this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n        var locale = firstDefined(// explicit locales option given?\n        this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n        var available = parseRawLocales(locales);\n        var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n        var dir = firstDefined(// based on options computed so far, is direction RTL?\n        this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n        var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n        this.dirDefaults = dirDefaults;\n        this.localeDefaults = localeDefaults;\n        this.computed = mergeOptions([\n            globalDefaults,\n            dirDefaults,\n            localeDefaults,\n            this.overrides,\n            this.dynamicOverrides\n        ]);\n    };\n    return OptionsManager;\n}());\n\nvar calendarSystemClassMap = {};\nfunction registerCalendarSystem(name, theClass) {\n    calendarSystemClassMap[name] = theClass;\n}\nfunction createCalendarSystem(name) {\n    return new calendarSystemClassMap[name]();\n}\nvar GregorianCalendarSystem = /** @class */ (function () {\n    function GregorianCalendarSystem() {\n    }\n    GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n        return d.getUTCFullYear();\n    };\n    GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n        return d.getUTCMonth();\n    };\n    GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n        return d.getUTCDate();\n    };\n    GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n        return arrayToUtcDate(arr);\n    };\n    GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n        return dateToUtcArray(marker);\n    };\n    return GregorianCalendarSystem;\n}());\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\n\nvar ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\nfunction parse(str) {\n    var m = ISO_RE.exec(str);\n    if (m) {\n        var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n        if (isValidDate(marker)) {\n            var timeZoneOffset = null;\n            if (m[13]) {\n                timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                    Number(m[18] || 0));\n            }\n            return {\n                marker: marker,\n                isTimeUnspecified: !m[6],\n                timeZoneOffset: timeZoneOffset\n            };\n        }\n    }\n    return null;\n}\n\nvar DateEnv = /** @class */ (function () {\n    function DateEnv(settings) {\n        var timeZone = this.timeZone = settings.timeZone;\n        var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n        if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n            this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n        }\n        this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n        this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n        this.locale = settings.locale;\n        this.weekDow = settings.locale.week.dow;\n        this.weekDoy = settings.locale.week.doy;\n        if (settings.weekNumberCalculation === 'ISO') {\n            this.weekDow = 1;\n            this.weekDoy = 4;\n        }\n        if (typeof settings.firstDay === 'number') {\n            this.weekDow = settings.firstDay;\n        }\n        if (typeof settings.weekNumberCalculation === 'function') {\n            this.weekNumberFunc = settings.weekNumberCalculation;\n        }\n        this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n        this.cmdFormatter = settings.cmdFormatter;\n    }\n    // Creating / Parsing\n    DateEnv.prototype.createMarker = function (input) {\n        var meta = this.createMarkerMeta(input);\n        if (meta === null) {\n            return null;\n        }\n        return meta.marker;\n    };\n    DateEnv.prototype.createNowMarker = function () {\n        if (this.canComputeOffset) {\n            return this.timestampToMarker(new Date().valueOf());\n        }\n        else {\n            // if we can't compute the current date val for a timezone,\n            // better to give the current local date vals than UTC\n            return arrayToUtcDate(dateToLocalArray(new Date()));\n        }\n    };\n    DateEnv.prototype.createMarkerMeta = function (input) {\n        if (typeof input === 'string') {\n            return this.parse(input);\n        }\n        var marker = null;\n        if (typeof input === 'number') {\n            marker = this.timestampToMarker(input);\n        }\n        else if (input instanceof Date) {\n            input = input.valueOf();\n            if (!isNaN(input)) {\n                marker = this.timestampToMarker(input);\n            }\n        }\n        else if (Array.isArray(input)) {\n            marker = arrayToUtcDate(input);\n        }\n        if (marker === null || !isValidDate(marker)) {\n            return null;\n        }\n        return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n    };\n    DateEnv.prototype.parse = function (s) {\n        var parts = parse(s);\n        if (parts === null) {\n            return null;\n        }\n        var marker = parts.marker;\n        var forcedTzo = null;\n        if (parts.timeZoneOffset !== null) {\n            if (this.canComputeOffset) {\n                marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n            }\n            else {\n                forcedTzo = parts.timeZoneOffset;\n            }\n        }\n        return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n    };\n    // Accessors\n    DateEnv.prototype.getYear = function (marker) {\n        return this.calendarSystem.getMarkerYear(marker);\n    };\n    DateEnv.prototype.getMonth = function (marker) {\n        return this.calendarSystem.getMarkerMonth(marker);\n    };\n    // Adding / Subtracting\n    DateEnv.prototype.add = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += dur.years;\n        a[1] += dur.months;\n        a[2] += dur.days;\n        a[6] += dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.subtract = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] -= dur.years;\n        a[1] -= dur.months;\n        a[2] -= dur.days;\n        a[6] -= dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addYears = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addMonths = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[1] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    // Diffing Whole Units\n    DateEnv.prototype.diffWholeYears = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n            calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n            return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n        }\n        return null;\n    };\n    DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n            return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n        }\n        return null;\n    };\n    // Range / Duration\n    DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n        var n = this.diffWholeYears(m0, m1);\n        if (n !== null) {\n            return { unit: 'year', value: n };\n        }\n        n = this.diffWholeMonths(m0, m1);\n        if (n !== null) {\n            return { unit: 'month', value: n };\n        }\n        n = diffWholeWeeks(m0, m1);\n        if (n !== null) {\n            return { unit: 'week', value: n };\n        }\n        n = diffWholeDays(m0, m1);\n        if (n !== null) {\n            return { unit: 'day', value: n };\n        }\n        n = diffHours(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'hour', value: n };\n        }\n        n = diffMinutes(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'minute', value: n };\n        }\n        n = diffSeconds(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'second', value: n };\n        }\n        return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n    };\n    DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n        // TODO: can use greatestWholeUnit\n        var diff;\n        if (d.years) {\n            diff = this.diffWholeYears(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughYears(d);\n            }\n        }\n        if (d.months) {\n            diff = this.diffWholeMonths(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughMonths(d);\n            }\n        }\n        if (d.days) {\n            diff = diffWholeDays(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughDays(d);\n            }\n        }\n        return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n    };\n    // Start-Of\n    DateEnv.prototype.startOf = function (m, unit) {\n        if (unit === 'year') {\n            return this.startOfYear(m);\n        }\n        else if (unit === 'month') {\n            return this.startOfMonth(m);\n        }\n        else if (unit === 'week') {\n            return this.startOfWeek(m);\n        }\n        else if (unit === 'day') {\n            return startOfDay(m);\n        }\n        else if (unit === 'hour') {\n            return startOfHour(m);\n        }\n        else if (unit === 'minute') {\n            return startOfMinute(m);\n        }\n        else if (unit === 'second') {\n            return startOfSecond(m);\n        }\n    };\n    DateEnv.prototype.startOfYear = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m)\n        ]);\n    };\n    DateEnv.prototype.startOfMonth = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m)\n        ]);\n    };\n    DateEnv.prototype.startOfWeek = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n            m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7)\n        ]);\n    };\n    // Week Number\n    DateEnv.prototype.computeWeekNumber = function (marker) {\n        if (this.weekNumberFunc) {\n            return this.weekNumberFunc(this.toDate(marker));\n        }\n        else {\n            return weekOfYear(marker, this.weekDow, this.weekDoy);\n        }\n    };\n    // TODO: choke on timeZoneName: long\n    DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        return formatter.format({\n            marker: marker,\n            timeZoneOffset: dateOptions.forcedTzo != null ?\n                dateOptions.forcedTzo :\n                this.offsetForMarker(marker)\n        }, this);\n    };\n    DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        if (dateOptions.isEndExclusive) {\n            end = addMs(end, -1);\n        }\n        return formatter.formatRange({\n            marker: start,\n            timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                dateOptions.forcedStartTzo :\n                this.offsetForMarker(start)\n        }, {\n            marker: end,\n            timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                dateOptions.forcedEndTzo :\n                this.offsetForMarker(end)\n        }, this);\n    };\n    DateEnv.prototype.formatIso = function (marker, extraOptions) {\n        if (extraOptions === void 0) { extraOptions = {}; }\n        var timeZoneOffset = null;\n        if (!extraOptions.omitTimeZoneOffset) {\n            if (extraOptions.forcedTzo != null) {\n                timeZoneOffset = extraOptions.forcedTzo;\n            }\n            else {\n                timeZoneOffset = this.offsetForMarker(marker);\n            }\n        }\n        return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n    };\n    // TimeZone\n    DateEnv.prototype.timestampToMarker = function (ms) {\n        if (this.timeZone === 'local') {\n            return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n        }\n        else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n            return new Date(ms);\n        }\n        else {\n            return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n        }\n    };\n    DateEnv.prototype.offsetForMarker = function (m) {\n        if (this.timeZone === 'local') {\n            return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n        }\n        else if (this.timeZone === 'UTC') {\n            return 0;\n        }\n        else if (this.namedTimeZoneImpl) {\n            return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n        }\n        return null;\n    };\n    // Conversion\n    DateEnv.prototype.toDate = function (m, forcedTzo) {\n        if (this.timeZone === 'local') {\n            return arrayToLocalDate(dateToUtcArray(m));\n        }\n        else if (this.timeZone === 'UTC') {\n            return new Date(m.valueOf()); // make sure it's a copy\n        }\n        else if (!this.namedTimeZoneImpl) {\n            return new Date(m.valueOf() - (forcedTzo || 0));\n        }\n        else {\n            return new Date(m.valueOf() -\n                this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n            );\n        }\n    };\n    return DateEnv;\n}());\n\nvar SIMPLE_SOURCE_PROPS = {\n    id: String,\n    allDayDefault: Boolean,\n    eventDataTransform: Function,\n    success: Function,\n    failure: Function\n};\nvar uid$2 = 0;\nfunction doesSourceNeedRange(eventSource, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\nfunction parseEventSource(raw, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(raw);\n        if (meta) {\n            var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n            res._raw = raw;\n            return res;\n        }\n    }\n    return null;\n}\nfunction parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n    var leftovers0 = {};\n    var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n    var leftovers1 = {};\n    var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n    props.isFetching = false;\n    props.latestFetchId = '';\n    props.fetchRange = null;\n    props.publicId = String(raw.id || '');\n    props.sourceId = String(uid$2++);\n    props.sourceDefId = sourceDefId;\n    props.meta = meta;\n    props.ui = ui;\n    props.extendedProps = leftovers1;\n    return props;\n}\n\nfunction reduceEventSources (eventSources, action, dateProfile, calendar) {\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventSources;\n            }\n        case 'FETCH_EVENT_SOURCES':\n        case 'CHANGE_TIMEZONE':\n            return fetchSourcesByIds(eventSources, action.sourceIds ?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nvar uid$3 = 0;\nfunction addSources(eventSourceHash, sources, fetchRange, calendar) {\n    var hash = {};\n    for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n        var source = sources_1[_i];\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, calendar);\n    }\n    return __assign({}, eventSourceHash, hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, function (eventSource) {\n        return eventSource.sourceId !== sourceId;\n    });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, calendar) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n        return isSourceDirty(eventSource, fetchRange, calendar);\n    }), fetchRange, calendar);\n}\nfunction isSourceDirty(eventSource, fetchRange, calendar) {\n    if (!doesSourceNeedRange(eventSource, calendar)) {\n        return !eventSource.latestFetchId;\n    }\n    else {\n        return !calendar.opt('lazyFetching') ||\n            !eventSource.fetchRange ||\n            eventSource.isFetching || // always cancel outdated in-progress fetches\n            fetchRange.start < eventSource.fetchRange.start ||\n            fetchRange.end > eventSource.fetchRange.end;\n    }\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n    var nextSources = {};\n    for (var sourceId in prevSources) {\n        var source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, calendar) {\n    var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n    var fetchId = String(uid$3++);\n    sourceDef.fetch({\n        eventSource: eventSource,\n        calendar: calendar,\n        range: fetchRange\n    }, function (res) {\n        var rawEvents = res.rawEvents;\n        var calSuccess = calendar.opt('eventSourceSuccess');\n        var calSuccessRes;\n        var sourceSuccessRes;\n        if (eventSource.success) {\n            sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n        }\n        if (calSuccess) {\n            calSuccessRes = calSuccess(rawEvents, res.xhr);\n        }\n        rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n        calendar.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawEvents: rawEvents\n        });\n    }, function (error) {\n        var callFailure = calendar.opt('eventSourceFailure');\n        console.warn(error.message, error);\n        if (eventSource.failure) {\n            eventSource.failure(error);\n        }\n        if (callFailure) {\n            callFailure(error);\n        }\n        calendar.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error\n        });\n    });\n    return __assign({}, eventSource, { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    var _a;\n    var eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return __assign({}, sourceHash, (_a = {}, _a[sourceId] = __assign({}, eventSource, { isFetching: false, fetchRange: fetchRange // also serves as a marker that at least one fetch has completed\n         }), _a));\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, calendar) {\n    return filterHash(eventSources, function (eventSource) {\n        return doesSourceNeedRange(eventSource, calendar);\n    });\n}\n\nvar DateProfileGenerator = /** @class */ (function () {\n    function DateProfileGenerator(viewSpec, calendar) {\n        this.viewSpec = viewSpec;\n        this.options = viewSpec.options;\n        this.dateEnv = calendar.dateEnv;\n        this.calendar = calendar;\n        this.initHiddenDays();\n    }\n    /* Date Range Computation\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n    DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(prevDate, -1);\n    };\n    // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n    DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(nextDate, 1);\n    };\n    // Builds a structure holding dates/ranges for rendering around the given date.\n    // Optional direction param indicates whether the date is being incremented/decremented\n    // from its previous value. decremented = -1, incremented = 1 (default).\n    DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n        if (forceToValid === void 0) { forceToValid = false; }\n        var validRange;\n        var minTime = null;\n        var maxTime = null;\n        var currentInfo;\n        var isRangeAllDay;\n        var renderRange;\n        var activeRange;\n        var isValid;\n        validRange = this.buildValidRange();\n        validRange = this.trimHiddenDays(validRange);\n        if (forceToValid) {\n            currentDate = constrainMarkerToRange(currentDate, validRange);\n        }\n        currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n        isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n        renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n        renderRange = this.trimHiddenDays(renderRange);\n        activeRange = renderRange;\n        if (!this.options.showNonCurrentDates) {\n            activeRange = intersectRanges(activeRange, currentInfo.range);\n        }\n        minTime = createDuration(this.options.minTime);\n        maxTime = createDuration(this.options.maxTime);\n        activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n        activeRange = intersectRanges(activeRange, validRange); // might return null\n        // it's invalid if the originally requested date is not contained,\n        // or if the range is completely outside of the valid range.\n        isValid = rangesIntersect(currentInfo.range, validRange);\n        return {\n            // constraint for where prev/next operations can go and where events can be dragged/resized to.\n            // an object with optional start and end properties.\n            validRange: validRange,\n            // range the view is formally responsible for.\n            // for example, a month view might have 1st-31st, excluding padded dates\n            currentRange: currentInfo.range,\n            // name of largest unit being displayed, like \"month\" or \"week\"\n            currentRangeUnit: currentInfo.unit,\n            isRangeAllDay: isRangeAllDay,\n            // dates that display events and accept drag-n-drop\n            // will be `null` if no dates accept events\n            activeRange: activeRange,\n            // date range with a rendered skeleton\n            // includes not-active days that need some sort of DOM\n            renderRange: renderRange,\n            // Duration object that denotes the first visible time of any given day\n            minTime: minTime,\n            // Duration object that denotes the exclusive visible end time of any given day\n            maxTime: maxTime,\n            isValid: isValid,\n            // how far the current date will move for a prev/next operation\n            dateIncrement: this.buildDateIncrement(currentInfo.duration)\n            // pass a fallback (might be null) ^\n        };\n    };\n    // Builds an object with optional start/end properties.\n    // Indicates the minimum/maximum dates to display.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildValidRange = function () {\n        return this.getRangeOption('validRange', this.calendar.getNow()) ||\n            { start: null, end: null }; // completely open-ended\n    };\n    // Builds a structure with info about the \"current\" range, the range that is\n    // highlighted as being the current month for example.\n    // See build() for a description of `direction`.\n    // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n    DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n        var _a = this, viewSpec = _a.viewSpec, dateEnv = _a.dateEnv;\n        var duration = null;\n        var unit = null;\n        var range = null;\n        var dayCount;\n        if (viewSpec.duration) {\n            duration = viewSpec.duration;\n            unit = viewSpec.durationUnit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        else if ((dayCount = this.options.dayCount)) {\n            unit = 'day';\n            range = this.buildRangeFromDayCount(date, direction, dayCount);\n        }\n        else if ((range = this.buildCustomVisibleRange(date))) {\n            unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n        }\n        else {\n            duration = this.getFallbackDuration();\n            unit = greatestDurationDenominator(duration).unit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        return { duration: duration, unit: unit, range: range };\n    };\n    DateProfileGenerator.prototype.getFallbackDuration = function () {\n        return createDuration({ day: 1 });\n    };\n    // Returns a new activeRange to have time values (un-ambiguate)\n    // minTime or maxTime causes the range to expand.\n    DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n        var dateEnv = this.dateEnv;\n        var start = range.start;\n        var end = range.end;\n        if (this.viewSpec.class.prototype.usesMinMaxTime) {\n            // expand active range if minTime is negative (why not when positive?)\n            if (asRoughDays(minTime) < 0) {\n                start = startOfDay(start); // necessary?\n                start = dateEnv.add(start, minTime);\n            }\n            // expand active range if maxTime is beyond one day (why not when positive?)\n            if (asRoughDays(maxTime) > 1) {\n                end = startOfDay(end); // necessary?\n                end = addDays(end, -1);\n                end = dateEnv.add(end, maxTime);\n            }\n        }\n        return { start: start, end: end };\n    };\n    // Builds the \"current\" range when it is specified as an explicit duration.\n    // `unit` is the already-computed greatestDurationDenominator unit of duration.\n    DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n        var dateEnv = this.dateEnv;\n        var alignment = this.options.dateAlignment;\n        var dateIncrementInput;\n        var dateIncrementDuration;\n        var start;\n        var end;\n        var res;\n        // compute what the alignment should be\n        if (!alignment) {\n            dateIncrementInput = this.options.dateIncrement;\n            if (dateIncrementInput) {\n                dateIncrementDuration = createDuration(dateIncrementInput);\n                // use the smaller of the two units\n                if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n                    alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n                }\n                else {\n                    alignment = unit;\n                }\n            }\n            else {\n                alignment = unit;\n            }\n        }\n        // if the view displays a single day or smaller\n        if (asRoughDays(duration) <= 1) {\n            if (this.isHiddenDay(start)) {\n                start = this.skipHiddenDays(start, direction);\n                start = startOfDay(start);\n            }\n        }\n        function computeRes() {\n            start = dateEnv.startOf(date, alignment);\n            end = dateEnv.add(start, duration);\n            res = { start: start, end: end };\n        }\n        computeRes();\n        // if range is completely enveloped by hidden days, go past the hidden days\n        if (!this.trimHiddenDays(res)) {\n            date = this.skipHiddenDays(date, direction);\n            computeRes();\n        }\n        return res;\n    };\n    // Builds the \"current\" range when a dayCount is specified.\n    DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n        var dateEnv = this.dateEnv;\n        var customAlignment = this.options.dateAlignment;\n        var runningCount = 0;\n        var start = date;\n        var end;\n        if (customAlignment) {\n            start = dateEnv.startOf(start, customAlignment);\n        }\n        start = startOfDay(start);\n        start = this.skipHiddenDays(start, direction);\n        end = start;\n        do {\n            end = addDays(end, 1);\n            if (!this.isHiddenDay(end)) {\n                runningCount++;\n            }\n        } while (runningCount < dayCount);\n        return { start: start, end: end };\n    };\n    // Builds a normalized range object for the \"visible\" range,\n    // which is a way to define the currentRange and activeRange at the same time.\n    DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n        var dateEnv = this.dateEnv;\n        var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n        if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n            return null;\n        }\n        return visibleRange;\n    };\n    // Computes the range that will represent the element/cells for *rendering*,\n    // but which may have voided days/times.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        return currentRange;\n    };\n    // Compute the duration value that should be added/substracted to the current date\n    // when a prev/next operation happens.\n    DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n        var dateIncrementInput = this.options.dateIncrement;\n        var customAlignment;\n        if (dateIncrementInput) {\n            return createDuration(dateIncrementInput);\n        }\n        else if ((customAlignment = this.options.dateAlignment)) {\n            return createDuration(1, customAlignment);\n        }\n        else if (fallback) {\n            return fallback;\n        }\n        else {\n            return createDuration({ days: 1 });\n        }\n    };\n    // Arguments after name will be forwarded to a hypothetical function value\n    // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n    // Always clone your objects if you fear mutation.\n    DateProfileGenerator.prototype.getRangeOption = function (name) {\n        var otherArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            otherArgs[_i - 1] = arguments[_i];\n        }\n        var val = this.options[name];\n        if (typeof val === 'function') {\n            val = val.apply(null, otherArgs);\n        }\n        if (val) {\n            val = parseRange(val, this.dateEnv);\n        }\n        if (val) {\n            val = computeVisibleDayRange(val);\n        }\n        return val;\n    };\n    /* Hidden Days\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Initializes internal variables related to calculating hidden days-of-week\n    DateProfileGenerator.prototype.initHiddenDays = function () {\n        var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n        var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n        var dayCnt = 0;\n        var i;\n        if (this.options.weekends === false) {\n            hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n        }\n        for (i = 0; i < 7; i++) {\n            if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                dayCnt++;\n            }\n        }\n        if (!dayCnt) {\n            throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n        }\n        this.isHiddenDayHash = isHiddenDayHash;\n    };\n    // Remove days from the beginning and end of the range that are computed as hidden.\n    // If the whole range is trimmed off, returns null\n    DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n        var start = range.start;\n        var end = range.end;\n        if (start) {\n            start = this.skipHiddenDays(start);\n        }\n        if (end) {\n            end = this.skipHiddenDays(end, -1, true);\n        }\n        if (start == null || end == null || start < end) {\n            return { start: start, end: end };\n        }\n        return null;\n    };\n    // Is the current day hidden?\n    // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n    DateProfileGenerator.prototype.isHiddenDay = function (day) {\n        if (day instanceof Date) {\n            day = day.getUTCDay();\n        }\n        return this.isHiddenDayHash[day];\n    };\n    // Incrementing the current day until it is no longer a hidden day, returning a copy.\n    // DOES NOT CONSIDER validRange!\n    // If the initial value of `date` is not a hidden day, don't do anything.\n    // Pass `isExclusive` as `true` if you are dealing with an end date.\n    // `inc` defaults to `1` (increment one day forward each time)\n    DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n        if (inc === void 0) { inc = 1; }\n        if (isExclusive === void 0) { isExclusive = false; }\n        while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n            date = addDays(date, inc);\n        }\n        return date;\n    };\n    return DateProfileGenerator;\n}());\n// TODO: find a way to avoid comparing DateProfiles. it's tedious\nfunction isDateProfilesEqual(p0, p1) {\n    return rangesEqual(p0.validRange, p1.validRange) &&\n        rangesEqual(p0.activeRange, p1.activeRange) &&\n        rangesEqual(p0.renderRange, p1.renderRange) &&\n        durationsEqual(p0.minTime, p1.minTime) &&\n        durationsEqual(p0.maxTime, p1.maxTime);\n    /*\n    TODO: compare more?\n      currentRange: DateRange\n      currentRangeUnit: string\n      isRangeAllDay: boolean\n      isValid: boolean\n      dateIncrement: Duration\n    */\n}\n\nfunction reduce (state, action, calendar) {\n    var viewType = reduceViewType(state.viewType, action);\n    var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n    var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n    var nextState = __assign({}, state, { viewType: viewType,\n        dateProfile: dateProfile, currentDate: reduceCurrentDate(state.currentDate, action, dateProfile), eventSources: eventSources, eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar), dateSelection: reduceDateSelection(state.dateSelection, action, calendar), eventSelection: reduceSelectedEvent(state.eventSelection, action), eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar), eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar), eventSourceLoadingLevel: computeLoadingLevel(eventSources), loadingLevel: computeLoadingLevel(eventSources) });\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n        var reducerFunc = _a[_i];\n        nextState = reducerFunc(nextState, action, calendar);\n    }\n    // console.log(action.type, nextState)\n    return nextState;\n}\nfunction reduceViewType(currentViewType, action) {\n    switch (action.type) {\n        case 'SET_VIEW_TYPE':\n            return action.viewType;\n        default:\n            return currentViewType;\n    }\n}\nfunction reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n    var newDateProfile;\n    switch (action.type) {\n        case 'PREV':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n            break;\n        case 'NEXT':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n            break;\n        case 'SET_DATE':\n            if (!currentDateProfile.activeRange ||\n                !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n                newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n                );\n            }\n            break;\n        case 'SET_VIEW_TYPE':\n            var generator = calendar.dateProfileGenerators[viewType];\n            if (!generator) {\n                throw new Error(viewType ?\n                    'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' :\n                    'No available FullCalendar view plugins.');\n            }\n            newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n            );\n            break;\n    }\n    if (newDateProfile &&\n        newDateProfile.isValid &&\n        !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n        return newDateProfile;\n    }\n    else {\n        return currentDateProfile;\n    }\n}\nfunction reduceCurrentDate(currentDate, action, dateProfile) {\n    switch (action.type) {\n        case 'PREV':\n        case 'NEXT':\n            if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return currentDate;\n            }\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            var newDate = action.dateMarker || currentDate;\n            if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return newDate;\n            }\n        default:\n            return currentDate;\n    }\n}\nfunction reduceDateSelection(currentSelection, action, calendar) {\n    switch (action.type) {\n        case 'SELECT_DATES':\n            return action.selection;\n        case 'UNSELECT_DATES':\n            return null;\n        default:\n            return currentSelection;\n    }\n}\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        case 'UNSELECT_EVENT':\n            return '';\n        default:\n            return currentInstanceId;\n    }\n}\nfunction reduceEventDrag(currentDrag, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_DRAG':\n            var newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n                origSeg: newDrag.origSeg\n            };\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        default:\n            return currentDrag;\n    }\n}\nfunction reduceEventResize(currentResize, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_RESIZE':\n            var newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n                origSeg: newResize.origSeg\n            };\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        default:\n            return currentResize;\n    }\n}\nfunction computeLoadingLevel(eventSources) {\n    var cnt = 0;\n    for (var sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            cnt++;\n        }\n    }\n    return cnt;\n}\n\nvar STANDARD_PROPS = {\n    start: null,\n    end: null,\n    allDay: Boolean\n};\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n    var span = parseOpenDateSpan(raw, dateEnv);\n    var range = span.range;\n    if (!range.start) {\n        return null;\n    }\n    if (!range.end) {\n        if (defaultDuration == null) {\n            return null;\n        }\n        else {\n            range.end = dateEnv.add(range.start, defaultDuration);\n        }\n    }\n    return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\nfunction parseOpenDateSpan(raw, dateEnv) {\n    var leftovers = {};\n    var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n    var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n    var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n    var allDay = standardProps.allDay;\n    if (allDay == null) {\n        allDay = (startMeta && startMeta.isTimeUnspecified) &&\n            (!endMeta || endMeta.isTimeUnspecified);\n    }\n    // use this leftover object as the selection object\n    leftovers.range = {\n        start: startMeta ? startMeta.marker : null,\n        end: endMeta ? endMeta.marker : null\n    };\n    leftovers.allDay = allDay;\n    return leftovers;\n}\nfunction isDateSpansEqual(span0, span1) {\n    return rangesEqual(span0.range, span1.range) &&\n        span0.allDay === span1.allDay &&\n        isSpanPropsEqual(span0, span1);\n}\n// the NON-DATE-RELATED props\nfunction isSpanPropsEqual(span0, span1) {\n    for (var propName in span1) {\n        if (propName !== 'range' && propName !== 'allDay') {\n            if (span0[propName] !== span1[propName]) {\n                return false;\n            }\n        }\n    }\n    // are there any props that span0 has that span1 DOESN'T have?\n    // both have range/allDay, so no need to special-case.\n    for (var propName in span0) {\n        if (!(propName in span1)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction buildDateSpanApi(span, dateEnv) {\n    return {\n        start: dateEnv.toDate(span.range.start),\n        end: dateEnv.toDate(span.range.end),\n        startStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        endStr: dateEnv.formatIso(span.range.end, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction fabricateEventRange(dateSpan, eventUiBases, calendar) {\n    var def = parseEventDef({ editable: false }, '', // sourceId\n    dateSpan.allDay, true, // hasEnd\n    calendar);\n    return {\n        def: def,\n        ui: compileEventUi(def, eventUiBases),\n        instance: createEventInstance(def.defId, dateSpan.range),\n        range: dateSpan.range,\n        isStart: true,\n        isEnd: true\n    };\n}\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    var hash = {};\n    var viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    var defaultConfig = defaultConfigs[viewType];\n    var overrideConfig = overrideConfigs[viewType];\n    var queryProp = function (name) {\n        return (defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n            ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null);\n    };\n    var theClass = queryProp('class');\n    var superType = queryProp('superType');\n    if (!superType && theClass) {\n        superType =\n            findViewNameBySubclass(theClass, overrideConfigs) ||\n                findViewNameBySubclass(theClass, defaultConfigs);\n    }\n    var superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theClass && superDef) {\n        theClass = superDef.class;\n    }\n    if (!theClass) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        class: theClass,\n        defaults: __assign({}, (superDef ? superDef.defaults : {}), (defaultConfig ? defaultConfig.options : {})),\n        overrides: __assign({}, (superDef ? superDef.overrides : {}), (overrideConfig ? overrideConfig.options : {}))\n    };\n}\nfunction findViewNameBySubclass(viewSubclass, configs) {\n    var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n    for (var viewType in configs) {\n        var parsed = configs[viewType];\n        // need DIRECT subclass, so instanceof won't do it\n        if (parsed.class && parsed.class.prototype === superProto) {\n            return viewType;\n        }\n    }\n    return '';\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nvar VIEW_DEF_PROPS = {\n    type: String,\n    class: null\n};\nfunction parseViewConfig(input) {\n    if (typeof input === 'function') {\n        input = { class: input };\n    }\n    var options = {};\n    var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n    return {\n        superType: props.type,\n        class: props.class,\n        options: options\n    };\n}\n\nfunction buildViewSpecs(defaultInputs, optionsManager) {\n    var defaultConfigs = parseViewConfigs(defaultInputs);\n    var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n    var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, function (viewDef) {\n        return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n    });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n    var durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        optionsManager.dynamicOverrides.duration ||\n        optionsManager.overrides.duration;\n    var duration = null;\n    var durationUnit = '';\n    var singleUnit = '';\n    var singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDuration(durationInput);\n        if (duration) { // valid?\n            var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n            }\n        }\n    }\n    var queryButtonText = function (options) {\n        var buttonTextMap = options.buttonText || {};\n        var buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n    };\n    return {\n        type: viewDef.type,\n        class: viewDef.class,\n        duration: duration,\n        durationUnit: durationUnit,\n        singleUnit: singleUnit,\n        options: __assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n        buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) ||\n            queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(optionsManager.localeDefaults) ||\n            queryButtonText(optionsManager.dirDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(globalDefaults) ||\n            viewDef.type // fall back to given view name\n    };\n}\n\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    function Toolbar(extraClassName) {\n        var _this = _super.call(this) || this;\n        _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n        _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n        _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n        _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n        _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n        _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n        _this.el = createElement('div', { className: 'fc-toolbar ' + extraClassName });\n        return _this;\n    }\n    Toolbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderLayout.unrender(); // should unrender everything else\n        removeElement(this.el);\n    };\n    Toolbar.prototype.render = function (props) {\n        this._renderLayout(props.layout);\n        this._updateTitle(props.title);\n        this._updateActiveButton(props.activeButton);\n        this._updateToday(props.isTodayEnabled);\n        this._updatePrev(props.isPrevEnabled);\n        this._updateNext(props.isNextEnabled);\n    };\n    Toolbar.prototype.renderLayout = function (layout) {\n        var el = this.el;\n        this.viewsWithButtons = [];\n        appendToElement(el, this.renderSection('left', layout.left));\n        appendToElement(el, this.renderSection('center', layout.center));\n        appendToElement(el, this.renderSection('right', layout.right));\n    };\n    Toolbar.prototype.unrenderLayout = function () {\n        this.el.innerHTML = '';\n    };\n    Toolbar.prototype.renderSection = function (position, buttonStr) {\n        var _this = this;\n        var _a = this.context, theme = _a.theme, calendar = _a.calendar;\n        var optionsManager = calendar.optionsManager;\n        var viewSpecs = calendar.viewSpecs;\n        var sectionEl = createElement('div', { className: 'fc-' + position });\n        var calendarCustomButtons = optionsManager.computed.customButtons || {};\n        var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n        var calendarButtonText = optionsManager.computed.buttonText || {};\n        if (buttonStr) {\n            buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n                var groupChildren = [];\n                var isOnlyButtons = true;\n                var groupEl;\n                buttonGroupStr.split(',').forEach(function (buttonName, j) {\n                    var customButtonProps;\n                    var viewSpec;\n                    var buttonClick;\n                    var buttonIcon; // only one of these will be set\n                    var buttonText; // \"\n                    var buttonInnerHtml;\n                    var buttonClasses;\n                    var buttonEl;\n                    var buttonAriaAttr;\n                    if (buttonName === 'title') {\n                        groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n                        isOnlyButtons = false;\n                    }\n                    else {\n                        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n                            buttonClick = function (ev) {\n                                if (customButtonProps.click) {\n                                    customButtonProps.click.call(buttonEl, ev);\n                                }\n                            };\n                            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = customButtonProps.text);\n                        }\n                        else if ((viewSpec = viewSpecs[buttonName])) {\n                            _this.viewsWithButtons.push(buttonName);\n                            buttonClick = function () {\n                                calendar.changeView(buttonName);\n                            };\n                            (buttonText = viewSpec.buttonTextOverride) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = viewSpec.buttonTextDefault);\n                        }\n                        else if (calendar[buttonName]) { // a calendar method\n                            buttonClick = function () {\n                                calendar[buttonName]();\n                            };\n                            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = calendarButtonText[buttonName]);\n                            //            ^ everything else is considered default\n                        }\n                        if (buttonClick) {\n                            buttonClasses = [\n                                'fc-' + buttonName + '-button',\n                                theme.getClass('button')\n                            ];\n                            if (buttonText) {\n                                buttonInnerHtml = htmlEscape(buttonText);\n                                buttonAriaAttr = '';\n                            }\n                            else if (buttonIcon) {\n                                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n                            }\n                            buttonEl = htmlToElement(// type=\"button\" so that it doesn't submit a form\n                            '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\n                                buttonAriaAttr +\n                                '>' + buttonInnerHtml + '</button>');\n                            buttonEl.addEventListener('click', buttonClick);\n                            groupChildren.push(buttonEl);\n                        }\n                    }\n                });\n                if (groupChildren.length > 1) {\n                    groupEl = document.createElement('div');\n                    var buttonGroupClassName = theme.getClass('buttonGroup');\n                    if (isOnlyButtons && buttonGroupClassName) {\n                        groupEl.classList.add(buttonGroupClassName);\n                    }\n                    appendToElement(groupEl, groupChildren);\n                    sectionEl.appendChild(groupEl);\n                }\n                else {\n                    appendToElement(sectionEl, groupChildren); // 1 or 0 children\n                }\n            });\n        }\n        return sectionEl;\n    };\n    Toolbar.prototype.updateToday = function (isTodayEnabled) {\n        this.toggleButtonEnabled('today', isTodayEnabled);\n    };\n    Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n        this.toggleButtonEnabled('prev', isPrevEnabled);\n    };\n    Toolbar.prototype.updateNext = function (isNextEnabled) {\n        this.toggleButtonEnabled('next', isNextEnabled);\n    };\n    Toolbar.prototype.updateTitle = function (text) {\n        findElements(this.el, 'h2').forEach(function (titleEl) {\n            titleEl.innerText = text;\n        });\n    };\n    Toolbar.prototype.updateActiveButton = function (buttonName) {\n        var theme = this.context.theme;\n        var className = theme.getClass('buttonActive');\n        findElements(this.el, 'button').forEach(function (buttonEl) {\n            if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n                buttonEl.classList.add(className);\n            }\n            else {\n                buttonEl.classList.remove(className);\n            }\n        });\n    };\n    Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n        findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n            buttonEl.disabled = !bool;\n        });\n    };\n    return Toolbar;\n}(Component));\n\nvar CalendarComponent = /** @class */ (function (_super) {\n    __extends(CalendarComponent, _super);\n    function CalendarComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.elClassNames = [];\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.renderToolbars = memoizeRendering(_this._renderToolbars, _this._unrenderToolbars, [_this.renderSkeleton]);\n        _this.buildComponentContext = memoize(buildComponentContext);\n        _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        _this.el = el;\n        _this.computeTitle = memoize(computeTitle);\n        _this.parseBusinessHours = memoize(function (input) {\n            return parseBusinessHours(input, _this.context.calendar);\n        });\n        return _this;\n    }\n    CalendarComponent.prototype.render = function (props, context) {\n        this.freezeHeight();\n        var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n        this.renderSkeleton(context);\n        this.renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, title);\n        this.renderView(props, title);\n        this.updateSize();\n        this.thawHeight();\n    };\n    CalendarComponent.prototype.destroy = function () {\n        if (this.header) {\n            this.header.destroy();\n        }\n        if (this.footer) {\n            this.footer.destroy();\n        }\n        this.renderSkeleton.unrender(); // will call destroyView\n        _super.prototype.destroy.call(this);\n    };\n    CalendarComponent.prototype._renderSkeleton = function (context) {\n        this.updateElClassNames(context);\n        prependToElement(this.el, this.contentEl = createElement('div', { className: 'fc-view-container' }));\n        var calendar = context.calendar;\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n            var modifyViewContainer = _a[_i];\n            modifyViewContainer(this.contentEl, calendar);\n        }\n    };\n    CalendarComponent.prototype._unrenderSkeleton = function () {\n        // weird to have this here\n        if (this.view) {\n            this.savedScroll = this.view.queryScroll();\n            this.view.destroy();\n            this.view = null;\n        }\n        removeElement(this.contentEl);\n        this.removeElClassNames();\n    };\n    CalendarComponent.prototype.removeElClassNames = function () {\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.remove(className);\n        }\n        this.elClassNames = [];\n    };\n    CalendarComponent.prototype.updateElClassNames = function (context) {\n        this.removeElClassNames();\n        var theme = context.theme, options = context.options;\n        this.elClassNames = [\n            'fc',\n            'fc-' + options.dir,\n            theme.getClass('widget')\n        ];\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.add(className);\n        }\n    };\n    CalendarComponent.prototype._renderToolbars = function (viewSpec, dateProfile, currentDate, title) {\n        var _a = this, context = _a.context, header = _a.header, footer = _a.footer;\n        var options = context.options, calendar = context.calendar;\n        var headerLayout = options.header;\n        var footerLayout = options.footer;\n        var dateProfileGenerator = this.props.dateProfileGenerator;\n        var now = calendar.getNow();\n        var todayInfo = dateProfileGenerator.build(now);\n        var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n        var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n        var toolbarProps = {\n            title: title,\n            activeButton: viewSpec.type,\n            isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n            isPrevEnabled: prevInfo.isValid,\n            isNextEnabled: nextInfo.isValid\n        };\n        if (headerLayout) {\n            if (!header) {\n                header = this.header = new Toolbar('fc-header-toolbar');\n                prependToElement(this.el, header.el);\n            }\n            header.receiveProps(__assign({ layout: headerLayout }, toolbarProps), context);\n        }\n        else if (header) {\n            header.destroy();\n            header = this.header = null;\n        }\n        if (footerLayout) {\n            if (!footer) {\n                footer = this.footer = new Toolbar('fc-footer-toolbar');\n                appendToElement(this.el, footer.el);\n            }\n            footer.receiveProps(__assign({ layout: footerLayout }, toolbarProps), context);\n        }\n        else if (footer) {\n            footer.destroy();\n            footer = this.footer = null;\n        }\n    };\n    CalendarComponent.prototype._unrenderToolbars = function () {\n        if (this.header) {\n            this.header.destroy();\n            this.header = null;\n        }\n        if (this.footer) {\n            this.footer.destroy();\n            this.footer = null;\n        }\n    };\n    CalendarComponent.prototype.renderView = function (props, title) {\n        var view = this.view;\n        var _a = this.context, calendar = _a.calendar, options = _a.options;\n        var viewSpec = props.viewSpec, dateProfileGenerator = props.dateProfileGenerator;\n        if (!view || view.viewSpec !== viewSpec) {\n            if (view) {\n                view.destroy();\n            }\n            view = this.view = new viewSpec['class'](viewSpec, this.contentEl);\n            if (this.savedScroll) {\n                view.addScroll(this.savedScroll, true);\n                this.savedScroll = null;\n            }\n        }\n        view.title = title; // for the API\n        var viewProps = {\n            dateProfileGenerator: dateProfileGenerator,\n            dateProfile: props.dateProfile,\n            businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize\n        };\n        var transformers = this.buildViewPropTransformers(calendar.pluginSystem.hooks.viewPropsTransformers);\n        for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n            var transformer = transformers_1[_i];\n            __assign(viewProps, transformer.transform(viewProps, viewSpec, props, options));\n        }\n        view.receiveProps(viewProps, this.buildComponentContext(this.context, viewSpec, view));\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.updateSize = function (isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var view = this.view;\n        if (!view) {\n            return; // why?\n        }\n        if (isResize || this.isHeightAuto == null) {\n            this.computeHeightVars();\n        }\n        view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n        view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n        view.popScroll(isResize);\n    };\n    CalendarComponent.prototype.computeHeightVars = function () {\n        var calendar = this.context.calendar; // yuck. need to handle dynamic options\n        var heightInput = calendar.opt('height');\n        var contentHeightInput = calendar.opt('contentHeight');\n        this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n        if (typeof contentHeightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = contentHeightInput;\n        }\n        else if (typeof contentHeightInput === 'function') { // exists and is a function\n            this.viewHeight = contentHeightInput();\n        }\n        else if (typeof heightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = heightInput - this.queryToolbarsHeight();\n        }\n        else if (typeof heightInput === 'function') { // exists and is a function\n            this.viewHeight = heightInput() - this.queryToolbarsHeight();\n        }\n        else if (heightInput === 'parent') { // set to height of parent element\n            var parentEl = this.el.parentNode;\n            this.viewHeight = parentEl.getBoundingClientRect().height - this.queryToolbarsHeight();\n        }\n        else {\n            this.viewHeight = Math.round(this.contentEl.getBoundingClientRect().width /\n                Math.max(calendar.opt('aspectRatio'), .5));\n        }\n    };\n    CalendarComponent.prototype.queryToolbarsHeight = function () {\n        var height = 0;\n        if (this.header) {\n            height += computeHeightAndMargins(this.header.el);\n        }\n        if (this.footer) {\n            height += computeHeightAndMargins(this.footer.el);\n        }\n        return height;\n    };\n    // Height \"Freezing\"\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.freezeHeight = function () {\n        applyStyle(this.el, {\n            height: this.el.getBoundingClientRect().height,\n            overflow: 'hidden'\n        });\n    };\n    CalendarComponent.prototype.thawHeight = function () {\n        applyStyle(this.el, {\n            height: '',\n            overflow: ''\n        });\n    };\n    return CalendarComponent;\n}(Component));\n// Title and Date Formatting\n// -----------------------------------------------------------------------------------------------------------------\n// Computes what the title at the top of the calendar should be for this view\nfunction computeTitle(dateProfile, viewOptions) {\n    var range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return this.context.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), { isEndExclusive: dateProfile.isRangeAllDay });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction computeTitleFormat(dateProfile) {\n    var currentRangeUnit = dateProfile.currentRangeUnit;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    else if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    else {\n        var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n        if (days !== null && days > 1) {\n            // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n            return { year: 'numeric', month: 'short', day: 'numeric' };\n        }\n        else {\n            // one day. longer, like \"September 9 2014\"\n            return { year: 'numeric', month: 'long', day: 'numeric' };\n        }\n    }\n}\n// build a context scoped to the view\nfunction buildComponentContext(context, viewSpec, view) {\n    return context.extend(viewSpec.options, view);\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map(function (theClass) {\n        return new theClass();\n    });\n}\n\nvar Interaction = /** @class */ (function () {\n    function Interaction(settings) {\n        this.component = settings.component;\n    }\n    Interaction.prototype.destroy = function () {\n    };\n    return Interaction;\n}());\nfunction parseInteractionSettings(component, input) {\n    return {\n        component: component,\n        el: input.el,\n        useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n    };\n}\nfunction interactionSettingsToStore(settings) {\n    var _a;\n    return _a = {},\n        _a[settings.component.uid] = settings,\n        _a;\n}\n// global state\nvar interactionSettingsStore = {};\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /** @class */ (function (_super) {\n    __extends(EventClicking, _super);\n    function EventClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handleSegClick = function (ev, segEl) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n                var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                calendar.publiclyTrigger('eventClick', [\n                    {\n                        el: segEl,\n                        event: new EventApi(component.context.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        var component = settings.component;\n        _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n        return _this;\n    }\n    return EventClicking;\n}(Interaction));\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /** @class */ (function (_super) {\n    __extends(EventHovering, _super);\n    function EventHovering(settings) {\n        var _this = _super.call(this, settings) || this;\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        _this.handleEventElRemove = function (el) {\n            if (el === _this.currentSegEl) {\n                _this.handleSegLeave(null, _this.currentSegEl);\n            }\n        };\n        _this.handleSegEnter = function (ev, segEl) {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                segEl.classList.add('fc-allow-mouse-resize');\n                _this.currentSegEl = segEl;\n                _this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        _this.handleSegLeave = function (ev, segEl) {\n            if (_this.currentSegEl) {\n                segEl.classList.remove('fc-allow-mouse-resize');\n                _this.currentSegEl = null;\n                _this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        var component = settings.component;\n        _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n        // how to make sure component already has context?\n        component.context.calendar.on('eventElRemove', _this.handleEventElRemove);\n        return _this;\n    }\n    EventHovering.prototype.destroy = function () {\n        this.removeHoverListeners();\n        this.component.context.calendar.off('eventElRemove', this.handleEventElRemove);\n    };\n    EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n        var component = this.component;\n        var _a = component.context, calendar = _a.calendar, view = _a.view;\n        var seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            calendar.publiclyTrigger(publicEvName, [\n                {\n                    el: segEl,\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: view\n                }\n            ]);\n        }\n    };\n    return EventHovering;\n}(Interaction));\n\nvar StandardTheme = /** @class */ (function (_super) {\n    __extends(StandardTheme, _super);\n    function StandardTheme() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return StandardTheme;\n}(Theme));\nStandardTheme.prototype.classes = {\n    widget: 'fc-unthemed',\n    widgetHeader: 'fc-widget-header',\n    widgetContent: 'fc-widget-content',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n    popoverHeader: 'fc-widget-header',\n    popoverContent: 'fc-widget-content',\n    // day grid\n    headerRow: 'fc-widget-header',\n    dayRow: 'fc-widget-content',\n    // list view\n    listView: 'fc-widget-content'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons';\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nvar Calendar = /** @class */ (function () {\n    function Calendar(el, overrides) {\n        var _this = this;\n        this.buildComponentContext = memoize(buildComponentContext$1);\n        this.parseRawLocales = memoize(parseRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildDateEnv = memoize(buildDateEnv);\n        this.buildTheme = memoize(buildTheme);\n        this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n        this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n        this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.interactionsStore = {};\n        this.actionQueue = [];\n        this.isReducing = false;\n        // isDisplaying: boolean = false // installed in DOM? accepting renders?\n        this.needsRerender = false; // needs a render?\n        this.isRendering = false; // currently in the executeRender function?\n        this.renderingPauseDepth = 0;\n        this.buildDelayedRerender = memoize(buildDelayedRerender);\n        this.afterSizingTriggers = {};\n        this.isViewUpdated = false;\n        this.isDatesUpdated = false;\n        this.isEventsUpdated = false;\n        this.el = el;\n        this.optionsManager = new OptionsManager(overrides || {});\n        this.pluginSystem = new PluginSystem();\n        // only do once. don't do in handleOptions. because can't remove plugins\n        this.addPluginInputs(this.optionsManager.computed.plugins || []);\n        this.handleOptions(this.optionsManager.computed);\n        this.publiclyTrigger('_init'); // for tests\n        this.hydrate();\n        this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions\n            .map(function (calendarInteractionClass) {\n            return new calendarInteractionClass(_this);\n        });\n    }\n    Calendar.prototype.addPluginInputs = function (pluginInputs) {\n        var pluginDefs = refinePluginDefs(pluginInputs);\n        for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n            var pluginDef = pluginDefs_1[_i];\n            this.pluginSystem.add(pluginDef);\n        }\n    };\n    Object.defineProperty(Calendar.prototype, \"view\", {\n        // public API\n        get: function () {\n            return this.component ? this.component.view : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Public API for rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.render = function () {\n        if (!this.component) {\n            this.component = new CalendarComponent(this.el);\n            this.renderableEventStore = createEmptyEventStore();\n            this.bindHandlers();\n            this.executeRender();\n        }\n        else {\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.destroy = function () {\n        if (this.component) {\n            this.unbindHandlers();\n            this.component.destroy(); // don't null-out. in case API needs access\n            this.component = null; // umm ???\n            for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n                var interaction = _a[_i];\n                interaction.destroy();\n            }\n            this.publiclyTrigger('_destroyed');\n        }\n    };\n    // Handlers\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.bindHandlers = function () {\n        var _this = this;\n        // event delegation for nav links\n        this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n            var gotoOptions = anchorEl.getAttribute('data-goto');\n            gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n            var dateEnv = _this.dateEnv;\n            var dateMarker = dateEnv.createMarker(gotoOptions.date);\n            var viewType = gotoOptions.type;\n            // property like \"navLinkDayClick\". might be a string or a function\n            var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n            if (typeof customAction === 'function') {\n                customAction(dateEnv.toDate(dateMarker), ev);\n            }\n            else {\n                if (typeof customAction === 'string') {\n                    viewType = customAction;\n                }\n                _this.zoomTo(dateMarker, viewType);\n            }\n        });\n        if (this.opt('handleWindowResize')) {\n            window.addEventListener('resize', this.windowResizeProxy = debounce(// prevents rapid calls\n            this.windowResize.bind(this), this.opt('windowResizeDelay')));\n        }\n    };\n    Calendar.prototype.unbindHandlers = function () {\n        this.removeNavLinkListener();\n        if (this.windowResizeProxy) {\n            window.removeEventListener('resize', this.windowResizeProxy);\n            this.windowResizeProxy = null;\n        }\n    };\n    // Dispatcher\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hydrate = function () {\n        var _this = this;\n        this.state = this.buildInitialState();\n        var rawSources = this.opt('eventSources') || [];\n        var singleRawSource = this.opt('events');\n        var sources = []; // parsed\n        if (singleRawSource) {\n            rawSources.unshift(singleRawSource);\n        }\n        for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n            var rawSource = rawSources_1[_i];\n            var source = parseEventSource(rawSource, this);\n            if (source) {\n                sources.push(source);\n            }\n        }\n        this.batchRendering(function () {\n            _this.dispatch({ type: 'INIT' }); // pass in sources here?\n            _this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: sources });\n            _this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n            });\n        });\n    };\n    Calendar.prototype.buildInitialState = function () {\n        return {\n            viewType: null,\n            loadingLevel: 0,\n            eventSourceLoadingLevel: 0,\n            currentDate: this.getInitialDate(),\n            dateProfile: null,\n            eventSources: {},\n            eventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null\n        };\n    };\n    Calendar.prototype.dispatch = function (action) {\n        this.actionQueue.push(action);\n        if (!this.isReducing) {\n            this.isReducing = true;\n            var oldState = this.state;\n            while (this.actionQueue.length) {\n                this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n            }\n            var newState = this.state;\n            this.isReducing = false;\n            if (!oldState.loadingLevel && newState.loadingLevel) {\n                this.publiclyTrigger('loading', [true]);\n            }\n            else if (oldState.loadingLevel && !newState.loadingLevel) {\n                this.publiclyTrigger('loading', [false]);\n            }\n            var view = this.component && this.component.view;\n            if (oldState.eventStore !== newState.eventStore) {\n                if (oldState.eventStore) {\n                    this.isEventsUpdated = true;\n                }\n            }\n            if (oldState.dateProfile !== newState.dateProfile) {\n                if (oldState.dateProfile && view) { // why would view be null!?\n                    this.publiclyTrigger('datesDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isDatesUpdated = true;\n            }\n            if (oldState.viewType !== newState.viewType) {\n                if (oldState.viewType && view) { // why would view be null!?\n                    this.publiclyTrigger('viewSkeletonDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isViewUpdated = true;\n            }\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.reduce = function (state, action, calendar) {\n        return reduce(state, action, calendar);\n    };\n    // Render Queue\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.requestRerender = function () {\n        this.needsRerender = true;\n        this.delayedRerender(); // will call a debounced-version of tryRerender\n    };\n    Calendar.prototype.tryRerender = function () {\n        if (this.component && // must be accepting renders\n            this.needsRerender && // indicates that a rerender was requested\n            !this.renderingPauseDepth && // not paused\n            !this.isRendering // not currently in the render loop\n        ) {\n            this.executeRender();\n        }\n    };\n    Calendar.prototype.batchRendering = function (func) {\n        this.renderingPauseDepth++;\n        func();\n        this.renderingPauseDepth--;\n        if (this.needsRerender) {\n            this.requestRerender();\n        }\n    };\n    // Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.executeRender = function () {\n        // clear these BEFORE the render so that new values will accumulate during render\n        this.needsRerender = false;\n        this.isRendering = true;\n        this.renderComponent();\n        this.isRendering = false;\n        // received a rerender request while rendering\n        if (this.needsRerender) {\n            this.delayedRerender();\n        }\n    };\n    /*\n    don't call this directly. use executeRender instead\n    */\n    Calendar.prototype.renderComponent = function () {\n        var _a = this, state = _a.state, component = _a.component;\n        var viewType = state.viewType;\n        var viewSpec = this.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n        }\n        // if event sources are still loading and progressive rendering hasn't been enabled,\n        // keep rendering the last fully loaded set of events\n        var renderableEventStore = this.renderableEventStore =\n            (state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering')) ?\n                this.renderableEventStore :\n                state.eventStore;\n        var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n        var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n        var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        component.receiveProps(__assign({}, state, { viewSpec: viewSpec, dateProfileGenerator: this.dateProfileGenerators[viewType], dateProfile: state.dateProfile, eventStore: renderableEventStore, eventUiBases: eventUiBases, dateSelection: state.dateSelection, eventSelection: state.eventSelection, eventDrag: state.eventDrag, eventResize: state.eventResize }), this.buildComponentContext(this.theme, this.dateEnv, this.optionsManager.computed));\n        if (this.isViewUpdated) {\n            this.isViewUpdated = false;\n            this.publiclyTrigger('viewSkeletonRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isDatesUpdated) {\n            this.isDatesUpdated = false;\n            this.publiclyTrigger('datesRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isEventsUpdated) {\n            this.isEventsUpdated = false;\n        }\n        this.releaseAfterSizingTriggers();\n    };\n    // Options\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.setOption = function (name, val) {\n        var _a;\n        this.mutateOptions((_a = {}, _a[name] = val, _a), [], true);\n    };\n    Calendar.prototype.getOption = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.opt = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.viewOpt = function (name) {\n        return this.viewOpts()[name];\n    };\n    Calendar.prototype.viewOpts = function () {\n        return this.viewSpecs[this.state.viewType].options;\n    };\n    /*\n    handles option changes (like a diff)\n    */\n    Calendar.prototype.mutateOptions = function (updates, removals, isDynamic, deepEqual) {\n        var _this = this;\n        var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n        var normalUpdates = {};\n        var specialUpdates = {};\n        var oldDateEnv = this.dateEnv; // do this before handleOptions\n        var isTimeZoneDirty = false;\n        var isSizeDirty = false;\n        var anyDifficultOptions = Boolean(removals.length);\n        for (var name_1 in updates) {\n            if (changeHandlers[name_1]) {\n                specialUpdates[name_1] = updates[name_1];\n            }\n            else {\n                normalUpdates[name_1] = updates[name_1];\n            }\n        }\n        for (var name_2 in normalUpdates) {\n            if (/^(height|contentHeight|aspectRatio)$/.test(name_2)) {\n                isSizeDirty = true;\n            }\n            else if (/^(defaultDate|defaultView)$/.test(name_2)) ;\n            else {\n                anyDifficultOptions = true;\n                if (name_2 === 'timeZone') {\n                    isTimeZoneDirty = true;\n                }\n            }\n        }\n        this.optionsManager.mutate(normalUpdates, removals, isDynamic);\n        if (anyDifficultOptions) {\n            this.handleOptions(this.optionsManager.computed);\n        }\n        this.batchRendering(function () {\n            if (anyDifficultOptions) {\n                if (isTimeZoneDirty) {\n                    _this.dispatch({\n                        type: 'CHANGE_TIMEZONE',\n                        oldDateEnv: oldDateEnv\n                    });\n                }\n                /* HACK\n                has the same effect as calling this.requestRerender()\n                but recomputes the state's dateProfile\n                */\n                _this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: _this.state.viewType\n                });\n            }\n            else if (isSizeDirty) {\n                _this.updateSize();\n            }\n            // special updates\n            if (deepEqual) {\n                for (var name_3 in specialUpdates) {\n                    changeHandlers[name_3](specialUpdates[name_3], _this, deepEqual);\n                }\n            }\n        });\n    };\n    /*\n    rebuilds things based off of a complete set of refined options\n    */\n    Calendar.prototype.handleOptions = function (options) {\n        var _this = this;\n        var pluginHooks = this.pluginSystem.hooks;\n        this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n        this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n        this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n        this.theme = this.buildTheme(options);\n        var available = this.parseRawLocales(options.locales);\n        this.availableRawLocales = available.map;\n        var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n        this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n        this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n        // ineffecient to do every time?\n        this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager);\n        // ineffecient to do every time?\n        this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n            return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n        });\n    };\n    Calendar.prototype.getAvailableLocaleCodes = function () {\n        return Object.keys(this.availableRawLocales);\n    };\n    Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n        return processScopedUiProps('select', rawOpts, this);\n    };\n    Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n        if (rawOpts.editable) { // so 'editable' affected events\n            rawOpts = __assign({}, rawOpts, { eventEditable: true });\n        }\n        return processScopedUiProps('event', rawOpts, this);\n    };\n    // Trigger\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hasPublicHandlers = function (name) {\n        return this.hasHandlers(name) ||\n            this.opt(name); // handler specified in options\n    };\n    Calendar.prototype.publiclyTrigger = function (name, args) {\n        var optHandler = this.opt(name);\n        this.triggerWith(name, this, args);\n        if (optHandler) {\n            return optHandler.apply(this, args);\n        }\n    };\n    Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n    };\n    Calendar.prototype.releaseAfterSizingTriggers = function () {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        for (var name_4 in afterSizingTriggers) {\n            for (var _i = 0, _a = afterSizingTriggers[name_4]; _i < _a.length; _i++) {\n                var args = _a[_i];\n                this.publiclyTrigger(name_4, args);\n            }\n        }\n        this.afterSizingTriggers = {};\n    };\n    // View\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a boolean about whether the view is okay to instantiate at some point\n    Calendar.prototype.isValidViewType = function (viewType) {\n        return Boolean(this.viewSpecs[viewType]);\n    };\n    Calendar.prototype.changeView = function (viewType, dateOrRange) {\n        var dateMarker = null;\n        if (dateOrRange) {\n            if (dateOrRange.start && dateOrRange.end) { // a range\n                this.optionsManager.mutate({ visibleRange: dateOrRange }, []); // will not rerender\n                this.handleOptions(this.optionsManager.computed); // ...but yuck\n            }\n            else { // a date\n                dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n            }\n        }\n        this.unselect();\n        this.dispatch({\n            type: 'SET_VIEW_TYPE',\n            viewType: viewType,\n            dateMarker: dateMarker\n        });\n    };\n    // Forces navigation to a view for the given date.\n    // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n    // needs to change\n    Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n        var spec;\n        viewType = viewType || 'day'; // day is default zoom\n        spec = this.viewSpecs[viewType] ||\n            this.getUnitViewSpec(viewType);\n        this.unselect();\n        if (spec) {\n            this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: spec.type,\n                dateMarker: dateMarker\n            });\n        }\n        else {\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: dateMarker\n            });\n        }\n    };\n    // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n    // Preference is given to views that have corresponding buttons.\n    Calendar.prototype.getUnitViewSpec = function (unit) {\n        var component = this.component;\n        var viewTypes = [];\n        var i;\n        var spec;\n        // put views that have buttons first. there will be duplicates, but oh\n        if (component.header) {\n            viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n        }\n        if (component.footer) {\n            viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n        }\n        for (var viewType in this.viewSpecs) {\n            viewTypes.push(viewType);\n        }\n        for (i = 0; i < viewTypes.length; i++) {\n            spec = this.viewSpecs[viewTypes[i]];\n            if (spec) {\n                if (spec.singleUnit === unit) {\n                    return spec;\n                }\n            }\n        }\n    };\n    // Current Date\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getInitialDate = function () {\n        var defaultDateInput = this.opt('defaultDate');\n        // compute the initial ambig-timezone date\n        if (defaultDateInput != null) {\n            return this.dateEnv.createMarker(defaultDateInput);\n        }\n        else {\n            return this.getNow(); // getNow already returns unzoned\n        }\n    };\n    Calendar.prototype.prev = function () {\n        this.unselect();\n        this.dispatch({ type: 'PREV' });\n    };\n    Calendar.prototype.next = function () {\n        this.unselect();\n        this.dispatch({ type: 'NEXT' });\n    };\n    Calendar.prototype.prevYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n        });\n    };\n    Calendar.prototype.nextYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n        });\n    };\n    Calendar.prototype.today = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.getNow()\n        });\n    };\n    Calendar.prototype.gotoDate = function (zonedDateInput) {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.createMarker(zonedDateInput)\n        });\n    };\n    Calendar.prototype.incrementDate = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // else, warn about invalid input?\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n            });\n        }\n    };\n    // for external API\n    Calendar.prototype.getDate = function () {\n        return this.dateEnv.toDate(this.state.currentDate);\n    };\n    // Date Formatting Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.formatDate = function (d, formatter) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n    };\n    // `settings` is for formatter AND isEndExclusive\n    Calendar.prototype.formatRange = function (d0, d1, settings) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n    };\n    Calendar.prototype.formatIso = function (d, omitTime) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.windowResize = function (ev) {\n        if (!this.isHandlingWindowResize &&\n            this.component && // why?\n            ev.target === window // not a jqui resize event\n        ) {\n            this.isHandlingWindowResize = true;\n            this.updateSize();\n            this.publiclyTrigger('windowResize', [this.view]);\n            this.isHandlingWindowResize = false;\n        }\n    };\n    Calendar.prototype.updateSize = function () {\n        if (this.component) { // when?\n            this.component.updateSize(true);\n        }\n    };\n    // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n        var settings = parseInteractionSettings(component, settingsInput);\n        var DEFAULT_INTERACTIONS = [\n            EventClicking,\n            EventHovering\n        ];\n        var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n        var interactions = interactionClasses.map(function (interactionClass) {\n            return new interactionClass(settings);\n        });\n        this.interactionsStore[component.uid] = interactions;\n        interactionSettingsStore[component.uid] = settings;\n    };\n    Calendar.prototype.unregisterInteractiveComponent = function (component) {\n        for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener.destroy();\n        }\n        delete this.interactionsStore[component.uid];\n        delete interactionSettingsStore[component.uid];\n    };\n    // Date Selection / Event Selection / DayClick\n    // -----------------------------------------------------------------------------------------------------------------\n    // this public method receives start/end dates in any format, with any timezone\n    // NOTE: args were changed from v3\n    Calendar.prototype.select = function (dateOrObj, endDate) {\n        var selectionInput;\n        if (endDate == null) {\n            if (dateOrObj.start != null) {\n                selectionInput = dateOrObj;\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: null\n                };\n            }\n        }\n        else {\n            selectionInput = {\n                start: dateOrObj,\n                end: endDate\n            };\n        }\n        var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({ days: 1 }) // TODO: cache this?\n        );\n        if (selection) { // throw parse error otherwise?\n            this.dispatch({ type: 'SELECT_DATES', selection: selection });\n            this.triggerDateSelect(selection);\n        }\n    };\n    // public method\n    Calendar.prototype.unselect = function (pev) {\n        if (this.state.dateSelection) {\n            this.dispatch({ type: 'UNSELECT_DATES' });\n            this.triggerDateUnselect(pev);\n        }\n    };\n    Calendar.prototype.triggerDateSelect = function (selection, pev) {\n        var arg = __assign({}, this.buildDateSpanApi(selection), { jsEvent: pev ? pev.origEvent : null, view: this.view });\n        this.publiclyTrigger('select', [arg]);\n    };\n    Calendar.prototype.triggerDateUnselect = function (pev) {\n        this.publiclyTrigger('unselect', [\n            {\n                jsEvent: pev ? pev.origEvent : null,\n                view: this.view\n            }\n        ]);\n    };\n    // TODO: receive pev?\n    Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n        var arg = __assign({}, this.buildDatePointApi(dateSpan), { dayEl: dayEl, jsEvent: ev, // Is this always a mouse event? See #4655\n            view: view });\n        this.publiclyTrigger('dateClick', [arg]);\n    };\n    Calendar.prototype.buildDatePointApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    // Date Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n    Calendar.prototype.getNow = function () {\n        var now = this.opt('now');\n        if (typeof now === 'function') {\n            now = now();\n        }\n        if (now == null) {\n            return this.dateEnv.createNowMarker();\n        }\n        return this.dateEnv.createMarker(now);\n    };\n    // Event-Date Utilities\n    // -----------------------------------------------------------------------------------------------------------------\n    // Given an event's allDay status and start date, return what its fallback end date should be.\n    // TODO: rename to computeDefaultEventEnd\n    Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n        var end = marker;\n        if (allDay) {\n            end = startOfDay(end);\n            end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n        }\n        else {\n            end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n        }\n        return end;\n    };\n    // Public Events API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n        if (eventInput instanceof EventApi) {\n            var def = eventInput._def;\n            var instance = eventInput._instance;\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventStore.defs[def.defId]) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore({ def: def, instance: instance }) // TODO: better util for two args?\n                });\n            }\n            return eventInput;\n        }\n        var sourceId;\n        if (sourceInput instanceof EventSourceApi) {\n            sourceId = sourceInput.internalEventSource.sourceId;\n        }\n        else if (sourceInput != null) {\n            var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n            if (!sourceApi) {\n                console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n                return null;\n            }\n            else {\n                sourceId = sourceApi.internalEventSource.sourceId;\n            }\n        }\n        var tuple = parseEvent(eventInput, sourceId, this);\n        if (tuple) {\n            this.dispatch({\n                type: 'ADD_EVENTS',\n                eventStore: eventTupleToStore(tuple)\n            });\n            return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n        }\n        return null;\n    };\n    // TODO: optimize\n    Calendar.prototype.getEventById = function (id) {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        id = String(id);\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.publicId === id) {\n                if (def.recurringDef) {\n                    return new EventApi(this, def, null);\n                }\n                else {\n                    for (var instanceId in instances) {\n                        var instance = instances[instanceId];\n                        if (instance.defId === def.defId) {\n                            return new EventApi(this, def, instance);\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.getEvents = function () {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        var eventApis = [];\n        for (var id in instances) {\n            var instance = instances[id];\n            var def = defs[instance.defId];\n            eventApis.push(new EventApi(this, def, instance));\n        }\n        return eventApis;\n    };\n    Calendar.prototype.removeAllEvents = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n    };\n    Calendar.prototype.rerenderEvents = function () {\n        this.dispatch({ type: 'RESET_EVENTS' });\n    };\n    // Public Event Sources API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getEventSources = function () {\n        var sourceHash = this.state.eventSources;\n        var sourceApis = [];\n        for (var internalId in sourceHash) {\n            sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n        }\n        return sourceApis;\n    };\n    Calendar.prototype.getEventSourceById = function (id) {\n        var sourceHash = this.state.eventSources;\n        id = String(id);\n        for (var sourceId in sourceHash) {\n            if (sourceHash[sourceId].publicId === id) {\n                return new EventSourceApi(this, sourceHash[sourceId]);\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.addEventSource = function (sourceInput) {\n        if (sourceInput instanceof EventSourceApi) {\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                this.dispatch({\n                    type: 'ADD_EVENT_SOURCES',\n                    sources: [sourceInput.internalEventSource]\n                });\n            }\n            return sourceInput;\n        }\n        var eventSource = parseEventSource(sourceInput, this);\n        if (eventSource) { // TODO: error otherwise?\n            this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n            return new EventSourceApi(this, eventSource);\n        }\n        return null;\n    };\n    Calendar.prototype.removeAllEventSources = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n    };\n    Calendar.prototype.refetchEvents = function () {\n        this.dispatch({ type: 'FETCH_EVENT_SOURCES' });\n    };\n    // Scroll\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.scrollToTime = function (timeInput) {\n        var duration = createDuration(timeInput);\n        if (duration) {\n            this.component.view.scrollToDuration(duration);\n        }\n    };\n    return Calendar;\n}());\nEmitterMixin.mixInto(Calendar);\n// for memoizers\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildComponentContext$1(theme, dateEnv, options) {\n    return new ComponentContext(this, theme, dateEnv, options, null);\n}\nfunction buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone: timeZone,\n        namedTimeZoneImpl: namedTimeZoneImpl,\n        locale: locale,\n        weekNumberCalculation: weekNumberCalculation,\n        firstDay: firstDay,\n        weekLabel: weekLabel,\n        cmdFormatter: cmdFormatter\n    });\n}\nfunction buildTheme(calendarOptions) {\n    var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n    return new themeClass(calendarOptions);\n}\nfunction buildDelayedRerender(wait) {\n    var func = this.tryRerender.bind(this);\n    if (wait != null) {\n        func = debounce(func, wait);\n    }\n    return func;\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, function (eventSource) {\n        return eventSource.ui;\n    });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    var eventUiBases = { '': eventUiSingleBase };\n    for (var defId in eventDefs) {\n        var def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\n\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(viewSpec, parentEl) {\n        var _this = _super.call(this, createElement('div', { className: 'fc-view fc-' + viewSpec.type + '-view' })) || this;\n        _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n        _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n        _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n        _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n        _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n        _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n        _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n        _this.viewSpec = viewSpec;\n        _this.type = viewSpec.type;\n        parentEl.appendChild(_this.el);\n        _this.initialize();\n        return _this;\n    }\n    View.prototype.initialize = function () {\n    };\n    Object.defineProperty(View.prototype, \"activeStart\", {\n        // Date Setting/Unsetting\n        // -----------------------------------------------------------------------------------------------------------------\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"activeEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentStart\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // General Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.render = function (props, context) {\n        this.renderDatesMem(props.dateProfile);\n        this.renderBusinessHoursMem(props.businessHours);\n        this.renderDateSelectionMem(props.dateSelection);\n        this.renderEventsMem(props.eventStore);\n        this.renderEventSelectionMem(props.eventSelection);\n        this.renderEventDragMem(props.eventDrag);\n        this.renderEventResizeMem(props.eventResize);\n    };\n    View.prototype.beforeUpdate = function () {\n        this.addScroll(this.queryScroll());\n    };\n    View.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderDatesMem.unrender(); // should unrender everything else\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        var calendar = this.context.calendar;\n        if (isResize) {\n            this.addScroll(this.queryScroll()); // NOTE: same code as in beforeUpdate\n        }\n        if (isResize || // HACKS...\n            calendar.isViewUpdated ||\n            calendar.isDatesUpdated ||\n            calendar.isEventsUpdated) {\n            // sort of the catch-all sizing\n            // anything that might cause dimension changes\n            this.updateBaseSize(isResize, viewHeight, isAuto);\n        }\n        // NOTE: popScroll is called by CalendarComponent\n    };\n    View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    };\n    // Date Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDatesWrap = function (dateProfile) {\n        this.renderDates(dateProfile);\n        this.addScroll({\n            duration: createDuration(this.context.options.scrollTime)\n        });\n    };\n    View.prototype.unrenderDatesWrap = function () {\n        this.stopNowIndicator();\n        this.unrenderDates();\n    };\n    View.prototype.renderDates = function (dateProfile) { };\n    View.prototype.unrenderDates = function () { };\n    // Business Hours\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderBusinessHours = function (businessHours) { };\n    View.prototype.unrenderBusinessHours = function () { };\n    // Date Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.renderDateSelection(selection);\n        }\n    };\n    View.prototype.unrenderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.unrenderDateSelection(selection);\n        }\n    };\n    View.prototype.renderDateSelection = function (selection) { };\n    View.prototype.unrenderDateSelection = function (selection) { };\n    // Event Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEvents = function (eventStore) { };\n    View.prototype.unrenderEvents = function () { };\n    // util for subclasses\n    View.prototype.sliceEvents = function (eventStore, allDay) {\n        var props = this.props;\n        return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.context.nextDayThreshold : null).fg;\n    };\n    // Event Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.renderEventSelection(instanceId);\n        }\n    };\n    View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.unrenderEventSelection(instanceId);\n        }\n    };\n    View.prototype.renderEventSelection = function (instanceId) { };\n    View.prototype.unrenderEventSelection = function (instanceId) { };\n    // Event Drag\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventDragWrap = function (state) {\n        if (state) {\n            this.renderEventDrag(state);\n        }\n    };\n    View.prototype.unrenderEventDragWrap = function (state) {\n        if (state) {\n            this.unrenderEventDrag(state);\n        }\n    };\n    View.prototype.renderEventDrag = function (state) { };\n    View.prototype.unrenderEventDrag = function (state) { };\n    // Event Resize\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventResizeWrap = function (state) {\n        if (state) {\n            this.renderEventResize(state);\n        }\n    };\n    View.prototype.unrenderEventResizeWrap = function (state) {\n        if (state) {\n            this.unrenderEventResize(state);\n        }\n    };\n    View.prototype.renderEventResize = function (state) { };\n    View.prototype.unrenderEventResize = function (state) { };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Immediately render the current time indicator and begins re-rendering it at an interval,\n    // which is defined by this.getNowIndicatorUnit().\n    // TODO: somehow do this for the current whole day's background too\n    // USAGE: must be called manually from subclasses' render methods! don't need to call stopNowIndicator tho\n    View.prototype.startNowIndicator = function (dateProfile, dateProfileGenerator) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, dateEnv = _a.dateEnv, options = _a.options;\n        var unit;\n        var update;\n        var delay; // ms wait value\n        if (options.nowIndicator && !this.initialNowDate) {\n            unit = this.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n            if (unit) {\n                update = this.updateNowIndicator.bind(this);\n                this.initialNowDate = calendar.getNow();\n                this.initialNowQueriedMs = new Date().valueOf();\n                // wait until the beginning of the next interval\n                delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf();\n                // TODO: maybe always use setTimeout, waiting until start of next unit\n                this.nowIndicatorTimeoutID = setTimeout(function () {\n                    _this.nowIndicatorTimeoutID = null;\n                    update();\n                    if (unit === 'second') {\n                        delay = 1000; // every second\n                    }\n                    else {\n                        delay = 1000 * 60; // otherwise, every minute\n                    }\n                    _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n                }, delay);\n            }\n            // rendering will be initiated in updateSize\n        }\n    };\n    // rerenders the now indicator, computing the new current time from the amount of time that has passed\n    // since the initial getNow call.\n    View.prototype.updateNowIndicator = function () {\n        if (this.props.dateProfile && // a way to determine if dates were rendered yet\n            this.initialNowDate // activated before?\n        ) {\n            this.unrenderNowIndicator(); // won't unrender if unnecessary\n            this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n            this.isNowIndicatorRendered = true;\n        }\n    };\n    // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n    // Won't cause side effects if indicator isn't rendered.\n    View.prototype.stopNowIndicator = function () {\n        if (this.nowIndicatorTimeoutID) {\n            clearTimeout(this.nowIndicatorTimeoutID);\n            this.nowIndicatorTimeoutID = null;\n        }\n        if (this.nowIndicatorIntervalID) {\n            clearInterval(this.nowIndicatorIntervalID);\n            this.nowIndicatorIntervalID = null;\n        }\n        if (this.isNowIndicatorRendered) {\n            this.unrenderNowIndicator();\n            this.isNowIndicatorRendered = false;\n        }\n    };\n    View.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        // subclasses should implement\n    };\n    // Renders a current time indicator at the given datetime\n    View.prototype.renderNowIndicator = function (date) {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    // Undoes the rendering actions from renderNowIndicator\n    View.prototype.unrenderNowIndicator = function () {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    /* Scroller\n    ------------------------------------------------------------------------------------------------------------------*/\n    View.prototype.addScroll = function (scroll, isForced) {\n        if (isForced) {\n            scroll.isForced = isForced;\n        }\n        __assign(this.queuedScroll || (this.queuedScroll = {}), scroll);\n    };\n    View.prototype.popScroll = function (isResize) {\n        this.applyQueuedScroll(isResize);\n        this.queuedScroll = null;\n    };\n    View.prototype.applyQueuedScroll = function (isResize) {\n        if (this.queuedScroll) {\n            this.applyScroll(this.queuedScroll, isResize);\n        }\n    };\n    View.prototype.queryScroll = function () {\n        var scroll = {};\n        if (this.props.dateProfile) { // dates rendered yet?\n            __assign(scroll, this.queryDateScroll());\n        }\n        return scroll;\n    };\n    View.prototype.applyScroll = function (scroll, isResize) {\n        var duration = scroll.duration, isForced = scroll.isForced;\n        if (duration != null && !isForced) {\n            delete scroll.duration;\n            if (this.props.dateProfile) { // dates rendered yet?\n                __assign(scroll, this.computeDateScroll(duration));\n            }\n        }\n        if (this.props.dateProfile) { // dates rendered yet?\n            this.applyDateScroll(scroll);\n        }\n    };\n    View.prototype.computeDateScroll = function (duration) {\n        return {}; // subclasses must implement\n    };\n    View.prototype.queryDateScroll = function () {\n        return {}; // subclasses must implement\n    };\n    View.prototype.applyDateScroll = function (scroll) {\n        // subclasses must implement\n    };\n    // for API\n    View.prototype.scrollToDuration = function (duration) {\n        this.applyScroll({ duration: duration }, false);\n    };\n    return View;\n}(DateComponent));\nEmitterMixin.mixInto(View);\nView.prototype.usesMinMaxTime = false;\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\nvar FgEventRenderer = /** @class */ (function () {\n    function FgEventRenderer() {\n        this.segs = [];\n        this.isSizeDirty = false;\n    }\n    FgEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        this.context = context;\n        this.rangeUpdated(); // called too frequently :(\n        // render an `.el` on each seg\n        // returns a subset of the segs. segs that were actually rendered\n        segs = this.renderSegEls(segs, mirrorInfo);\n        this.segs = segs;\n        this.attachSegs(segs, mirrorInfo);\n        this.isSizeDirty = true;\n        triggerRenderedSegs(this.context, this.segs, Boolean(mirrorInfo));\n    };\n    FgEventRenderer.prototype.unrender = function (context, _segs, mirrorInfo) {\n        triggerWillRemoveSegs(this.context, this.segs, Boolean(mirrorInfo));\n        this.detachSegs(this.segs);\n        this.segs = [];\n    };\n    // Updates values that rely on options and also relate to range\n    FgEventRenderer.prototype.rangeUpdated = function () {\n        var options = this.context.options;\n        var displayEventTime;\n        var displayEventEnd;\n        this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n        displayEventTime = options.displayEventTime;\n        if (displayEventTime == null) {\n            displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n        }\n        displayEventEnd = options.displayEventEnd;\n        if (displayEventEnd == null) {\n            displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n        }\n        this.displayEventTime = displayEventTime;\n        this.displayEventEnd = displayEventEnd;\n    };\n    // Renders and assigns an `el` property for each foreground event segment.\n    // Only returns segments that successfully rendered.\n    FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n        var html = '';\n        var i;\n        if (segs.length) { // don't build an empty html string\n            // build a large concatenation of event segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(segs[i], mirrorInfo);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            segs = filterSegsViaEls(this.context, segs, Boolean(mirrorInfo));\n        }\n        return segs;\n    };\n    // Generic utility for generating the HTML classNames for an event segment's element\n    FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n        var classes = [\n            'fc-event',\n            seg.isStart ? 'fc-start' : 'fc-not-start',\n            seg.isEnd ? 'fc-end' : 'fc-not-end'\n        ].concat(seg.eventRange.ui.classNames);\n        if (isDraggable) {\n            classes.push('fc-draggable');\n        }\n        if (isResizable) {\n            classes.push('fc-resizable');\n        }\n        if (mirrorInfo) {\n            classes.push('fc-mirror');\n            if (mirrorInfo.isDragging) {\n                classes.push('fc-dragging');\n            }\n            if (mirrorInfo.isResizing) {\n                classes.push('fc-resizing');\n            }\n        }\n        return classes;\n    };\n    // Compute the text that should be displayed on an event's element.\n    // `range` can be the Event object itself, or something range-like, with at least a `start`.\n    // If event times are disabled, or the event has no time, will return a blank string.\n    // If not specified, formatter will default to the eventTimeFormat setting,\n    // and displayEnd will default to the displayEventEnd setting.\n    FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n        var def = eventRange.def, instance = eventRange.instance;\n        return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n    };\n    FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n        var dateEnv = this.context.dateEnv;\n        if (formatter == null) {\n            formatter = this.eventTimeFormat;\n        }\n        if (displayEnd == null) {\n            displayEnd = this.displayEventEnd;\n        }\n        if (this.displayEventTime && !allDay) {\n            if (displayEnd && end) {\n                return dateEnv.formatRange(start, end, formatter, {\n                    forcedStartTzo: forcedStartTzo,\n                    forcedEndTzo: forcedEndTzo\n                });\n            }\n            else {\n                return dateEnv.format(start, formatter, {\n                    forcedTzo: forcedStartTzo\n                });\n            }\n        }\n        return '';\n    };\n    FgEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true\n        };\n    };\n    FgEventRenderer.prototype.computeDisplayEventTime = function () {\n        return true;\n    };\n    FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Utility for generating event skin-related CSS properties\n    FgEventRenderer.prototype.getSkinCss = function (ui) {\n        return {\n            'background-color': ui.backgroundColor,\n            'border-color': ui.borderColor,\n            color: ui.textColor\n        };\n    };\n    FgEventRenderer.prototype.sortEventSegs = function (segs) {\n        var specs = this.context.eventOrderSpecs;\n        var objs = segs.map(buildSegCompareObj);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    FgEventRenderer.prototype.computeSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.computeSegSizes(this.segs);\n        }\n    };\n    FgEventRenderer.prototype.assignSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.assignSegSizes(this.segs);\n            this.isSizeDirty = false;\n        }\n    };\n    FgEventRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FgEventRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    // Manipulation on rendered segs\n    FgEventRenderer.prototype.hideByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.showByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = '';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                var eventInstance = seg.eventRange.instance;\n                if (eventInstance && eventInstance.instanceId === instanceId &&\n                    seg.el // necessary?\n                ) {\n                    seg.el.classList.add('fc-selected');\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (seg.el) { // necessary?\n                    seg.el.classList.remove('fc-selected');\n                }\n            }\n        }\n    };\n    return FgEventRenderer;\n}());\n// returns a object with all primitive props that can be compared\nfunction buildSegCompareObj(seg) {\n    var eventDef = seg.eventRange.def;\n    var range = seg.eventRange.instance.range;\n    var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n    var end = range.end ? range.end.valueOf() : 0; // \"\n    return __assign({}, eventDef.extendedProps, eventDef, { id: eventDef.publicId, start: start,\n        end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg // for later retrieval\n     });\n}\n\n/*\nTODO: when refactoring this class, make a new FillRenderer instance for each `type`\n*/\nvar FillRenderer = /** @class */ (function () {\n    function FillRenderer() {\n        this.fillSegTag = 'div';\n        this.dirtySizeFlags = {};\n        this.containerElsByType = {};\n        this.segsByType = {};\n    }\n    FillRenderer.prototype.getSegsByType = function (type) {\n        return this.segsByType[type] || [];\n    };\n    FillRenderer.prototype.renderSegs = function (type, context, segs) {\n        var _a;\n        this.context = context;\n        var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n        var containerEls = this.attachSegs(type, renderedSegs);\n        if (containerEls) {\n            (_a = (this.containerElsByType[type] || (this.containerElsByType[type] = []))).push.apply(_a, containerEls);\n        }\n        this.segsByType[type] = renderedSegs;\n        if (type === 'bgEvent') {\n            triggerRenderedSegs(context, renderedSegs, false); // isMirror=false\n        }\n        this.dirtySizeFlags[type] = true;\n    };\n    // Unrenders a specific type of fill that is currently rendered on the grid\n    FillRenderer.prototype.unrender = function (type, context) {\n        var segs = this.segsByType[type];\n        if (segs) {\n            if (type === 'bgEvent') {\n                triggerWillRemoveSegs(context, segs, false); // isMirror=false\n            }\n            this.detachSegs(type, segs);\n        }\n    };\n    // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n    // Only returns segments that successfully rendered.\n    FillRenderer.prototype.renderSegEls = function (type, segs) {\n        var _this = this;\n        var html = '';\n        var i;\n        if (segs.length) {\n            // build a large concatenation of segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(type, segs[i]);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            if (type === 'bgEvent') {\n                segs = filterSegsViaEls(this.context, segs, false // isMirror. background events can never be mirror elements\n                );\n            }\n            // correct element type? (would be bad if a non-TD were inserted into a table for example)\n            segs = segs.filter(function (seg) {\n                return elementMatches(seg.el, _this.fillSegTag);\n            });\n        }\n        return segs;\n    };\n    // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n    FillRenderer.prototype.renderSegHtml = function (type, seg) {\n        var css = null;\n        var classNames = [];\n        if (type !== 'highlight' && type !== 'businessHours') {\n            css = {\n                'background-color': seg.eventRange.ui.backgroundColor\n            };\n        }\n        if (type !== 'highlight') {\n            classNames = classNames.concat(seg.eventRange.ui.classNames);\n        }\n        if (type === 'businessHours') {\n            classNames.push('fc-bgevent');\n        }\n        else {\n            classNames.push('fc-' + type.toLowerCase());\n        }\n        return '<' + this.fillSegTag +\n            (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') +\n            (css ? ' style=\"' + cssToStr(css) + '\"' : '') +\n            '></' + this.fillSegTag + '>';\n    };\n    FillRenderer.prototype.detachSegs = function (type, segs) {\n        var containerEls = this.containerElsByType[type];\n        if (containerEls) {\n            containerEls.forEach(removeElement);\n            delete this.containerElsByType[type];\n        }\n    };\n    FillRenderer.prototype.computeSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.computeSegSizes(this.segsByType[type]);\n            }\n        }\n    };\n    FillRenderer.prototype.assignSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.assignSegSizes(this.segsByType[type]);\n            }\n        }\n        this.dirtySizeFlags = {};\n    };\n    FillRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FillRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    return FillRenderer;\n}());\n\nvar NamedTimeZoneImpl = /** @class */ (function () {\n    function NamedTimeZoneImpl(timeZoneName) {\n        this.timeZoneName = timeZoneName;\n    }\n    return NamedTimeZoneImpl;\n}());\n\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\nvar ElementDragging = /** @class */ (function () {\n    function ElementDragging(el) {\n        this.emitter = new EmitterMixin();\n    }\n    ElementDragging.prototype.destroy = function () {\n    };\n    ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        // optional\n    };\n    return ElementDragging;\n}());\n\nfunction formatDate(dateInput, settings) {\n    if (settings === void 0) { settings = {}; }\n    var dateEnv = buildDateEnv$1(settings);\n    var formatter = createFormatter(settings);\n    var dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo\n    });\n}\nfunction formatRange(startInput, endInput, settings // mixture of env and formatter settings\n) {\n    var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n    var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n    var startMeta = dateEnv.createMarkerMeta(startInput);\n    var endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: settings.isEndExclusive\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv$1(settings) {\n    var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    // ensure required settings\n    settings = __assign({ timeZone: globalDefaults.timeZone, calendarSystem: 'gregory' }, settings, { locale: locale });\n    return new DateEnv(settings);\n}\n\nvar DRAG_META_PROPS = {\n    startTime: createDuration,\n    duration: createDuration,\n    create: Boolean,\n    sourceId: String\n};\nvar DRAG_META_DEFAULTS = {\n    create: true\n};\nfunction parseDragMeta(raw) {\n    var leftoverProps = {};\n    var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n    refined.leftoverProps = leftoverProps;\n    return refined;\n}\n\n// Computes a default column header formatting string if `colFormat` is not explicitly defined\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n    // if more than one week row, or if there are a lot of columns with not much space,\n    // put just the day numbers will be in each cell\n    if (!datesRepDistinctDays || dayCnt > 10) {\n        return { weekday: 'short' }; // \"Sat\"\n    }\n    else if (dayCnt > 1) {\n        return { weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }; // \"Sat 11/12\"\n    }\n    else {\n        return { weekday: 'long' }; // \"Saturday\"\n    }\n}\nfunction renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme, options = context.options;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n    var classNames = [\n        'fc-day-header',\n        theme.getClass('widgetHeader')\n    ];\n    var innerHtml;\n    if (typeof options.columnHeaderHtml === 'function') {\n        innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n    }\n    else if (typeof options.columnHeaderText === 'function') {\n        innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n    }\n    else {\n        innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n    }\n    // if only one row of days, the classNames on the header can represent the specific days beneath\n    if (datesRepDistinctDays) {\n        classNames = classNames.concat(\n        // includes the day-of-week class\n        // noThemeHighlight=true (don't highlight the header)\n        getDayClasses(dateMarker, dateProfile, context, true));\n    }\n    else {\n        classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n    }\n    return '' +\n        '<th class=\"' + classNames.join(' ') + '\"' +\n        ((isDateValid && datesRepDistinctDays) ?\n            ' data-date=\"' + dateEnv.formatIso(dateMarker, { omitTime: true }) + '\"' :\n            '') +\n        (colspan > 1 ?\n            ' colspan=\"' + colspan + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '>' +\n        (isDateValid ?\n            // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n            buildGotoAnchorHtml(options, dateEnv, { date: dateMarker, forceOff: !datesRepDistinctDays || colCnt === 1 }, innerHtml) :\n            // if not valid, display text, but no link\n            innerHtml) +\n        '</th>';\n}\n\nvar DayHeader = /** @class */ (function (_super) {\n    __extends(DayHeader, _super);\n    function DayHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    DayHeader.prototype.render = function (props, context) {\n        var dates = props.dates, datesRepDistinctDays = props.datesRepDistinctDays;\n        var parts = [];\n        this.renderSkeleton(context);\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        var colHeadFormat = createFormatter(context.options.columnHeaderFormat ||\n            computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, context));\n        }\n        if (context.isRtl) {\n            parts.reverse();\n        }\n        this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n    };\n    DayHeader.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    DayHeader.prototype._renderSkeleton = function (context) {\n        var theme = context.theme;\n        var parentEl = this.parentEl;\n        parentEl.innerHTML = ''; // because might be nbsp\n        parentEl.appendChild(this.el = htmlToElement('<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<thead></thead>' +\n            '</table>' +\n            '</div>'));\n        this.thead = this.el.querySelector('thead');\n    };\n    DayHeader.prototype._unrenderSkeleton = function () {\n        removeElement(this.el);\n    };\n    return DayHeader;\n}(Component));\n\nvar DaySeries = /** @class */ (function () {\n    function DaySeries(range, dateProfileGenerator) {\n        var date = range.start;\n        var end = range.end;\n        var indices = [];\n        var dates = [];\n        var dayIndex = -1;\n        while (date < end) { // loop each day from start to end\n            if (dateProfileGenerator.isHiddenDay(date)) {\n                indices.push(dayIndex + 0.5); // mark that it's between indices\n            }\n            else {\n                dayIndex++;\n                indices.push(dayIndex);\n                dates.push(date);\n            }\n            date = addDays(date, 1);\n        }\n        this.dates = dates;\n        this.indices = indices;\n        this.cnt = dates.length;\n    }\n    DaySeries.prototype.sliceRange = function (range) {\n        var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n        var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n        var clippedFirstIndex = Math.max(0, firstIndex);\n        var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n        // deal with in-between indices\n        clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n        clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n        if (clippedFirstIndex <= clippedLastIndex) {\n            return {\n                firstIndex: clippedFirstIndex,\n                lastIndex: clippedLastIndex,\n                isStart: firstIndex === clippedFirstIndex,\n                isEnd: lastIndex === clippedLastIndex\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n    // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n    // If before the first offset, returns a negative number.\n    // If after the last offset, returns an offset past the last cell offset.\n    // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n    DaySeries.prototype.getDateDayIndex = function (date) {\n        var indices = this.indices;\n        var dayOffset = Math.floor(diffDays(this.dates[0], date));\n        if (dayOffset < 0) {\n            return indices[0] - 1;\n        }\n        else if (dayOffset >= indices.length) {\n            return indices[indices.length - 1] + 1;\n        }\n        else {\n            return indices[dayOffset];\n        }\n    };\n    return DaySeries;\n}());\n\nvar DayTable = /** @class */ (function () {\n    function DayTable(daySeries, breakOnWeeks) {\n        var dates = daySeries.dates;\n        var daysPerRow;\n        var firstDay;\n        var rowCnt;\n        if (breakOnWeeks) {\n            // count columns until the day-of-week repeats\n            firstDay = dates[0].getUTCDay();\n            for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n                if (dates[daysPerRow].getUTCDay() === firstDay) {\n                    break;\n                }\n            }\n            rowCnt = Math.ceil(dates.length / daysPerRow);\n        }\n        else {\n            rowCnt = 1;\n            daysPerRow = dates.length;\n        }\n        this.rowCnt = rowCnt;\n        this.colCnt = daysPerRow;\n        this.daySeries = daySeries;\n        this.cells = this.buildCells();\n        this.headerDates = this.buildHeaderDates();\n    }\n    DayTable.prototype.buildCells = function () {\n        var rows = [];\n        for (var row = 0; row < this.rowCnt; row++) {\n            var cells = [];\n            for (var col = 0; col < this.colCnt; col++) {\n                cells.push(this.buildCell(row, col));\n            }\n            rows.push(cells);\n        }\n        return rows;\n    };\n    DayTable.prototype.buildCell = function (row, col) {\n        return {\n            date: this.daySeries.dates[row * this.colCnt + col]\n        };\n    };\n    DayTable.prototype.buildHeaderDates = function () {\n        var dates = [];\n        for (var col = 0; col < this.colCnt; col++) {\n            dates.push(this.cells[0][col].date);\n        }\n        return dates;\n    };\n    DayTable.prototype.sliceRange = function (range) {\n        var colCnt = this.colCnt;\n        var seriesSeg = this.daySeries.sliceRange(range);\n        var segs = [];\n        if (seriesSeg) {\n            var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n            var index = firstIndex;\n            while (index <= lastIndex) {\n                var row = Math.floor(index / colCnt);\n                var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                segs.push({\n                    row: row,\n                    firstCol: index % colCnt,\n                    lastCol: (nextIndex - 1) % colCnt,\n                    isStart: seriesSeg.isStart && index === firstIndex,\n                    isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex\n                });\n                index = nextIndex;\n            }\n        }\n        return segs;\n    };\n    return DayTable;\n}());\n\nvar Slicer = /** @class */ (function () {\n    function Slicer() {\n        this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n        this.sliceDateSelection = memoize(this._sliceDateSpan);\n        this.sliceEventStore = memoize(this._sliceEventStore);\n        this.sliceEventDrag = memoize(this._sliceInteraction);\n        this.sliceEventResize = memoize(this._sliceInteraction);\n    }\n    Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        var eventUiBases = props.eventUiBases;\n        var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n        return {\n            dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n            businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, calendar, component].concat(extraArgs)),\n            fgEventSegs: eventSegs.fg,\n            bgEventSegs: eventSegs.bg,\n            eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventSelection: props.eventSelection\n        }; // TODO: give interactionSegs?\n    };\n    Slicer.prototype.sliceNowDate = function (// does not memoize\n    date, component) {\n        var extraArgs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            extraArgs[_i - 2] = arguments[_i];\n        }\n        return this._sliceDateSpan.apply(this, [{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n            {},\n            component].concat(extraArgs));\n    };\n    Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!businessHours) {\n            return [];\n        }\n        return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), calendar),\n            {},\n            dateProfile,\n            nextDayThreshold,\n            component].concat(extraArgs)).bg;\n    };\n    Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (eventStore) {\n            var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n                fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n            };\n        }\n        else {\n            return { bg: [], fg: [] };\n        }\n    };\n    Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!interaction) {\n            return null;\n        }\n        var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n        return {\n            segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n            affectedInstances: interaction.affectedEvents.instances,\n            isEvent: interaction.isEvent,\n            sourceSeg: interaction.origSeg\n        };\n    };\n    Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n        var extraArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            extraArgs[_i - 3] = arguments[_i];\n        }\n        if (!dateSpan) {\n            return [];\n        }\n        var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.context.calendar);\n        var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n        for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n            var seg = segs_1[_a];\n            seg.component = component;\n            seg.eventRange = eventRange;\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n    extraArgs) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n    extraArgs) {\n        var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            seg.component = component;\n            seg.eventRange = eventRange;\n            seg.isStart = eventRange.isStart && seg.isStart;\n            seg.isEnd = eventRange.isEnd && seg.isEnd;\n        }\n        return segs;\n    };\n    return Slicer;\n}());\n/*\nfor incorporating minTime/maxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n    var range = dateProfile.activeRange;\n    if (isComponentAllDay) {\n        return range;\n    }\n    return {\n        start: addMs(range.start, dateProfile.minTime.milliseconds),\n        end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n    };\n}\n\n// exports\n// --------------------------------------------------------------------------------------------------\nvar version = '4.4.0';\n\nexport { Calendar, Component, ComponentContext, DateComponent, DateEnv, DateProfileGenerator, DayHeader, DaySeries, DayTable, ElementDragging, ElementScrollController, EmitterMixin, EventApi, FgEventRenderer, FillRenderer, Interaction, Mixin, NamedTimeZoneImpl, PositionCache, ScrollComponent, ScrollController, Slicer, Splitter, Theme, View, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, appendToElement, applyAll, applyMutationToEventStore, applyStyle, applyStyleProp, asRoughMinutes, asRoughMs, asRoughSeconds, buildGotoAnchorHtml, buildSegCompareObj, capitaliseFirstLetter, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compensateScroll, computeClippingRect, computeEdges, computeEventDraggable, computeEventEndResizable, computeEventStartResizable, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeVisibleDayRange, config, constrainPoint, createDuration, createElement, createEmptyEventStore, createEventInstance, createFormatter, createPlugin, cssToStr, debounce, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, distributeHeight, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findChildren, findElements, flexibleCompare, forceClassName, formatDate, formatIsoTimeString, formatRange, getAllDayHtml, getClippingParents, getDayClasses, getElSeg, getRectCenter, getRelevantEvents, globalDefaults, greatestDurationDenominator, hasBgRendering, htmlEscape, htmlToElement, insertAfterElement, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, isArraysEqual, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isSingleDay, isValidDate, listenBySelector, mapHash, matchCellWidths, memoize, memoizeOutput, memoizeRendering, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, prependToElement, preventContextMenu, preventDefault, preventSelection, processScopedUiProps, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineProps, removeElement, removeExact, renderDateCell, requestJson, sliceEventStore, startOfDay, subtractInnerElHeight, translateRect, uncompensateScroll, undistributeHeight, unpromisify, version, whenTransitionDone, wholeDivideDurations };\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"stars\"},[_c('li',{staticClass:\"stars-item\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"star\"}})],1),_c('li',{staticClass:\"stars-item\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"star\"}})],1),_c('li',{staticClass:\"stars-item\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"star\"}})],1),_c('li',{staticClass:\"stars-item\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"star\"}})],1),_c('li',{staticClass:\"stars-item\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"star-half\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component\nexport default class Stars extends Vue {\n  @Prop() private star!: 1|2|3|4|5\n\n  @Prop() private half!: boolean\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stars.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stars.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Stars.vue?vue&type=template&id=1e50832b&scoped=true&\"\nimport script from \"./Stars.vue?vue&type=script&lang=ts&\"\nexport * from \"./Stars.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Stars.vue?vue&type=style&index=0&id=1e50832b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e50832b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('dl',{staticClass:\"description-list\"},[_c('dt',{staticClass:\"description-list-term\"},[_vm._v(\"\")]),_c('dd',{staticClass:\"description-list-desc\"},[_vm._v(_vm._s(_vm.station))]),_c('dt',{staticClass:\"description-list-term\"},[_vm._v(\"\")]),_c('dd',{staticClass:\"description-list-desc\"},[_vm._v(_vm._s(_vm.area))]),_c('dt',{staticClass:\"description-list-term\"},[_vm._v(\"\")]),_c('dd',{staticClass:\"description-list-desc\"},[_vm._v(_vm._s(_vm.price)+\"/h\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component\nexport default class DescriptionList extends Vue {\n  @Prop() private station!: string\n\n  @Prop() private area!: string\n\n  @Prop() private price!: string\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DescriptionList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DescriptionList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DescriptionList.vue?vue&type=template&id=a115caee&scoped=true&\"\nimport script from \"./DescriptionList.vue?vue&type=script&lang=ts&\"\nexport * from \"./DescriptionList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DescriptionList.vue?vue&type=style&index=0&id=a115caee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a115caee\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=style&index=0&id=63a223b2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=style&index=0&id=63a223b2&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stars.vue?vue&type=style&index=0&id=1e50832b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stars.vue?vue&type=style&index=0&id=1e50832b&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('section',{staticClass:\"detail-header\"},[_vm._m(0),_c('div',{staticClass:\"detail-info\"},[_c('h1',{staticClass:\"detail-name\"},[_vm._v(\" \")]),_c('Stars',{staticClass:\"stars-detail\",attrs:{\"star\":\"4\",\"half\":\"true\"}}),_c('DescriptionList',{staticClass:\"description-detail\",attrs:{\"station\":\"\",\"area\":\"\",\"price\":\"3,000~\"}})],1)]),_c('section',{staticClass:\"detail-box\"},[_c('h2',{staticClass:\"heading-02\"},[_c('font-awesome-icon',{staticClass:\"heading-icon\",attrs:{\"icon\":\"user\"}}),_vm._v(\"  \")],1),_c('p',[_vm._v(\"      \")])]),_c('section',{staticClass:\"detail-box\"},[_c('h2',{staticClass:\"heading-02\"},[_c('font-awesome-icon',{staticClass:\"heading-icon\",attrs:{\"icon\":\"lightbulb\"}}),_vm._v(\"  \")],1),_c('p',[_vm._v(\"       \")])]),_c('section',{staticClass:\"detail-box\"},[_c('h2',{staticClass:\"heading-02\"},[_c('font-awesome-icon',{staticClass:\"heading-icon\",attrs:{\"icon\":\"check-square\"}}),_vm._v(\"  \")],1),_c('p',[_vm._v(\"     \")])]),_c('section',{staticClass:\"detail-box\"},[_c('h2',{staticClass:\"heading-02\"},[_c('font-awesome-icon',{staticClass:\"heading-icon\",attrs:{\"icon\":\"file-signature\"}}),_vm._v(\"  \")],1),_c('Review',{attrs:{\"name\":\" \",\"date\":\"2020/03/03\",\"image\":\"/t-housekeeper/female.svg\",\"stars\":\"5\",\"half\":\"false\",\"review\":\"\"}}),_c('Review',{attrs:{\"name\":\" ryo\",\"date\":\"2020/03/03\",\"image\":\"/t-housekeeper/maturewoman.svg\",\"stars\":\"4\",\"half\":\"true\",\"review\":\"\"}})],1),_c('section',{staticClass:\"detail-box\"},[_c('h2',{staticClass:\"heading-02\"},[_c('font-awesome-icon',{staticClass:\"heading-icon\",attrs:{\"icon\":\"calendar-check\"}}),_vm._v(\"  \")],1),_c('Calendar')],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"detail-image\"},[_c('img',{attrs:{\"src\":\"/t-housekeeper/boy.svg\",\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('FullCalendar',{attrs:{\"defaultView\":\"timeGridWeek\",\"locale\":\"ja\",\"plugins\":_vm.calendarPlugins,\"header\":_vm.header,\"events\":_vm.eventList},on:{\"eventClick\":_vm.eventClick}}),_c('Modal',{ref:\"modal\",class:_vm.modalClassName,attrs:{\"date\":_vm.date,\"startTime\":_vm.startTime,\"endTime\":_vm.endTime},on:{\"resetShowModal\":_vm.resetShowModal}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\nFullCalendar Day Grid Plugin v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, memoize, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DayGridDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n    function DayGridDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.options.monthMode &&\n            this.options.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return DayGridDateProfileGenerator;\n}(DateProfileGenerator));\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\nvar Popover = /** @class */ (function () {\n    function Popover(options) {\n        var _this = this;\n        this.isHidden = true;\n        this.margin = 10; // the space required between the popover and the edges of the scroll container\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        this.documentMousedown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            if (_this.el && !_this.el.contains(ev.target)) {\n                _this.hide();\n            }\n        };\n        this.options = options;\n    }\n    // Shows the popover on the specified position. Renders it if not already\n    Popover.prototype.show = function () {\n        if (this.isHidden) {\n            if (!this.el) {\n                this.render();\n            }\n            this.el.style.display = '';\n            this.position();\n            this.isHidden = false;\n            this.trigger('show');\n        }\n    };\n    // Hides the popover, through CSS, but does not remove it from the DOM\n    Popover.prototype.hide = function () {\n        if (!this.isHidden) {\n            this.el.style.display = 'none';\n            this.isHidden = true;\n            this.trigger('hide');\n        }\n    };\n    // Creates `this.el` and renders content inside of it\n    Popover.prototype.render = function () {\n        var _this = this;\n        var options = this.options;\n        var el = this.el = createElement('div', {\n            className: 'fc-popover ' + (options.className || ''),\n            style: {\n                top: '0',\n                left: '0'\n            }\n        });\n        if (typeof options.content === 'function') {\n            options.content(el);\n        }\n        options.parentEl.appendChild(el);\n        // when a click happens on anything inside with a 'fc-close' className, hide the popover\n        listenBySelector(el, 'click', '.fc-close', function (ev) {\n            _this.hide();\n        });\n        if (options.autoHide) {\n            document.addEventListener('mousedown', this.documentMousedown);\n        }\n    };\n    // Hides and unregisters any handlers\n    Popover.prototype.destroy = function () {\n        this.hide();\n        if (this.el) {\n            removeElement(this.el);\n            this.el = null;\n        }\n        document.removeEventListener('mousedown', this.documentMousedown);\n    };\n    // Positions the popover optimally, using the top/left/right options\n    Popover.prototype.position = function () {\n        var options = this.options;\n        var el = this.el;\n        var elDims = el.getBoundingClientRect(); // only used for width,height\n        var origin = computeRect(el.offsetParent);\n        var clippingRect = computeClippingRect(options.parentEl);\n        var top; // the \"position\" (not \"offset\") values for the popover\n        var left; //\n        // compute top and left\n        top = options.top || 0;\n        if (options.left !== undefined) {\n            left = options.left;\n        }\n        else if (options.right !== undefined) {\n            left = options.right - elDims.width; // derive the left value from the right value\n        }\n        else {\n            left = 0;\n        }\n        // constrain to the view port. if constrained by two edges, give precedence to top/left\n        top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n        top = Math.max(top, clippingRect.top + this.margin);\n        left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n        left = Math.max(left, clippingRect.left + this.margin);\n        applyStyle(el, {\n            top: top - origin.top,\n            left: left - origin.left\n        });\n    };\n    // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n    Popover.prototype.trigger = function (name) {\n        if (this.options[name]) {\n            this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n    };\n    return Popover;\n}());\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\nvar SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n    function SimpleDayGridEventRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Builds the HTML to be used for the default element for an individual segment\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = allDay && seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = allDay && seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeHtml = '';\n        var timeText;\n        var titleHtml;\n        classes.unshift('fc-day-grid-event', 'fc-h-event');\n        // Only display a timed events time if it is the starting segment\n        if (seg.isStart) {\n            timeText = this.getTimeText(eventRange);\n            if (timeText) {\n                timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n            }\n        }\n        titleHtml =\n            '<span class=\"fc-title\">' +\n                (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                '</span>';\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (context.options.dir === 'rtl' ?\n                titleHtml + ' ' + timeHtml : // put a natural space in between\n                timeHtml + ' ' + titleHtml //\n            ) +\n            '</div>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n    return SimpleDayGridEventRenderer;\n}(FgEventRenderer));\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\nvar DayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(DayGridEventRenderer, _super);\n    function DayGridEventRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    // Renders the given foreground event segments onto the grid\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // append to each row's content skeleton\n        this.dayGrid.rowEls.forEach(function (rowNode, i) {\n            rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n        });\n        // removes the \"more..\" events popover\n        if (!mirrorInfo) {\n            this.dayGrid.removeSegPopover();\n        }\n    };\n    // Unrenders all currently rendered foreground event segments\n    DayGridEventRenderer.prototype.detachSegs = function () {\n        var rowStructs = this.rowStructs || [];\n        var rowStruct;\n        while ((rowStruct = rowStructs.pop())) {\n            removeElement(rowStruct.tbodyEl);\n        }\n        this.rowStructs = null;\n    };\n    // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n        var rowStructs = [];\n        var segRows;\n        var row;\n        segRows = this.groupSegRows(segs); // group into nested arrays\n        // iterate each row of segment groupings\n        for (row = 0; row < segRows.length; row++) {\n            rowStructs.push(this.renderSegRow(row, segRows[row]));\n        }\n        return rowStructs;\n    };\n    // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n        var isRtl = this.context.isRtl;\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt;\n        var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n        var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n        var tbody = document.createElement('tbody');\n        var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n        var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n        var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n        var i;\n        var levelSegs;\n        var col;\n        var tr;\n        var j;\n        var seg;\n        var td;\n        // populates empty cells from the current column (`col`) to `endCol`\n        function emptyCellsUntil(endCol) {\n            while (col < endCol) {\n                // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                td = (loneCellMatrix[i - 1] || [])[col];\n                if (td) {\n                    td.rowSpan = (td.rowSpan || 1) + 1;\n                }\n                else {\n                    td = document.createElement('td');\n                    tr.appendChild(td);\n                }\n                cellMatrix[i][col] = td;\n                loneCellMatrix[i][col] = td;\n                col++;\n            }\n        }\n        for (i = 0; i < levelCnt; i++) { // iterate through all levels\n            levelSegs = segLevels[i];\n            col = 0;\n            tr = document.createElement('tr');\n            segMatrix.push([]);\n            cellMatrix.push([]);\n            loneCellMatrix.push([]);\n            // levelCnt might be 1 even though there are no actual levels. protect against this.\n            // this single empty row is useful for styling.\n            if (levelSegs) {\n                for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                    seg = levelSegs[j];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol);\n                    // create a container that occupies or more columns. append the event element.\n                    td = createElement('td', { className: 'fc-event-container' }, seg.el);\n                    if (leftCol !== rightCol) {\n                        td.colSpan = rightCol - leftCol + 1;\n                    }\n                    else { // a single-column segment\n                        loneCellMatrix[i][col] = td;\n                    }\n                    while (col <= rightCol) {\n                        cellMatrix[i][col] = td;\n                        segMatrix[i][col] = seg;\n                        col++;\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            emptyCellsUntil(colCnt); // finish off the row\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (isRtl) {\n                    appendToElement(tr, introHtml);\n                }\n                else {\n                    prependToElement(tr, introHtml);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        return {\n            row: row,\n            tbodyEl: tbody,\n            cellMatrix: cellMatrix,\n            segMatrix: segMatrix,\n            segLevels: segLevels,\n            segs: rowSegs\n        };\n    };\n    // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n        var isRtl = this.context.isRtl;\n        var colCnt = this.dayGrid.colCnt;\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        // Give preference to elements with certain criteria, so they have\n        // a chance to be closer to the top.\n        segs = this.sortEventSegs(segs);\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n            for (j = 0; j < levels.length; j++) {\n                if (!isDaySegCollision(seg, levels[j])) {\n                    break;\n                }\n            }\n            // `j` now holds the desired subrow index\n            seg.level = j;\n            seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n            seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n            ;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        // order segments left-to-right. very important if calendar is RTL\n        for (j = 0; j < levels.length; j++) {\n            levels[j].sort(compareDaySegCols);\n        }\n        return levels;\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n        var segRows = [];\n        var i;\n        for (i = 0; i < this.dayGrid.rowCnt; i++) {\n            segRows.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segRows[segs[i].row].push(segs[i]);\n        }\n        return segRows;\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n    return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer));\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n    for (i = 0; i < otherSegs.length; i++) {\n        otherSeg = otherSegs[i];\n        if (otherSeg.firstCol <= seg.lastCol &&\n            otherSeg.lastCol >= seg.firstCol) {\n            return true;\n        }\n    }\n    return false;\n}\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n    function DayGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var sourceSeg = mirrorInfo.sourceSeg;\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // inject each new event skeleton into each associated row\n        this.dayGrid.rowEls.forEach(function (rowNode, row) {\n            var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n            var skeletonTopEl;\n            var skeletonTop;\n            // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n            if (sourceSeg && sourceSeg.row === row) {\n                skeletonTopEl = sourceSeg.el;\n            }\n            else {\n                skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                if (!skeletonTopEl) { // when no events\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                }\n            }\n            skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                rowNode.getBoundingClientRect().top; // the offsetParent origin\n            skeletonEl.style.top = skeletonTop + 'px';\n            skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n            rowNode.appendChild(skeletonEl);\n        });\n    };\n    return DayGridMirrorRenderer;\n}(DayGridEventRenderer));\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\nvar DayGridFillRenderer = /** @class */ (function (_super) {\n    __extends(DayGridFillRenderer, _super);\n    function DayGridFillRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.fillSegTag = 'td'; // override the default tag name\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    DayGridFillRenderer.prototype.renderSegs = function (type, context, segs) {\n        // don't render timed background events\n        if (type === 'bgEvent') {\n            segs = segs.filter(function (seg) {\n                return seg.eventRange.def.allDay;\n            });\n        }\n        _super.prototype.renderSegs.call(this, type, context, segs);\n    };\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var els = [];\n        var i;\n        var seg;\n        var skeletonEl;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            skeletonEl = this.renderFillRow(type, seg);\n            this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n            els.push(skeletonEl);\n        }\n        return els;\n    };\n    // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n        var dayGrid = this.dayGrid;\n        var isRtl = this.context.isRtl;\n        var colCnt = dayGrid.colCnt;\n        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n        var startCol = leftCol;\n        var endCol = rightCol + 1;\n        var className;\n        var skeletonEl;\n        var trEl;\n        if (type === 'businessHours') {\n            className = 'bgevent';\n        }\n        else {\n            className = type.toLowerCase();\n        }\n        skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n            '<table><tr></tr></table>' +\n            '</div>');\n        trEl = skeletonEl.getElementsByTagName('tr')[0];\n        if (startCol > 0) {\n            appendToElement(trEl, \n            // will create (startCol + 1) td's\n            new Array(startCol + 1).join(EMPTY_CELL_HTML));\n        }\n        seg.el.colSpan = endCol - startCol;\n        trEl.appendChild(seg.el);\n        if (endCol < colCnt) {\n            appendToElement(trEl, \n            // will create (colCnt - endCol) td's\n            new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n        }\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n        if (introHtml) {\n            if (isRtl) {\n                appendToElement(trEl, introHtml);\n            }\n            else {\n                prependToElement(trEl, introHtml);\n            }\n        }\n        return skeletonEl;\n    };\n    return DayGridFillRenderer;\n}(FillRenderer));\n\nvar DayTile = /** @class */ (function (_super) {\n    __extends(DayTile, _super);\n    function DayTile(el) {\n        var _this = _super.call(this, el) || this;\n        var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n        var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        return _this;\n    }\n    DayTile.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.el,\n            useEventCenter: false\n        });\n    };\n    DayTile.prototype.render = function (props, context) {\n        this.renderFrame(props.date);\n        this.renderFgEvents(context, props.fgSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDragInstances);\n        this.renderEventResize(props.eventResizeInstances);\n    };\n    DayTile.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderFrame.unrender(); // should unrender everything else\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    DayTile.prototype._renderFrame = function (date) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n        var title = dateEnv.format(date, createFormatter(options.dayPopoverFormat) // TODO: cache\n        );\n        this.el.innerHTML =\n            '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                '<span class=\"fc-title\">' +\n                htmlEscape(title) +\n                '</span>' +\n                '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                '</div>' +\n                '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                '<div class=\"fc-event-container\"></div>' +\n                '</div>';\n        this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var date = this.props.date; // HACK\n        if (positionLeft < elWidth && positionTop < elHeight) {\n            return {\n                component: this,\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) }\n                },\n                dayEl: this.el,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight\n                },\n                layer: 1\n            };\n        }\n    };\n    return DayTile;\n}(DateComponent));\nvar DayTileEventRenderer = /** @class */ (function (_super) {\n    __extends(DayTileEventRenderer, _super);\n    function DayTileEventRenderer(dayTile) {\n        var _this = _super.call(this) || this;\n        _this.dayTile = dayTile;\n        return _this;\n    }\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            this.dayTile.segContainerEl.appendChild(seg.el);\n        }\n    };\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer));\n\nvar DayBgRow = /** @class */ (function () {\n    function DayBgRow(context) {\n        this.context = context;\n    }\n    DayBgRow.prototype.renderHtml = function (props) {\n        var parts = [];\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n        }\n        if (!props.cells.length) {\n            parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n        }\n        if (this.context.options.dir === 'rtl') {\n            parts.reverse();\n        }\n        return '<tr>' + parts.join('') + '</tr>';\n    };\n    return DayBgRow;\n}());\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n    var classes = getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' +\n        (isDateValid ?\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' });\nvar DayGrid = /** @class */ (function (_super) {\n    __extends(DayGrid, _super);\n    function DayGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n        _this.isCellSizesDirty = false;\n        _this.renderProps = renderProps;\n        var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n        _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n        var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n        return _this;\n    }\n    DayGrid.prototype.render = function (props, context) {\n        var cells = props.cells;\n        this.rowCnt = cells.length;\n        this.colCnt = cells[0].length;\n        this.renderCells(cells, props.isRigid);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(context, props.dateSelectionSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n        if (this.segPopoverTile) {\n            this.updateSegPopoverTile();\n        }\n    };\n    DayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderCells.unrender(); // will unrender everything else\n    };\n    DayGrid.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n        var ownProps = this.props;\n        this.segPopoverTile.receiveProps({\n            date: date || this.segPopoverTile.props.date,\n            fgSegs: segs || this.segPopoverTile.props.fgSegs,\n            eventSelection: ownProps.eventSelection,\n            eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n            eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n        }, this.context);\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, dateEnv = _a.dateEnv;\n        var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n        var html = '';\n        var row;\n        var col;\n        for (row = 0; row < rowCnt; row++) {\n            html += this.renderDayRowHtml(row, isRigid);\n        }\n        this.el.innerHTML = html;\n        this.rowEls = findElements(this.el, '.fc-row');\n        this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        if (isRtl) {\n            this.cellEls.reverse();\n        }\n        this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n        );\n        this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n        true, false // horizontal\n        );\n        // trigger dayRender with each cell's element\n        for (row = 0; row < rowCnt; row++) {\n            for (col = 0; col < colCnt; col++) {\n                calendar.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[row][col].date),\n                        el: this.getCellEl(row, col),\n                        view: view\n                    }\n                ]);\n            }\n        }\n        this.isCellSizesDirty = true;\n    };\n    DayGrid.prototype._unrenderCells = function () {\n        this.removeSegPopover();\n    };\n    // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n        var theme = this.context.theme;\n        var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n        if (isRigid) {\n            classes.push('fc-rigid');\n        }\n        var bgRow = new DayBgRow(this.context);\n        return '' +\n            '<div class=\"' + classes.join(' ') + '\">' +\n            '<div class=\"fc-bg\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            bgRow.renderHtml({\n                cells: this.props.cells[row],\n                dateProfile: this.props.dateProfile,\n                renderIntroHtml: this.renderProps.renderBgIntroHtml\n            }) +\n            '</table>' +\n            '</div>' +\n            '<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            (this.getIsNumbersVisible() ?\n                '<thead>' +\n                    this.renderNumberTrHtml(row) +\n                    '</thead>' :\n                '') +\n            '</table>' +\n            '</div>' +\n            '</div>';\n    };\n    DayGrid.prototype.getIsNumbersVisible = function () {\n        return this.getIsDayNumbersVisible() ||\n            this.renderProps.cellWeekNumbersVisible ||\n            this.renderProps.colWeekNumbersVisible;\n    };\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n        return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n        var isRtl = this.context.isRtl;\n        var intro = this.renderProps.renderNumberIntroHtml(row, this);\n        return '' +\n            '<tr>' +\n            (isRtl ? '' : intro) +\n            this.renderNumberCellsHtml(row) +\n            (isRtl ? intro : '') +\n            '</tr>';\n    };\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n        var htmls = [];\n        var col;\n        var date;\n        for (col = 0; col < this.colCnt; col++) {\n            date = this.props.cells[row][col].date;\n            htmls.push(this.renderNumberCellHtml(date));\n        }\n        if (this.context.isRtl) {\n            htmls.reverse();\n        }\n        return htmls.join('');\n    };\n    // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options;\n        var html = '';\n        var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n        var classes;\n        var weekCalcFirstDow;\n        if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n            // no numbers in day cell (week number must be along the side)\n            return '<td></td>'; //  will create an empty space above events :(\n        }\n        classes = getDayClasses(date, this.props.dateProfile, this.context);\n        classes.unshift('fc-day-top');\n        if (this.renderProps.cellWeekNumbersVisible) {\n            weekCalcFirstDow = dateEnv.weekDow;\n        }\n        html += '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            '>';\n        if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n            html += buildGotoAnchorHtml(options, dateEnv, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n            );\n        }\n        if (isDayNumberVisible) {\n            html += buildGotoAnchorHtml(options, dateEnv, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n            );\n        }\n        html += '</td>';\n        return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.updateSize = function (isResize) {\n        var calendar = this.context.calendar;\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize ||\n            this.isCellSizesDirty ||\n            calendar.isEventsUpdated // hack\n        ) {\n            this.buildPositionCaches();\n            this.isCellSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    DayGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildRowPositions();\n    };\n    DayGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    DayGrid.prototype.buildRowPositions = function () {\n        this.rowPositions.build();\n        this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row]\n                }\n            };\n        }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n    DayGrid.prototype.getCellEl = function (row, col) {\n        return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n        }\n    };\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    DayGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.removeSegPopover = function () {\n        if (this.segPopover) {\n            this.segPopover.hide(); // in handler, will call segPopover's removeElement\n        }\n    };\n    // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n    DayGrid.prototype.limitRows = function (levelLimit) {\n        var rowStructs = this.eventRenderer.rowStructs || [];\n        var row; // row #\n        var rowLevelLimit;\n        for (row = 0; row < rowStructs.length; row++) {\n            this.unlimitRow(row);\n            if (!levelLimit) {\n                rowLevelLimit = false;\n            }\n            else if (typeof levelLimit === 'number') {\n                rowLevelLimit = levelLimit;\n            }\n            else {\n                rowLevelLimit = this.computeRowLevelLimit(row);\n            }\n            if (rowLevelLimit !== false) {\n                this.limitRow(row, rowLevelLimit);\n            }\n        }\n    };\n    // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n        var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n        var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n        var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n        var i;\n        var trEl;\n        // Reveal one level <tr> at a time and stop when we find one out of bounds\n        for (i = 0; i < trEls.length; i++) {\n            trEl = trEls[i];\n            trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n            if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                return i;\n            }\n        }\n        return false; // should not limit at all\n    };\n    // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n        var _this = this;\n        var colCnt = this.colCnt;\n        var isRtl = this.context.isRtl;\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n        var col = 0; // col #, left-to-right (not chronologically)\n        var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n        var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n        var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n        var i;\n        var seg;\n        var segsBelow; // array of segment objects below `seg` in the current `col`\n        var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n        var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n        var td;\n        var rowSpan;\n        var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n        var j;\n        var moreTd;\n        var moreWrap;\n        var moreLink;\n        // Iterates through empty level cells and places \"more\" links inside if need be\n        var emptyCellsUntil = function (endCol) {\n            while (col < endCol) {\n                segsBelow = _this.getCellSegs(row, col, levelLimit);\n                if (segsBelow.length) {\n                    td = cellMatrix[levelLimit - 1][col];\n                    moreLink = _this.renderMoreLink(row, col, segsBelow);\n                    moreWrap = createElement('div', null, moreLink);\n                    td.appendChild(moreWrap);\n                    moreNodes.push(moreWrap);\n                }\n                col++;\n            }\n        };\n        if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n            levelSegs = rowStruct.segLevels[levelLimit - 1];\n            cellMatrix = rowStruct.cellMatrix;\n            limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n            limitedNodes.forEach(function (node) {\n                node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n            });\n            // iterate though segments in the last allowable level\n            for (i = 0; i < levelSegs.length; i++) {\n                seg = levelSegs[i];\n                var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                emptyCellsUntil(leftCol); // process empty cells before the segment\n                // determine *all* segments below `seg` that occupy the same columns\n                colSegsBelow = [];\n                totalSegsBelow = 0;\n                while (col <= rightCol) {\n                    segsBelow = this.getCellSegs(row, col, levelLimit);\n                    colSegsBelow.push(segsBelow);\n                    totalSegsBelow += segsBelow.length;\n                    col++;\n                }\n                if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                    td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                    rowSpan = td.rowSpan || 1;\n                    segMoreNodes = [];\n                    // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                    for (j = 0; j < colSegsBelow.length; j++) {\n                        moreTd = createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                        segsBelow = colSegsBelow[j];\n                        moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                        );\n                        moreWrap = createElement('div', null, moreLink);\n                        moreTd.appendChild(moreWrap);\n                        segMoreNodes.push(moreTd);\n                        moreNodes.push(moreTd);\n                    }\n                    td.classList.add('fc-limited');\n                    insertAfterElement(td, segMoreNodes);\n                    limitedNodes.push(td);\n                }\n            }\n            emptyCellsUntil(this.colCnt); // finish off the level\n            rowStruct.moreEls = moreNodes; // for easy undoing later\n            rowStruct.limitedEls = limitedNodes; // for easy undoing later\n        }\n    };\n    // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n    DayGrid.prototype.unlimitRow = function (row) {\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        if (rowStruct.moreEls) {\n            rowStruct.moreEls.forEach(removeElement);\n            rowStruct.moreEls = null;\n        }\n        if (rowStruct.limitedEls) {\n            rowStruct.limitedEls.forEach(function (limitedEl) {\n                limitedEl.classList.remove('fc-limited');\n            });\n            rowStruct.limitedEls = null;\n        }\n    };\n    // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, dateEnv = _a.dateEnv, options = _a.options, isRtl = _a.isRtl;\n        var a = createElement('a', { className: 'fc-more' });\n        a.innerText = this.getMoreLinkText(hiddenSegs.length);\n        a.addEventListener('click', function (ev) {\n            var clickOption = options.eventLimitClick;\n            var _col = isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var date = _this.props.cells[row][_col].date;\n            var moreEl = ev.currentTarget;\n            var dayEl = _this.getCellEl(row, col);\n            var allSegs = _this.getCellSegs(row, col);\n            // rescope the segments to be within the cell's date\n            var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n            var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n            if (typeof clickOption === 'function') {\n                // the returned value can be an atomic option\n                clickOption = calendar.publiclyTrigger('eventLimitClick', [\n                    {\n                        date: dateEnv.toDate(date),\n                        allDay: true,\n                        dayEl: dayEl,\n                        moreEl: moreEl,\n                        segs: reslicedAllSegs,\n                        hiddenSegs: reslicedHiddenSegs,\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n            }\n            if (clickOption === 'popover') {\n                _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                calendar.zoomTo(date, clickOption);\n            }\n        });\n        return a;\n    };\n    // Reveals the popover that displays all events within a cell\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, isRtl = _a.isRtl;\n        var _col = isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n        var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n        var topEl; // the element we want to match the top coordinate of\n        var options;\n        if (this.rowCnt === 1) {\n            topEl = view.el; // will cause the popover to cover any sort of header\n        }\n        else {\n            topEl = this.rowEls[row]; // will align with top of row\n        }\n        options = {\n            className: 'fc-more-popover ' + theme.getClass('popover'),\n            parentEl: view.el,\n            top: computeRect(topEl).top,\n            autoHide: true,\n            content: function (el) {\n                _this.segPopoverTile = new DayTile(el);\n                _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n            },\n            hide: function () {\n                _this.segPopoverTile.destroy();\n                _this.segPopoverTile = null;\n                _this.segPopover.destroy();\n                _this.segPopover = null;\n            }\n        };\n        // Determine horizontal coordinate.\n        // We use the moreWrap instead of the <td> to avoid border confusion.\n        if (isRtl) {\n            options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n        }\n        else {\n            options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n        }\n        this.segPopover = new Popover(options);\n        this.segPopover.show();\n        calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    };\n    // Given the events within an array of segment objects, reslice them to be in a single day\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n        var dayStart = dayDate;\n        var dayEnd = addDays(dayStart, 1);\n        var dayRange = { start: dayStart, end: dayEnd };\n        var newSegs = [];\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            var eventRange = seg.eventRange;\n            var origRange = eventRange.range;\n            var slicedRange = intersectRanges(origRange, dayRange);\n            if (slicedRange) {\n                newSegs.push(__assign({}, seg, { eventRange: {\n                        def: eventRange.def,\n                        ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                        instance: eventRange.instance,\n                        range: slicedRange\n                    }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n            }\n        }\n        return newSegs;\n    };\n    // Generates the text that should be inside a \"more\" link, given the number of events it represents\n    DayGrid.prototype.getMoreLinkText = function (num) {\n        var opt = this.context.options.eventLimitText;\n        if (typeof opt === 'function') {\n            return opt(num);\n        }\n        else {\n            return '+' + num + ' ' + opt;\n        }\n    };\n    // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n        var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n        var level = startLevel || 0;\n        var segs = [];\n        var seg;\n        while (level < segMatrix.length) {\n            seg = segMatrix[level][col];\n            if (seg) {\n                segs.push(seg);\n            }\n            level++;\n        }\n        return segs;\n    };\n    return DayGrid;\n}(DateComponent));\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({ week: 'numeric' });\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar AbstractDayGridView = /** @class */ (function (_super) {\n    __extends(AbstractDayGridView, _super);\n    function AbstractDayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    htmlEscape(options.weekLabel) +\n                    '</span>' +\n                    '</th>';\n            }\n            return '';\n        };\n        /* Day Grid Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n        _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n            var _a = _this.context, options = _a.options, dateEnv = _a.dateEnv;\n            var weekStart = dayGrid.props.cells[row][0].date;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                    ) +\n                    '</td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before the day bg cells for each day-row\n        _this.renderDayGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before every other type of row generated by DayGrid.\n        // Affects mirror-skeleton and highlight-skeleton rows.\n        _this.renderDayGridIntroHtml = function () {\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        return _this;\n    }\n    AbstractDayGridView.prototype._processOptions = function (options) {\n        if (options.weekNumbers) {\n            if (options.weekNumbersWithinDays) {\n                this.cellWeekNumbersVisible = true;\n                this.colWeekNumbersVisible = false;\n            }\n            else {\n                this.cellWeekNumbersVisible = false;\n                this.colWeekNumbersVisible = true;\n            }\n        }\n        else {\n            this.colWeekNumbersVisible = false;\n            this.cellWeekNumbersVisible = false;\n        }\n    };\n    AbstractDayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.processOptions(context.options);\n        this.renderSkeleton(context);\n    };\n    AbstractDayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractDayGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-dayGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var dayGridContainerEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n        dayGridContainerEl.classList.add('fc-day-grid-container');\n        var dayGridEl = createElement('div', { className: 'fc-day-grid' });\n        dayGridContainerEl.appendChild(dayGridEl);\n        this.dayGrid = new DayGrid(dayGridEl, {\n            renderNumberIntroHtml: this.renderDayGridNumberIntroHtml,\n            renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n            renderIntroHtml: this.renderDayGridIntroHtml,\n            colWeekNumbersVisible: this.colWeekNumbersVisible,\n            cellWeekNumbersVisible: this.cellWeekNumbersVisible\n        });\n    };\n    AbstractDayGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-dayGrid-view');\n        this.dayGrid.destroy();\n        this.scroller.destroy();\n    };\n    // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n    AbstractDayGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    // Generates an HTML attribute string for setting the width of the week number column, if it is known\n    AbstractDayGridView.prototype.weekNumberStyleAttr = function () {\n        if (this.weekNumberWidth != null) {\n            return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n        }\n        return '';\n    };\n    // Determines whether each row should have a constant height\n    AbstractDayGridView.prototype.hasRigidRows = function () {\n        var eventLimit = this.context.options.eventLimit;\n        return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.dayGrid.updateSize(isResize);\n    };\n    // Refreshes the horizontal dimensions of the view\n    AbstractDayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var dayGrid = this.dayGrid;\n        var eventLimit = this.context.options.eventLimit;\n        var headRowEl = this.header ? this.header.el : null; // HACK\n        var scrollerHeight;\n        var scrollbarWidths;\n        // hack to give the view some height prior to dayGrid's columns being rendered\n        // TODO: separate setting height from scroller VS dayGrid.\n        if (!dayGrid.rowEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        if (this.colWeekNumbersVisible) {\n            // Make sure all week number cells running down the side have the same width.\n            this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n        }\n        // reset all heights to be natural\n        this.scroller.clear();\n        if (headRowEl) {\n            uncompensateScroll(headRowEl);\n        }\n        dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n        // is the event limit a constant level number?\n        if (eventLimit && typeof eventLimit === 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n        }\n        // distribute the height to the rows\n        // (viewHeight is a \"recommended\" value if isAuto)\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.setGridHeight(scrollerHeight, isAuto);\n        // is the event limit dynamically calculated?\n        if (eventLimit && typeof eventLimit !== 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                if (headRowEl) {\n                    compensateScroll(headRowEl, scrollbarWidths);\n                }\n                // doing the scrollbar compensation might have created text overflow which created more height. redo\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractDayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    // Sets the height of just the DayGrid component in this view\n    AbstractDayGridView.prototype.setGridHeight = function (height, isAuto) {\n        if (this.context.options.monthMode) {\n            // if auto, make the height of each row the height that it would be if there were 6 weeks\n            if (isAuto) {\n                height *= this.dayGrid.rowCnt / 6;\n            }\n            distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n        }\n        else {\n            if (isAuto) {\n                undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n            }\n            else {\n                distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n            }\n        }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.computeDateScroll = function (duration) {\n        return { top: 0 };\n    };\n    AbstractDayGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractDayGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    return AbstractDayGridView;\n}(View));\nAbstractDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid = /** @class */ (function (_super) {\n    __extends(SimpleDayGrid, _super);\n    function SimpleDayGrid(dayGrid) {\n        var _this = _super.call(this, dayGrid.el) || this;\n        _this.slicer = new DayGridSlicer();\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    SimpleDayGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, { el: this.dayGrid.el });\n    };\n    SimpleDayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleDayGrid.prototype.render = function (props, context) {\n        var dayGrid = this.dayGrid;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, context.calendar, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }), context);\n    };\n    SimpleDayGrid.prototype.buildPositionCaches = function () {\n        this.dayGrid.buildPositionCaches();\n    };\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.dayGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleDayGrid;\n}(DateComponent));\nvar DayGridSlicer = /** @class */ (function (_super) {\n    __extends(DayGridSlicer, _super);\n    function DayGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n        return dayTable.sliceRange(dateRange);\n    };\n    return DayGridSlicer;\n}(Slicer));\n\nvar DayGridView = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    DayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // will call _renderSkeleton/_unrenderSkeleton\n        var dateProfile = this.props.dateProfile;\n        var dayTable = this.dayTable =\n            this.buildDayTable(dateProfile, props.dateProfileGenerator);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: dayTable.rowCnt === 1,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleDayGrid.receiveProps({\n            dateProfile: dateProfile,\n            dayTable: dayTable,\n            businessHours: props.businessHours,\n            dateSelection: props.dateSelection,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isRigid: this.hasRigidRows(),\n            nextDayThreshold: this.context.nextDayThreshold\n        }, context);\n    };\n    DayGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n    };\n    DayGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleDayGrid.destroy();\n    };\n    return DayGridView;\n}(AbstractDayGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n        dayGrid: DayGridView,\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 }\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 }\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true\n        }\n    }\n});\n\nexport default main;\nexport { AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };\n","/*!\nFullCalendar Time Grid Plugin v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { createFormatter, removeElement, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, isMultiDayRange, htmlEscape, compareByFieldSpecs, applyStyle, FgEventRenderer, buildSegCompareObj, FillRenderer, memoize, memoizeRendering, createDuration, wholeDivideDurations, findElements, PositionCache, startOfDay, asRoughMs, formatIsoTimeString, addDurations, htmlToElement, createElement, multiplyDuration, DateComponent, hasBgRendering, Splitter, diffDays, buildGotoAnchorHtml, getAllDayHtml, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, View, intersectRanges, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\nimport { DayBgRow, DayGrid, SimpleDayGrid } from '@fullcalendar/daygrid';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/*\nOnly handles foreground segs.\nDoes not own rendering. Use for low-level util methods by TimeGrid.\n*/\nvar TimeGridEventRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridEventRenderer, _super);\n    function TimeGridEventRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        _super.prototype.renderSegs.call(this, context, segs, mirrorInfo);\n        // TODO: dont do every time. memoize\n        this.fullTimeFormat = createFormatter({\n            hour: 'numeric',\n            minute: '2-digit',\n            separator: this.context.options.defaultRangeSeparator\n        });\n    };\n    // Given an array of foreground segments, render a DOM element for each, computes position,\n    // and attaches to the column inner-container elements.\n    TimeGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var segsByCol = this.timeGrid.groupSegsByCol(segs);\n        // order the segs within each column\n        // TODO: have groupSegsByCol do this?\n        for (var col = 0; col < segsByCol.length; col++) {\n            segsByCol[col] = this.sortEventSegs(segsByCol[col]);\n        }\n        this.segsByCol = segsByCol;\n        this.timeGrid.attachSegsByCol(segsByCol, this.timeGrid.fgContainerEls);\n    };\n    TimeGridEventRenderer.prototype.detachSegs = function (segs) {\n        segs.forEach(function (seg) {\n            removeElement(seg.el);\n        });\n        this.segsByCol = null;\n    };\n    TimeGridEventRenderer.prototype.computeSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.computeSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.computeSegHorizontals(segsByCol[col]); // compute horizontal coordinates, z-index's, and reorder the array\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.assignSegSizes = function (allSegs) {\n        var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n        var colCnt = timeGrid.colCnt;\n        timeGrid.assignSegVerticals(allSegs); // horizontals relies on this\n        if (segsByCol) {\n            for (var col = 0; col < colCnt; col++) {\n                this.assignSegCss(segsByCol[col]);\n            }\n        }\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    TimeGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            meridiem: false\n        };\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    TimeGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Renders the HTML for a single event segment's default rendering\n    TimeGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(this.context, eventDef, eventUi);\n        var isResizableFromStart = seg.isStart && computeEventStartResizable(this.context, eventDef, eventUi);\n        var isResizableFromEnd = seg.isEnd && computeEventEndResizable(this.context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeText;\n        var fullTimeText; // more verbose time text. for the print stylesheet\n        var startTimeText; // just the start time text\n        classes.unshift('fc-time-grid-event');\n        // if the event appears to span more than one day...\n        if (isMultiDayRange(eventRange.range)) {\n            // Don't display time text on segments that run entirely through a day.\n            // That would appear as midnight-midnight and would look dumb.\n            // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n            if (seg.isStart || seg.isEnd) {\n                var unzonedStart = seg.start;\n                var unzonedEnd = seg.end;\n                timeText = this._getTimeText(unzonedStart, unzonedEnd, allDay); // TODO: give the timezones\n                fullTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, this.fullTimeFormat);\n                startTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, null, false); // displayEnd=false\n            }\n        }\n        else {\n            // Display the normal time text for the *event's* times\n            timeText = this.getTimeText(eventRange);\n            fullTimeText = this.getTimeText(eventRange, this.fullTimeFormat);\n            startTimeText = this.getTimeText(eventRange, null, false); // displayEnd=false\n        }\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (timeText ?\n                '<div class=\"fc-time\"' +\n                    ' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n                    ' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n                    '>' +\n                    '<span>' + htmlEscape(timeText) + '</span>' +\n                    '</div>' :\n                '') +\n            (eventDef.title ?\n                '<div class=\"fc-title\">' +\n                    htmlEscape(eventDef.title) +\n                    '</div>' :\n                '') +\n            '</div>' +\n            /* TODO: write CSS for this\n            (isResizableFromStart ?\n              '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n              ''\n              ) +\n            */\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n    // Assumed the segs are already ordered.\n    // NOTE: Also reorders the given array by date!\n    TimeGridEventRenderer.prototype.computeSegHorizontals = function (segs) {\n        var levels;\n        var level0;\n        var i;\n        levels = buildSlotSegLevels(segs);\n        computeForwardSlotSegs(levels);\n        if ((level0 = levels[0])) {\n            for (i = 0; i < level0.length; i++) {\n                computeSlotSegPressures(level0[i]);\n            }\n            for (i = 0; i < level0.length; i++) {\n                this.computeSegForwardBack(level0[i], 0, 0);\n            }\n        }\n    };\n    // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n    // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n    // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n    //\n    // The segment might be part of a \"series\", which means consecutive segments with the same pressure\n    // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n    // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n    // coordinate of the first segment in the series.\n    TimeGridEventRenderer.prototype.computeSegForwardBack = function (seg, seriesBackwardPressure, seriesBackwardCoord) {\n        var forwardSegs = seg.forwardSegs;\n        var i;\n        if (seg.forwardCoord === undefined) { // not already computed\n            if (!forwardSegs.length) {\n                // if there are no forward segments, this segment should butt up against the edge\n                seg.forwardCoord = 1;\n            }\n            else {\n                // sort highest pressure first\n                this.sortForwardSegs(forwardSegs);\n                // this segment's forwardCoord will be calculated from the backwardCoord of the\n                // highest-pressure forward segment.\n                this.computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n                seg.forwardCoord = forwardSegs[0].backwardCoord;\n            }\n            // calculate the backwardCoord from the forwardCoord. consider the series\n            seg.backwardCoord = seg.forwardCoord -\n                (seg.forwardCoord - seriesBackwardCoord) / // available width for series\n                    (seriesBackwardPressure + 1); // # of segments in the series\n            // use this segment's coordinates to computed the coordinates of the less-pressurized\n            // forward segments\n            for (i = 0; i < forwardSegs.length; i++) {\n                this.computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n            }\n        }\n    };\n    TimeGridEventRenderer.prototype.sortForwardSegs = function (forwardSegs) {\n        var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n        var specs = [\n            // put higher-pressure first\n            { field: 'forwardPressure', order: -1 },\n            // put segments that are closer to initial edge first (and favor ones with no coords yet)\n            { field: 'backwardCoord', order: 1 }\n        ].concat(this.context.eventOrderSpecs);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    // Given foreground event segments that have already had their position coordinates computed,\n    // assigns position-related CSS values to their elements.\n    TimeGridEventRenderer.prototype.assignSegCss = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            applyStyle(seg.el, this.generateSegCss(seg));\n            if (seg.level > 0) {\n                seg.el.classList.add('fc-time-grid-event-inset');\n            }\n            // if the event is short that the title will be cut off,\n            // attach a className that condenses the title into the time area.\n            if (seg.eventRange.def.title && seg.bottom - seg.top < 30) {\n                seg.el.classList.add('fc-short'); // TODO: \"condensed\" is a better name\n            }\n        }\n    };\n    // Generates an object with CSS properties/values that should be applied to an event segment element.\n    // Contains important positioning-related properties that should be applied to any event element, customized or not.\n    TimeGridEventRenderer.prototype.generateSegCss = function (seg) {\n        var shouldOverlap = this.context.options.slotEventOverlap;\n        var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n        var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n        var props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n        var isRtl = this.context.isRtl;\n        var left; // amount of space from left edge, a fraction of the total width\n        var right; // amount of space from right edge, a fraction of the total width\n        if (shouldOverlap) {\n            // double the width, but don't go beyond the maximum forward coordinate (1.0)\n            forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n        }\n        if (isRtl) {\n            left = 1 - forwardCoord;\n            right = backwardCoord;\n        }\n        else {\n            left = backwardCoord;\n            right = 1 - forwardCoord;\n        }\n        props.zIndex = seg.level + 1; // convert from 0-base to 1-based\n        props.left = left * 100 + '%';\n        props.right = right * 100 + '%';\n        if (shouldOverlap && seg.forwardPressure) {\n            // add padding to the edge so that forward stacked events don't cover the resizer's icon\n            props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n        }\n        return props;\n    };\n    return TimeGridEventRenderer;\n}(FgEventRenderer));\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n    var levels = [];\n    var i;\n    var seg;\n    var j;\n    for (i = 0; i < segs.length; i++) {\n        seg = segs[i];\n        // go through all the levels and stop on the first level where there are no collisions\n        for (j = 0; j < levels.length; j++) {\n            if (!computeSlotSegCollisions(seg, levels[j]).length) {\n                break;\n            }\n        }\n        seg.level = j;\n        (levels[j] || (levels[j] = [])).push(seg);\n    }\n    return levels;\n}\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n    var i;\n    var level;\n    var j;\n    var seg;\n    var k;\n    for (i = 0; i < levels.length; i++) {\n        level = levels[i];\n        for (j = 0; j < level.length; j++) {\n            seg = level[j];\n            seg.forwardSegs = [];\n            for (k = i + 1; k < levels.length; k++) {\n                computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n            }\n        }\n    }\n}\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n    var forwardSegs = seg.forwardSegs;\n    var forwardPressure = 0;\n    var i;\n    var forwardSeg;\n    if (seg.forwardPressure === undefined) { // not already computed\n        for (i = 0; i < forwardSegs.length; i++) {\n            forwardSeg = forwardSegs[i];\n            // figure out the child's maximum forward path\n            computeSlotSegPressures(forwardSeg);\n            // either use the existing maximum, or use the child's forward pressure\n            // plus one (for the forwardSeg itself)\n            forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n        }\n        seg.forwardPressure = forwardPressure;\n    }\n}\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n    if (results === void 0) { results = []; }\n    for (var i = 0; i < otherSegs.length; i++) {\n        if (isSlotSegCollision(seg, otherSegs[i])) {\n            results.push(otherSegs[i]);\n        }\n    }\n    return results;\n}\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n    return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\nfunction buildTimeGridSegCompareObj(seg) {\n    var obj = buildSegCompareObj(seg);\n    obj.forwardPressure = seg.forwardPressure;\n    obj.backwardCoord = seg.backwardCoord;\n    return obj;\n}\n\nvar TimeGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridMirrorRenderer, _super);\n    function TimeGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        this.segsByCol = this.timeGrid.groupSegsByCol(segs);\n        this.timeGrid.attachSegsByCol(this.segsByCol, this.timeGrid.mirrorContainerEls);\n        this.sourceSeg = mirrorInfo.sourceSeg;\n    };\n    TimeGridMirrorRenderer.prototype.generateSegCss = function (seg) {\n        var props = _super.prototype.generateSegCss.call(this, seg);\n        var sourceSeg = this.sourceSeg;\n        if (sourceSeg && sourceSeg.col === seg.col) {\n            var sourceSegProps = _super.prototype.generateSegCss.call(this, sourceSeg);\n            props.left = sourceSegProps.left;\n            props.right = sourceSegProps.right;\n            props.marginLeft = sourceSegProps.marginLeft;\n            props.marginRight = sourceSegProps.marginRight;\n        }\n        return props;\n    };\n    return TimeGridMirrorRenderer;\n}(TimeGridEventRenderer));\n\nvar TimeGridFillRenderer = /** @class */ (function (_super) {\n    __extends(TimeGridFillRenderer, _super);\n    function TimeGridFillRenderer(timeGrid) {\n        var _this = _super.call(this) || this;\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    TimeGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var timeGrid = this.timeGrid;\n        var containerEls;\n        // TODO: more efficient lookup\n        if (type === 'bgEvent') {\n            containerEls = timeGrid.bgContainerEls;\n        }\n        else if (type === 'businessHours') {\n            containerEls = timeGrid.businessContainerEls;\n        }\n        else if (type === 'highlight') {\n            containerEls = timeGrid.highlightContainerEls;\n        }\n        timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n        return segs.map(function (seg) {\n            return seg.el;\n        });\n    };\n    TimeGridFillRenderer.prototype.computeSegSizes = function (segs) {\n        this.timeGrid.computeSegVerticals(segs);\n    };\n    TimeGridFillRenderer.prototype.assignSegSizes = function (segs) {\n        this.timeGrid.assignSegVerticals(segs);\n    };\n    return TimeGridFillRenderer;\n}(FillRenderer));\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { seconds: 30 },\n    { seconds: 15 }\n];\nvar TimeGrid = /** @class */ (function (_super) {\n    __extends(TimeGrid, _super);\n    function TimeGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.isSlatSizesDirty = false;\n        _this.isColSizesDirty = false;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton);\n        _this.renderSlats = memoizeRendering(_this._renderSlats, null, [_this.renderSkeleton]);\n        _this.renderColumns = memoizeRendering(_this._renderColumns, _this._unrenderColumns, [_this.renderSkeleton]);\n        _this.renderProps = renderProps;\n        var renderColumns = _this.renderColumns;\n        var eventRenderer = _this.eventRenderer = new TimeGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new TimeGridFillRenderer(_this);\n        _this.mirrorRenderer = new TimeGridMirrorRenderer(_this);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderColumns]);\n        _this.renderDateSelection = memoizeRendering(_this._renderDateSelection, _this._unrenderDateSelection, [renderColumns]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderColumns]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderColumns]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderColumns]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderColumns]);\n        return _this;\n    }\n    /* Options\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Parses various options into properties of this object\n    // MUST have context already set\n    TimeGrid.prototype._processOptions = function (options) {\n        var slotDuration = options.slotDuration, snapDuration = options.snapDuration;\n        var snapsPerSlot;\n        var input;\n        slotDuration = createDuration(slotDuration);\n        snapDuration = snapDuration ? createDuration(snapDuration) : slotDuration;\n        snapsPerSlot = wholeDivideDurations(slotDuration, snapDuration);\n        if (snapsPerSlot === null) {\n            snapDuration = slotDuration;\n            snapsPerSlot = 1;\n            // TODO: say warning?\n        }\n        this.slotDuration = slotDuration;\n        this.snapDuration = snapDuration;\n        this.snapsPerSlot = snapsPerSlot;\n        // might be an array value (for TimelineView).\n        // if so, getting the most granular entry (the last one probably).\n        input = options.slotLabelFormat;\n        if (Array.isArray(input)) {\n            input = input[input.length - 1];\n        }\n        this.labelFormat = createFormatter(input || {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'short'\n        });\n        input = options.slotLabelInterval;\n        this.labelInterval = input ?\n            createDuration(input) :\n            this.computeLabelInterval(slotDuration);\n    };\n    // Computes an automatic value for slotLabelInterval\n    TimeGrid.prototype.computeLabelInterval = function (slotDuration) {\n        var i;\n        var labelInterval;\n        var slotsPerLabel;\n        // find the smallest stock label interval that results in more than one slots-per-label\n        for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n            labelInterval = createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);\n            slotsPerLabel = wholeDivideDurations(labelInterval, slotDuration);\n            if (slotsPerLabel !== null && slotsPerLabel > 1) {\n                return labelInterval;\n            }\n        }\n        return slotDuration; // fall back\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.render = function (props, context) {\n        this.processOptions(context.options);\n        var cells = props.cells;\n        this.colCnt = cells.length;\n        this.renderSkeleton(context.theme);\n        this.renderSlats(props.dateProfile);\n        this.renderColumns(props.cells, props.dateProfile);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(props.dateSelectionSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n    };\n    TimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        // should unrender everything else too\n        this.renderSlats.unrender();\n        this.renderColumns.unrender();\n        this.renderSkeleton.unrender();\n    };\n    TimeGrid.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize || this.isSlatSizesDirty) {\n            this.buildSlatPositions();\n            this.isSlatSizesDirty = false;\n        }\n        if (isResize || this.isColSizesDirty) {\n            this.buildColPositions();\n            this.isColSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    TimeGrid.prototype._renderSkeleton = function (theme) {\n        var el = this.el;\n        el.innerHTML =\n            '<div class=\"fc-bg\"></div>' +\n                '<div class=\"fc-slats\"></div>' +\n                '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" style=\"display:none\" />';\n        this.rootBgContainerEl = el.querySelector('.fc-bg');\n        this.slatContainerEl = el.querySelector('.fc-slats');\n        this.bottomRuleEl = el.querySelector('.fc-divider');\n    };\n    TimeGrid.prototype._renderSlats = function (dateProfile) {\n        var theme = this.context.theme;\n        this.slatContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                this.renderSlatRowHtml(dateProfile) +\n                '</table>';\n        this.slatEls = findElements(this.slatContainerEl, 'tr');\n        this.slatPositions = new PositionCache(this.el, this.slatEls, false, true // vertical\n        );\n        this.isSlatSizesDirty = true;\n    };\n    // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n    TimeGrid.prototype.renderSlatRowHtml = function (dateProfile) {\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme, isRtl = _a.isRtl;\n        var html = '';\n        var dayStart = startOfDay(dateProfile.renderRange.start);\n        var slotTime = dateProfile.minTime;\n        var slotIterator = createDuration(0);\n        var slotDate; // will be on the view's first day, but we only care about its time\n        var isLabeled;\n        var axisHtml;\n        // Calculate the time for each slot\n        while (asRoughMs(slotTime) < asRoughMs(dateProfile.maxTime)) {\n            slotDate = dateEnv.add(dayStart, slotTime);\n            isLabeled = wholeDivideDurations(slotIterator, this.labelInterval) !== null;\n            axisHtml =\n                '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\">' +\n                    (isLabeled ?\n                        '<span>' + // for matchCellWidths\n                            htmlEscape(dateEnv.format(slotDate, this.labelFormat)) +\n                            '</span>' :\n                        '') +\n                    '</td>';\n            html +=\n                '<tr data-time=\"' + formatIsoTimeString(slotDate) + '\"' +\n                    (isLabeled ? '' : ' class=\"fc-minor\"') +\n                    '>' +\n                    (!isRtl ? axisHtml : '') +\n                    '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                    (isRtl ? axisHtml : '') +\n                    '</tr>';\n            slotTime = addDurations(slotTime, this.slotDuration);\n            slotIterator = addDurations(slotIterator, this.slotDuration);\n        }\n        return html;\n    };\n    TimeGrid.prototype._renderColumns = function (cells, dateProfile) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, theme = _a.theme, dateEnv = _a.dateEnv;\n        var bgRow = new DayBgRow(this.context);\n        this.rootBgContainerEl.innerHTML =\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: cells,\n                    dateProfile: dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>';\n        this.colEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        for (var col = 0; col < this.colCnt; col++) {\n            calendar.publiclyTrigger('dayRender', [\n                {\n                    date: dateEnv.toDate(cells[col].date),\n                    el: this.colEls[col],\n                    view: view\n                }\n            ]);\n        }\n        if (isRtl) {\n            this.colEls.reverse();\n        }\n        this.colPositions = new PositionCache(this.el, this.colEls, true, // horizontal\n        false);\n        this.renderContentSkeleton();\n        this.isColSizesDirty = true;\n    };\n    TimeGrid.prototype._unrenderColumns = function () {\n        this.unrenderContentSkeleton();\n    };\n    /* Content Skeleton\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders the DOM that the view's content will live in\n    TimeGrid.prototype.renderContentSkeleton = function () {\n        var isRtl = this.context.isRtl;\n        var parts = [];\n        var skeletonEl;\n        parts.push(this.renderProps.renderIntroHtml());\n        for (var i = 0; i < this.colCnt; i++) {\n            parts.push('<td>' +\n                '<div class=\"fc-content-col\">' +\n                '<div class=\"fc-event-container fc-mirror-container\"></div>' +\n                '<div class=\"fc-event-container\"></div>' +\n                '<div class=\"fc-highlight-container\"></div>' +\n                '<div class=\"fc-bgevent-container\"></div>' +\n                '<div class=\"fc-business-container\"></div>' +\n                '</div>' +\n                '</td>');\n        }\n        if (isRtl) {\n            parts.reverse();\n        }\n        skeletonEl = this.contentSkeletonEl = htmlToElement('<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            '<tr>' + parts.join('') + '</tr>' +\n            '</table>' +\n            '</div>');\n        this.colContainerEls = findElements(skeletonEl, '.fc-content-col');\n        this.mirrorContainerEls = findElements(skeletonEl, '.fc-mirror-container');\n        this.fgContainerEls = findElements(skeletonEl, '.fc-event-container:not(.fc-mirror-container)');\n        this.bgContainerEls = findElements(skeletonEl, '.fc-bgevent-container');\n        this.highlightContainerEls = findElements(skeletonEl, '.fc-highlight-container');\n        this.businessContainerEls = findElements(skeletonEl, '.fc-business-container');\n        if (isRtl) {\n            this.colContainerEls.reverse();\n            this.mirrorContainerEls.reverse();\n            this.fgContainerEls.reverse();\n            this.bgContainerEls.reverse();\n            this.highlightContainerEls.reverse();\n            this.businessContainerEls.reverse();\n        }\n        this.el.appendChild(skeletonEl);\n    };\n    TimeGrid.prototype.unrenderContentSkeleton = function () {\n        removeElement(this.contentSkeletonEl);\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n    TimeGrid.prototype.groupSegsByCol = function (segs) {\n        var segsByCol = [];\n        var i;\n        for (i = 0; i < this.colCnt; i++) {\n            segsByCol.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segsByCol[segs[i].col].push(segs[i]);\n        }\n        return segsByCol;\n    };\n    // Given segments grouped by column, insert the segments' elements into a parallel array of container\n    // elements, each living within a column.\n    TimeGrid.prototype.attachSegsByCol = function (segsByCol, containerEls) {\n        var col;\n        var segs;\n        var i;\n        for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n            segs = segsByCol[col];\n            for (i = 0; i < segs.length; i++) {\n                containerEls[col].appendChild(segs[i].el);\n            }\n        }\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getNowIndicatorUnit = function () {\n        return 'minute'; // will refresh on the minute\n    };\n    TimeGrid.prototype.renderNowIndicator = function (segs, date) {\n        // HACK: if date columns not ready for some reason (scheduler)\n        if (!this.colContainerEls) {\n            return;\n        }\n        var top = this.computeDateTop(date);\n        var nodes = [];\n        var i;\n        // render lines within the columns\n        for (i = 0; i < segs.length; i++) {\n            var lineEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-line' });\n            lineEl.style.top = top + 'px';\n            this.colContainerEls[segs[i].col].appendChild(lineEl);\n            nodes.push(lineEl);\n        }\n        // render an arrow over the axis\n        if (segs.length > 0) { // is the current time in view?\n            var arrowEl = createElement('div', { className: 'fc-now-indicator fc-now-indicator-arrow' });\n            arrowEl.style.top = top + 'px';\n            this.contentSkeletonEl.appendChild(arrowEl);\n            nodes.push(arrowEl);\n        }\n        this.nowIndicatorEls = nodes;\n    };\n    TimeGrid.prototype.unrenderNowIndicator = function () {\n        if (this.nowIndicatorEls) {\n            this.nowIndicatorEls.forEach(removeElement);\n            this.nowIndicatorEls = null;\n        }\n    };\n    /* Coordinates\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.getTotalSlatHeight = function () {\n        return this.slatContainerEl.getBoundingClientRect().height;\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n    // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n    TimeGrid.prototype.computeDateTop = function (when, startOfDayDate) {\n        if (!startOfDayDate) {\n            startOfDayDate = startOfDay(when);\n        }\n        return this.computeTimeTop(createDuration(when.valueOf() - startOfDayDate.valueOf()));\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n    TimeGrid.prototype.computeTimeTop = function (duration) {\n        var len = this.slatEls.length;\n        var dateProfile = this.props.dateProfile;\n        var slatCoverage = (duration.milliseconds - asRoughMs(dateProfile.minTime)) / asRoughMs(this.slotDuration); // floating-point value of # of slots covered\n        var slatIndex;\n        var slatRemainder;\n        // compute a floating-point number for how many slats should be progressed through.\n        // from 0 to number of slats (inclusive)\n        // constrained because minTime/maxTime might be customized.\n        slatCoverage = Math.max(0, slatCoverage);\n        slatCoverage = Math.min(len, slatCoverage);\n        // an integer index of the furthest whole slat\n        // from 0 to number slats (*exclusive*, so len-1)\n        slatIndex = Math.floor(slatCoverage);\n        slatIndex = Math.min(slatIndex, len - 1);\n        // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n        // could be 1.0 if slatCoverage is covering *all* the slots\n        slatRemainder = slatCoverage - slatIndex;\n        return this.slatPositions.tops[slatIndex] +\n            this.slatPositions.getHeight(slatIndex) * slatRemainder;\n    };\n    // For each segment in an array, computes and assigns its top and bottom properties\n    TimeGrid.prototype.computeSegVerticals = function (segs) {\n        var options = this.context.options;\n        var eventMinHeight = options.timeGridEventMinHeight;\n        var i;\n        var seg;\n        var dayDate;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            dayDate = this.props.cells[seg.col].date;\n            seg.top = this.computeDateTop(seg.start, dayDate);\n            seg.bottom = Math.max(seg.top + eventMinHeight, this.computeDateTop(seg.end, dayDate));\n        }\n    };\n    // Given segments that already have their top/bottom properties computed, applies those values to\n    // the segments' elements.\n    TimeGrid.prototype.assignSegVerticals = function (segs) {\n        var i;\n        var seg;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            applyStyle(seg.el, this.generateSegVerticalCss(seg));\n        }\n    };\n    // Generates an object with CSS properties for the top/bottom coordinates of a segment element\n    TimeGrid.prototype.generateSegVerticalCss = function (seg) {\n        return {\n            top: seg.top,\n            bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n        };\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildSlatPositions();\n    };\n    TimeGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    TimeGrid.prototype.buildSlatPositions = function () {\n        this.slatPositions.build();\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype.positionToHit = function (positionLeft, positionTop) {\n        var dateEnv = this.context.dateEnv;\n        var _a = this, snapsPerSlot = _a.snapsPerSlot, slatPositions = _a.slatPositions, colPositions = _a.colPositions;\n        var colIndex = colPositions.leftToIndex(positionLeft);\n        var slatIndex = slatPositions.topToIndex(positionTop);\n        if (colIndex != null && slatIndex != null) {\n            var slatTop = slatPositions.tops[slatIndex];\n            var slatHeight = slatPositions.getHeight(slatIndex);\n            var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n            var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n            var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n            var dayDate = this.props.cells[colIndex].date;\n            var time = addDurations(this.props.dateProfile.minTime, multiplyDuration(this.snapDuration, snapIndex));\n            var start = dateEnv.add(dayDate, time);\n            var end = dateEnv.add(start, this.snapDuration);\n            return {\n                col: colIndex,\n                dateSpan: {\n                    range: { start: start, end: end },\n                    allDay: false\n                },\n                dayEl: this.colEls[colIndex],\n                relativeRect: {\n                    left: colPositions.lefts[colIndex],\n                    right: colPositions.rights[colIndex],\n                    top: slatTop,\n                    bottom: slatTop + slatHeight\n                }\n            };\n        }\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            if (state.isEvent) {\n                this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimeGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* Selection\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n    TimeGrid.prototype._renderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.renderSegs(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.renderSegs('highlight', this.context, segs);\n            }\n        }\n    };\n    TimeGrid.prototype._unrenderDateSelection = function (segs) {\n        if (segs) {\n            if (this.context.options.selectMirror) {\n                this.mirrorRenderer.unrender(this.context, segs, { isSelecting: true });\n            }\n            else {\n                this.fillRenderer.unrender('highlight', this.context);\n            }\n        }\n    };\n    return TimeGrid;\n}(DateComponent));\n\nvar AllDaySplitter = /** @class */ (function (_super) {\n    __extends(AllDaySplitter, _super);\n    function AllDaySplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AllDaySplitter.prototype.getKeyInfo = function () {\n        return {\n            allDay: {},\n            timed: {}\n        };\n    };\n    AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        if (dateSpan.allDay) {\n            return ['allDay'];\n        }\n        else {\n            return ['timed'];\n        }\n    };\n    AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n        if (!eventDef.allDay) {\n            return ['timed'];\n        }\n        else if (hasBgRendering(eventDef)) {\n            return ['timed', 'allDay'];\n        }\n        else {\n            return ['allDay'];\n        }\n    };\n    return AllDaySplitter;\n}(Splitter));\n\nvar TIMEGRID_ALL_DAY_EVENT_LIMIT = 5;\nvar WEEK_HEADER_FORMAT = createFormatter({ week: 'short' });\n/* An abstract class for all timegrid-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\nvar AbstractTimeGridView = /** @class */ (function (_super) {\n    __extends(AbstractTimeGridView, _super);\n    function AbstractTimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitter = new AllDaySplitter();\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n            var range = _this.props.dateProfile.renderRange;\n            var dayCnt = diffDays(range.start, range.end);\n            var weekText;\n            if (options.weekNumbers) {\n                weekText = dateEnv.format(range.start, WEEK_HEADER_FORMAT);\n                return '' +\n                    '<th class=\"fc-axis fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: range.start, type: 'week', forceOff: dayCnt > 1 }, htmlEscape(weekText) // inner HTML\n                    ) +\n                    '</th>';\n            }\n            else {\n                return '<th class=\"fc-axis ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '></th>';\n            }\n        };\n        /* Time Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n        _this.renderTimeGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            return '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderTimeGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        /* Day Grid Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that goes before the all-day cells\n        _this.renderDayGridBgIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            return '' +\n                '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '>' +\n                '<span>' + // needed for matchCellWidths\n                getAllDayHtml(options) +\n                '</span>' +\n                '</td>';\n        };\n        // Generates the HTML that goes before all other types of cells.\n        // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n        _this.renderDayGridIntroHtml = function () {\n            return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n        };\n        return _this;\n    }\n    AbstractTimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.renderSkeleton(context);\n    };\n    AbstractTimeGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractTimeGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-timeGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var timeGridWrapEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);\n        timeGridWrapEl.classList.add('fc-time-grid-container');\n        var timeGridEl = createElement('div', { className: 'fc-time-grid' });\n        timeGridWrapEl.appendChild(timeGridEl);\n        this.timeGrid = new TimeGrid(timeGridEl, {\n            renderBgIntroHtml: this.renderTimeGridBgIntroHtml,\n            renderIntroHtml: this.renderTimeGridIntroHtml\n        });\n        if (context.options.allDaySlot) { // should we display the \"all-day\" area?\n            this.dayGrid = new DayGrid(// the all-day subcomponent of this view\n            this.el.querySelector('.fc-day-grid'), {\n                renderNumberIntroHtml: this.renderDayGridIntroHtml,\n                renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n                renderIntroHtml: this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: false,\n                cellWeekNumbersVisible: false\n            });\n            // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n            var dividerEl = this.el.querySelector('.fc-divider');\n            this.dayGrid.bottomCoordPadding = dividerEl.getBoundingClientRect().height;\n        }\n    };\n    AbstractTimeGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-timeGrid-view');\n        this.timeGrid.destroy();\n        if (this.dayGrid) {\n            this.dayGrid.destroy();\n        }\n        this.scroller.destroy();\n    };\n    /* Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds the HTML skeleton for the view.\n    // The day-grid and time-grid components will render inside containers defined by this HTML.\n    AbstractTimeGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\">' +\n            (options.allDaySlot ?\n                '<div class=\"fc-day-grid\"></div>' +\n                    '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" />' :\n                '') +\n            '</td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.getNowIndicatorUnit = function () {\n        return this.timeGrid.getNowIndicatorUnit();\n    };\n    // subclasses should implement\n    // renderNowIndicator(date: DateMarker) {\n    // }\n    AbstractTimeGridView.prototype.unrenderNowIndicator = function () {\n        this.timeGrid.unrenderNowIndicator();\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractTimeGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.timeGrid.updateSize(isResize);\n        if (this.dayGrid) {\n            this.dayGrid.updateSize(isResize);\n        }\n    };\n    // Adjusts the vertical dimensions of the view to the specified values\n    AbstractTimeGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var _this = this;\n        var eventLimit;\n        var scrollerHeight;\n        var scrollbarWidths;\n        // make all axis cells line up\n        this.axisWidth = matchCellWidths(findElements(this.el, '.fc-axis'));\n        // hack to give the view some height prior to timeGrid's columns being rendered\n        // TODO: separate setting height from scroller VS timeGrid.\n        if (!this.timeGrid.colEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        // set of fake row elements that must compensate when scroller has scrollbars\n        var noScrollRowEls = findElements(this.el, '.fc-row').filter(function (node) {\n            return !_this.scroller.el.contains(node);\n        });\n        // reset all dimensions back to the original state\n        this.timeGrid.bottomRuleEl.style.display = 'none'; // will be shown later if this <hr> is necessary\n        this.scroller.clear(); // sets height to 'auto' and clears overflow\n        noScrollRowEls.forEach(uncompensateScroll);\n        // limit number of events in the all-day area\n        if (this.dayGrid) {\n            this.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            eventLimit = this.context.options.eventLimit;\n            if (eventLimit && typeof eventLimit !== 'number') {\n                eventLimit = TIMEGRID_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n            }\n            if (eventLimit) {\n                this.dayGrid.limitRows(eventLimit);\n            }\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                // make the all-day and header rows lines up\n                noScrollRowEls.forEach(function (rowEl) {\n                    compensateScroll(rowEl, scrollbarWidths);\n                });\n                // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n                // and reapply the desired height to the scroller.\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n            // if there's any space below the slats, show the horizontal rule.\n            // this won't cause any new overflow, because lockOverflow already called.\n            if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n                this.timeGrid.bottomRuleEl.style.display = '';\n            }\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractTimeGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Computes the initial pre-configured scroll state prior to allowing the user to change it\n    AbstractTimeGridView.prototype.computeDateScroll = function (duration) {\n        var top = this.timeGrid.computeTimeTop(duration);\n        // zoom can give weird floating-point values. rather scroll a little bit further\n        top = Math.ceil(top);\n        if (top) {\n            top++; // to overcome top border that slots beyond the first have. looks better\n        }\n        return { top: top };\n    };\n    AbstractTimeGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractTimeGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    // Generates an HTML attribute string for setting the width of the axis, if it is known\n    AbstractTimeGridView.prototype.axisStyleAttr = function () {\n        if (this.axisWidth != null) {\n            return 'style=\"width:' + this.axisWidth + 'px\"';\n        }\n        return '';\n    };\n    return AbstractTimeGridView;\n}(View));\nAbstractTimeGridView.prototype.usesMinMaxTime = true; // indicates that minTime/maxTime affects rendering\n\nvar SimpleTimeGrid = /** @class */ (function (_super) {\n    __extends(SimpleTimeGrid, _super);\n    function SimpleTimeGrid(timeGrid) {\n        var _this = _super.call(this, timeGrid.el) || this;\n        _this.buildDayRanges = memoize(buildDayRanges);\n        _this.slicer = new TimeGridSlicer();\n        _this.timeGrid = timeGrid;\n        return _this;\n    }\n    SimpleTimeGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.timeGrid.el\n        });\n    };\n    SimpleTimeGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleTimeGrid.prototype.render = function (props, context) {\n        var dateEnv = this.context.dateEnv;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        var dayRanges = this.dayRanges = this.buildDayRanges(dayTable, dateProfile, dateEnv);\n        this.timeGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, null, context.calendar, this.timeGrid, dayRanges), { dateProfile: dateProfile, cells: dayTable.cells[0] }), context);\n    };\n    SimpleTimeGrid.prototype.renderNowIndicator = function (date) {\n        this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date, this.timeGrid, this.dayRanges), date);\n    };\n    SimpleTimeGrid.prototype.buildPositionCaches = function () {\n        this.timeGrid.buildPositionCaches();\n    };\n    SimpleTimeGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.timeGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.timeGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleTimeGrid;\n}(DateComponent));\nfunction buildDayRanges(dayTable, dateProfile, dateEnv) {\n    var ranges = [];\n    for (var _i = 0, _a = dayTable.headerDates; _i < _a.length; _i++) {\n        var date = _a[_i];\n        ranges.push({\n            start: dateEnv.add(date, dateProfile.minTime),\n            end: dateEnv.add(date, dateProfile.maxTime)\n        });\n    }\n    return ranges;\n}\nvar TimeGridSlicer = /** @class */ (function (_super) {\n    __extends(TimeGridSlicer, _super);\n    function TimeGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeGridSlicer.prototype.sliceRange = function (range, dayRanges) {\n        var segs = [];\n        for (var col = 0; col < dayRanges.length; col++) {\n            var segRange = intersectRanges(range, dayRanges[col]);\n            if (segRange) {\n                segs.push({\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                    col: col\n                });\n            }\n        }\n        return segs;\n    };\n    return TimeGridSlicer;\n}(Slicer));\n\nvar TimeGridView = /** @class */ (function (_super) {\n    __extends(TimeGridView, _super);\n    function TimeGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    TimeGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // for flags for updateSize. also _renderSkeleton/_unrenderSkeleton\n        var _a = this.props, dateProfile = _a.dateProfile, dateProfileGenerator = _a.dateProfileGenerator;\n        var nextDayThreshold = context.nextDayThreshold;\n        var dayTable = this.buildDayTable(dateProfile, dateProfileGenerator);\n        var splitProps = this.splitter.splitProps(props);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: true,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleTimeGrid.receiveProps(__assign({}, splitProps['timed'], { dateProfile: dateProfile,\n            dayTable: dayTable }), context);\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.receiveProps(__assign({}, splitProps['allDay'], { dateProfile: dateProfile,\n                dayTable: dayTable,\n                nextDayThreshold: nextDayThreshold, isRigid: false }), context);\n        }\n        this.startNowIndicator(dateProfile, dateProfileGenerator);\n    };\n    TimeGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleTimeGrid = new SimpleTimeGrid(this.timeGrid);\n        if (this.dayGrid) {\n            this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n        }\n    };\n    TimeGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleTimeGrid.destroy();\n        if (this.simpleDayGrid) {\n            this.simpleDayGrid.destroy();\n        }\n    };\n    TimeGridView.prototype.renderNowIndicator = function (date) {\n        this.simpleTimeGrid.renderNowIndicator(date);\n    };\n    return TimeGridView;\n}(AbstractTimeGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, false);\n}\n\nvar main = createPlugin({\n    defaultView: 'timeGridWeek',\n    views: {\n        timeGrid: {\n            class: TimeGridView,\n            allDaySlot: true,\n            slotDuration: '00:30:00',\n            slotEventOverlap: true // a bad name. confused with overlap/constraint system\n        },\n        timeGridDay: {\n            type: 'timeGrid',\n            duration: { days: 1 }\n        },\n        timeGridWeek: {\n            type: 'timeGrid',\n            duration: { weeks: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { AbstractTimeGridView, TimeGrid, TimeGridSlicer, TimeGridView, buildDayRanges, buildDayTable };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"modal\",staticClass:\"modal-wrap\",on:{\"click\":_vm.closeModal}},[_c('div',{staticClass:\"modal\",on:{\"click\":function (event) { return event.stopPropagation(); }}},[_c('p',{staticClass:\"modal-close\",on:{\"click\":_vm.closeModal}}),_c('form',{attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.preventDefault();}}},[_c('FormItem',{attrs:{\"label\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.date)+\" \"+_vm._s(_vm.startTime)+\"\"+_vm._s(_vm.endTime)+\" \")]),_c('FormItem',{attrs:{\"label\":\"\",\"isFlex\":\"true\",\"isCheck\":\"true\",\"isRequired\":\"true\"}},[_c('Errors',{attrs:{\"errors\":_vm.errors}}),_vm._l((_vm.jobTypes),function(job,index){return _c('CheckBox',{key:index,attrs:{\"id\":(\"modalJob-\" + index),\"name\":\"modalJob\",\"label\":job},on:{\"addJob\":_vm.addJob}})})],2),_c('FormItem',{attrs:{\"label\":\"\"}},[_c('textarea',{attrs:{\"name\":\"comment\",\"cols\":\"20\",\"rows\":\"10\"}})]),_c('ul',{staticClass:\"modal-btns\"},[_c('li',{staticClass:\"modal-btns-item\"},[_c('Button',{ref:\"register\",class:[\n              'btn-heighlight',\n              'btn-register',\n              _vm.isAnimating ? 'is-animating' : '',\n              _vm.isSuccess ? 'is-success' : '' ],on:{\"onClick\":_vm.register}},[_vm._v(\"\")])],1),_c('li',{staticClass:\"modal-btns-item\"},[_c('Button',{staticClass:\"btn-disabled\",on:{\"onClick\":_vm.closeModal}},[_vm._v(\"\")])],1)])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.errors.length > 0)?_c('ul',{staticClass:\"errors\"},_vm._l((_vm.errors),function(error,index){return _c('li',{key:index,staticClass:\"errors-item\"},[_vm._v(_vm._s(error))])}),0):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component\nexport default class Errors extends Vue {\n  @Prop() private errors!: string[]\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Errors.vue?vue&type=template&id=aeff4b04&scoped=true&\"\nimport script from \"./Errors.vue?vue&type=script&lang=ts&\"\nexport * from \"./Errors.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Errors.vue?vue&type=style&index=0&id=aeff4b04&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aeff4b04\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  Component, Prop, Vue, Emit,\n} from 'vue-property-decorator';\nimport FormItem from '@/components/FormItem.vue';\nimport CheckBox from '@/components/CheckBox.vue';\nimport Button from '@/components/Button.vue';\nimport Errors from '@/components/Errors.vue';\nimport { jobType } from '@/data/data';\n\n@Component({\n  components: {\n    FormItem,\n    CheckBox,\n    Button,\n    Errors,\n  },\n})\nexport default class Modal extends Vue {\n  @Prop() private date!: string\n\n  @Prop() private startTime!: string\n\n  @Prop() private endTime!: string\n\n  jobTypes = jobType;\n\n  jobs: string[] = [];\n\n  errors: string[] = [];\n\n  isAnimating = false;\n\n  isSuccess = false;\n\n  @Emit('resetShowModal')\n  closeModal() {\n    const modal = this.$refs.modal as HTMLElement;\n    modal.classList.remove('is-shown');\n    this.isAnimating = false;\n    this.isSuccess = false;\n  }\n\n  addJob(job: string) {\n    if (typeof job !== 'string') {\n      this.jobs = this.jobs.filter((j) => j !== job.target.value);\n      return;\n    }\n    this.jobs = [...this.jobs, job];\n    this.errors = [];\n  }\n\n  register() {\n    if (this.jobs.length < 1) {\n      this.errors.push('');\n      return;\n    }\n    this.isAnimating = true;\n    window.setTimeout(this.done, 3000);\n    window.setTimeout(this.closeModal, 4500);\n  }\n\n  done() {\n    this.isSuccess = true;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=63a223b2&scoped=true&\"\nimport script from \"./Modal.vue?vue&type=script&lang=ts&\"\nexport * from \"./Modal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Modal.vue?vue&type=style&index=0&id=63a223b2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63a223b2\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport FullCalendar from '@fullcalendar/vue';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport { events } from '@/data/data';\nimport Modal from '@/components/Modal.vue';\n\n@Component({\n  components: {\n    FullCalendar,\n    Modal,\n  },\n})\nexport default class Calendar extends Vue {\n  calendarPlugins = [dayGridPlugin, timeGridPlugin];\n\n  header = {\n    left: 'today prev,next',\n    center: 'title',\n    right: 'timeGridWeek, dayGridMonth',\n  };\n\n  eventList = events;\n\n  date = '';\n\n  startTime = '';\n\n  endTime = '';\n\n  showModal = false;\n\n  get modalClassName() {\n    return this.showModal ? 'is-shown' : '';\n  }\n\n  eventClick(info): void {\n    const { start } = info.event;\n    const { end } = info.event;\n\n    this.date = `${start.getFullYear()}/${Calendar.format(start.getMonth() + 1)}/${Calendar.format(start.getDate())}`;\n    this.startTime = `${Calendar.format(start.getHours())}:${Calendar.format(start.getMinutes())}`;\n    this.endTime = `${Calendar.format(end.getHours())}:${Calendar.format(end.getMinutes())}`;\n\n    this.showModal = true;\n  }\n\n  resetShowModal() {\n    this.showModal = false;\n  }\n\n  static format = (d: number) => `00${d}`.slice(-2);\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Calendar.vue?vue&type=template&id=a36ed970&\"\nimport script from \"./Calendar.vue?vue&type=script&lang=ts&\"\nexport * from \"./Calendar.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Calendar.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"clasa\":\"review\"}},[_c('div',{staticClass:\"review-box\"},[_c('div',{staticClass:\"review-header\"},[_c('p',{staticClass:\"review-image\"},[_c('img',{attrs:{\"src\":_vm.image,\"width\":\"60\",\"height\":\"60\"}})]),_c('div',{staticClass:\"review-info\"},[_c('p',{staticClass:\"review-name\"},[_vm._v(_vm._s(_vm.name))]),_c('p',[_c('time',[_vm._v(_vm._s(_vm.date))])])])]),_c('div',{staticClass:\"review-content\"},[_c('Stars',{attrs:{\"star\":_vm.stars,\"half\":_vm.half}}),_c('p',[_vm._v(\" \"+_vm._s(_vm.review)+\" \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport Stars from '@/components/Stars.vue';\n\n@Component({\n  components: {\n    Stars,\n  },\n})\nexport default class Review extends Vue {\n  @Prop() private name !: string\n\n  @Prop() private date !: string\n\n  @Prop() private image !: string\n\n  @Prop() private stars !: number\n\n  @Prop() private half !: boolean\n\n  @Prop() private review !: string\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Review.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Review.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Review.vue?vue&type=template&id=8811e9a6&scoped=true&\"\nimport script from \"./Review.vue?vue&type=script&lang=ts&\"\nexport * from \"./Review.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Review.vue?vue&type=style&index=0&id=8811e9a6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8811e9a6\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport Calendar from '@/components/Calendar.vue';\nimport Stars from '@/components/Stars.vue';\nimport DescriptionList from '@/components/DescriptionList.vue';\nimport Review from '@/components/Review.vue';\n\n\n@Component({\n  components: {\n    Calendar,\n    Stars,\n    DescriptionList,\n    Review,\n  },\n})\nexport default class Detail extends Vue {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=714898c6&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=ts&\"\nexport * from \"./Detail.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=714898c6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"714898c6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DescriptionList.vue?vue&type=style&index=0&id=a115caee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DescriptionList.vue?vue&type=style&index=0&id=a115caee&lang=scss&scoped=true&\"","/*\nFullCalendar Vue Component v4.4.0\nDocs: https://fullcalendar.io/docs/vue\nLicense: MIT\n*/\nimport deepEqual from 'fast-deep-equal';\nimport { Calendar } from '@fullcalendar/core';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/*\nReally simple clone utility. Only copies plain arrays, objects, and Dates. Transfers everything else as-is.\nWanted to use a third-party lib, but none did exactly this.\n*/\n\nfunction deepCopy(input) {\n  if (Array.isArray(input)) {\n    return input.map(deepCopy);\n  } else if (input instanceof Date) {\n    return new Date(input.valueOf());\n  } else if (_typeof(input) === 'object' && input) {\n    // non-null object\n    return mapHash(input, deepCopy);\n  } else {\n    // everything else (null, function, etc)\n    return input;\n  }\n}\nfunction mapHash(input, func) {\n  var output = {};\n\n  for (var key in input) {\n    if (hasOwnProperty.call(input, key)) {\n      output[key] = func(input[key], key);\n    }\n  }\n\n  return output;\n}\n\n/*\nthe docs point to this file as an index of options.\nwhen this files is moved, update the docs.\n*/\n\n/*\nTODO: figure out booleans so attributes can be defined like:\n<FullCalendar editable />\n*/\nvar PROP_DEFS = {\n  header: {},\n  footer: {},\n  customButtons: {},\n  buttonIcons: {},\n  themeSystem: {},\n  bootstrapFontAwesome: {},\n  firstDay: {},\n  dir: {},\n  weekends: {},\n  hiddenDays: {},\n  fixedWeekCount: {},\n  weekNumbers: {},\n  weekNumbersWithinDays: {},\n  weekNumberCalculation: {},\n  businessHours: {},\n  showNonCurrentDates: {},\n  height: {},\n  contentHeight: {},\n  aspectRatio: {},\n  handleWindowResize: {},\n  windowResizeDelay: {},\n  eventLimit: {},\n  eventLimitClick: {},\n  timeZone: {},\n  now: {},\n  defaultView: {},\n  allDaySlot: {},\n  allDayText: {},\n  slotDuration: {},\n  slotLabelFormat: {},\n  slotLabelInterval: {},\n  snapDuration: {},\n  scrollTime: {},\n  minTime: {},\n  maxTime: {},\n  slotEventOverlap: {},\n  listDayFormat: {},\n  listDayAltFormat: {},\n  noEventsMessage: {},\n  defaultDate: {},\n  nowIndicator: {},\n  visibleRange: {},\n  validRange: {},\n  dateIncrement: {},\n  dateAlignment: {},\n  duration: {},\n  dayCount: {},\n  locales: {},\n  locale: {},\n  eventTimeFormat: {},\n  columnHeader: {},\n  columnHeaderFormat: {},\n  columnHeaderText: {},\n  columnHeaderHtml: {},\n  titleFormat: {},\n  weekLabel: {},\n  displayEventTime: {},\n  displayEventEnd: {},\n  eventLimitText: {},\n  dayPopoverFormat: {},\n  navLinks: {},\n  navLinkDayClick: {},\n  navLinkWeekClick: {},\n  selectable: {},\n  selectMirror: {},\n  unselectAuto: {},\n  unselectCancel: {},\n  defaultAllDayEventDuration: {},\n  defaultTimedEventDuration: {},\n  cmdFormatter: {},\n  defaultRangeSeparator: {},\n  selectConstraint: {},\n  selectOverlap: {},\n  selectAllow: {},\n  editable: {},\n  eventStartEditable: {},\n  eventDurationEditable: {},\n  eventConstraint: {},\n  eventOverlap: {},\n  eventAllow: {},\n  eventClassName: {},\n  eventClassNames: {},\n  eventBackgroundColor: {},\n  eventBorderColor: {},\n  eventTextColor: {},\n  eventColor: {},\n  events: {},\n  eventSources: {},\n  allDayDefault: {},\n  startParam: {},\n  endParam: {},\n  lazyFetching: {},\n  nextDayThreshold: {},\n  eventOrder: {},\n  rerenderDelay: {},\n  dragRevertDuration: {},\n  dragScroll: {},\n  longPressDelay: {},\n  eventLongPressDelay: {},\n  droppable: {},\n  dropAccept: {},\n  eventDataTransform: {},\n  allDayMaintainDuration: {},\n  eventResizableFromStart: {},\n  timeGridEventMinHeight: {},\n  allDayHtml: {},\n  eventDragMinDistance: {},\n  eventResourceEditable: {},\n  eventSourceFailure: {},\n  eventSourceSuccess: {},\n  forceEventDuration: {},\n  progressiveEventRendering: {},\n  selectLongPressDelay: {},\n  selectMinDistance: {},\n  timeZoneParam: {},\n  titleRangeSeparator: {},\n  // compound OptionsInput...\n  buttonText: {},\n  views: {},\n  plugins: {},\n  // scheduler...\n  schedulerLicenseKey: {},\n  resources: {},\n  resourceLabelText: {},\n  resourceOrder: {},\n  filterResourcesWithEvents: {},\n  resourceText: {},\n  resourceGroupField: {},\n  resourceGroupText: {},\n  resourceAreaWidth: {},\n  resourceColumns: {},\n  resourcesInitiallyExpanded: {},\n  slotWidth: {},\n  datesAboveResources: {},\n  googleCalendarApiKey: {},\n  refetchResourcesOnNavigate: {},\n  // used to be emissions but are now props...\n  datesRender: {},\n  datesDestroy: {},\n  dayRender: {},\n  eventRender: {},\n  eventDestroy: {},\n  viewSkeletonRender: {},\n  viewSkeletonDestroy: {},\n  resourceRender: {}\n};\nvar PROP_IS_DEEP = {\n  header: true,\n  footer: true,\n  events: true,\n  eventSources: true,\n  resources: true\n};\nvar EMISSION_NAMES = ['windowResize', 'dateClick', 'eventClick', 'eventMouseEnter', 'eventMouseLeave', 'select', 'unselect', 'loading', 'eventPositioned', '_eventsPositioned', 'eventDragStart', 'eventDragStop', 'eventDrop', 'eventResizeStart', 'eventResizeStop', 'eventResize', 'drop', 'eventReceive', 'eventLeave', '_destroyed', // should now be props... (TODO: eventually remove)\n'datesRender', 'datesDestroy', 'dayRender', 'eventRender', 'eventDestroy', 'viewSkeletonRender', 'viewSkeletonDestroy', 'resourceRender']; // identify deprecated emissions (TODO: eventually remove)\n\nvar EMISSION_USE_PROP = {\n  datesRender: true,\n  datesDestroy: true,\n  dayRender: true,\n  eventRender: true,\n  eventDestroy: true,\n  viewSkeletonRender: true,\n  viewSkeletonDestroy: true,\n  resourceRender: true\n};\n\n/*\nVOCAB:\n\"props\" are the values passed in from the parent (they are NOT listeners/emissions)\n\"emissions\" are another way to say \"events that will fire\"\n\"options\" are the options that the FullCalendar API accepts\n\nNOTE: \"deep\" props are complex objects that we want to watch for internal changes.\nVue allows a reference to be internally mutated. Each time we detect a mutation,\nwe use deepCopy to freeze the state. This has the added benefit of stripping the\ngetter/setter methods that Vue embeds.\n*/\n\nvar FullCalendarComponent = {\n  props: PROP_DEFS,\n  // INTERNALS\n  // this.$options.calendar\n  // this.$options.deepCopies - all current deep options\n  // this.$options.dirtyOptions - null/undefined means nothing dirty\n  data: function data() {\n    return {\n      renderId: 0,\n      deepCopies: {}\n    };\n  },\n  render: function render(createElement) {\n    return createElement('div', {\n      // when renderId is changed, Vue will trigger a real-DOM async rerender, calling beforeUpdate/updated\n      attrs: {\n        'data-fc-render-id': this.renderId\n      }\n    });\n  },\n  mounted: function mounted() {\n    warnDeprecatedListeners(this.$listeners);\n    this.$options.calendar = new Calendar(this.$el, this.buildCalendarOptions());\n    this.$options.calendar.render();\n  },\n  beforeUpdate: function beforeUpdate() {\n    this.renderDirty();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$options.calendar.destroy();\n  },\n  watch: mapHash(PROP_DEFS, buildPropWatcher),\n  methods: {\n    buildCalendarOptions: function buildCalendarOptions() {\n      var _this = this;\n\n      var options = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var emissionName = _step.value;\n\n          options[emissionName] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            _this.$emit.apply(_this, [emissionName].concat(args));\n          };\n        };\n\n        for (var _iterator = EMISSION_NAMES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          _loop();\n        } // do after emissions. these props will override emissions with same name\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      for (var propName in PROP_DEFS) {\n        var propVal = this[propName]; // protect against FullCalendar choking on undefined options\n\n        if (propVal !== undefined) {\n          if (PROP_IS_DEEP[propName]) {\n            propVal = deepCopy(propVal); // freeze state\n\n            this.deepCopies[propName] = propVal; // side effect!\n          }\n\n          options[propName] = propVal;\n        }\n      }\n\n      return options;\n    },\n    recordDirtyOption: function recordDirtyOption(optionName, newVal) {\n      (this.$options.dirtyOptions || (this.$options.dirtyOptions = {}))[optionName] = newVal;\n      this.renderId++; // triggers a render eventually\n    },\n    renderDirty: function renderDirty() {\n      var dirtyOptions = this.$options.dirtyOptions;\n\n      if (dirtyOptions) {\n        this.$options.dirtyOptions = null; // clear before rendering. might trigger new dirtiness\n\n        this.$options.calendar.mutateOptions(dirtyOptions, [], false, deepEqual);\n      }\n    },\n    getApi: function getApi() {\n      return this.$options.calendar;\n    }\n  }\n};\n\nfunction buildPropWatcher(propDef, propName) {\n  if (PROP_IS_DEEP[propName]) {\n    return {\n      deep: true,\n      // listen to children as well\n      handler: function handler(newVal) {\n        // use this instead of the handler's param because if same reference, will always be equal\n        var oldVal = this.deepCopies[propName];\n\n        if (!deepEqual(newVal, oldVal)) {\n          newVal = deepCopy(newVal); // freeze state\n\n          this.deepCopies[propName] = newVal; // always keep this up to date\n\n          this.recordDirtyOption(propName, newVal);\n        }\n      }\n    };\n  } else {\n    return function (newVal) {\n      this.recordDirtyOption(propName, newVal);\n    };\n  }\n}\n\nfunction warnDeprecatedListeners(listenerHash) {\n  for (var emissionName in listenerHash) {\n    if (EMISSION_USE_PROP[emissionName]) {\n      console.warn('Use of ' + emissionName + ' as an event is deprecated. Please convert to a prop.');\n    }\n  }\n}\n\n/*\nRegisters the component globally if appropriate.\nThis modules exposes the component AND an install function.\n\nDerived from:\nhttps://vuejs.org/v2/cookbook/packaging-sfc-for-npm.html\n*/\n\nvar installed = false; // declare install function executed by Vue.use()\n\nfunction install(Vue) {\n  if (!installed) {\n    installed = true;\n    Vue.component('FullCalendar', FullCalendarComponent);\n  }\n} // detect a globally availble version of Vue (eg. in browser via <script> tag)\n\nvar GlobalVue;\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n} // auto-install if possible\n\n\nif (GlobalVue) {\n  GlobalVue.use({\n    install: install\n  });\n} // to allow use as module (npm/webpack/etc.) export component\n\nexport default FullCalendarComponent;\nexport { install };\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=style&index=0&id=aeff4b04&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Errors.vue?vue&type=style&index=0&id=aeff4b04&lang=scss&scoped=true&\""],"sourceRoot":""}